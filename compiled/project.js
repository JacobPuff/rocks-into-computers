class Ia{constructor(){this.subscribable=new mu(this),this.subscribers=new Set}subscribe(t){return this.subscribers.add(t),()=>this.unsubscribe(t)}unsubscribe(t){this.subscribers.delete(t)}clear(){this.subscribers.clear()}notifySubscribers(t){return[...this.subscribers].map(e=>e(t))}}class mu{constructor(t){this.dispatcher=t}subscribe(t){return this.dispatcher.subscribe(t)}unsubscribe(t){this.dispatcher.unsubscribe(t)}}class si extends Ia{dispatch(t){this.notifySubscribers(t)}}class Kc extends Ia{constructor(){super(...arguments),this.value=!1}raise(){this.value||(this.value=!0,this.notifySubscribers())}reset(){this.value=!1}isRaised(){return this.value}subscribe(t){const e=super.subscribe(t);return this.value&&t(),e}}class ge extends Ia{get current(){return this.value}set current(t){this.value=t,this.notifySubscribers(t)}constructor(t){super(),this.value=t,this.subscribable=new tp(this)}subscribe(t,e=!0){const n=super.subscribe(t);return e&&t(this.value),n}}class tp extends mu{get current(){return this.dispatcher.current}subscribe(t,e=!0){return this.dispatcher.subscribe(t,e)}}class fn{get onChanged(){return this.value.subscribable}get onDisabled(){return this.disabled.subscribable}constructor(t,e){this.name=t,this.initial=e,this.type=void 0,this.spacing=!1,this.description="",this.disabled=new ge(!1),this.value=new ge(e)}get(){return this.value.current}set(t){this.value.current=this.parse(t)}parse(t){return t}serialize(){return this.value.current}clone(){return new this.constructor(this.name,this.get())}disable(t=!0){return this.disabled.current=t,this}space(t=!0){return this.spacing=t,this}describe(t){return this.description=t,this}}class Zl extends fn{constructor(){super(...arguments),this.type=Boolean}parse(t){return!!t}}class yu extends Error{constructor(t,e){typeof t=="string"?(super(t),this.remarks=e):(super(t.message),this.remarks=t.remarks,this.object=t.object,this.durationMs=t.durationMs,this.inspect=t.inspect)}}class ep{constructor(){this.resolveCurrent=null,this.current=null}async acquire(){for(;this.current;)await this.current;this.current=new Promise(t=>{this.resolveCurrent=t})}release(){var t;this.current=null,(t=this.resolveCurrent)==null||t.call(this),this.resolveCurrent=null}}const Ir=[];function Ks(){const i=Ir.at(-1);if(!i)throw new Error("The scene is not available in the current context.");return i}function np(i){Ir.push(i)}function ip(i){if(Ir.pop()!==i)throw new Error("startScene/endScene were called out of order.")}function de(){var i;return((i=Ir.at(-1))==null?void 0:i.logger)??console}function _n(){Ks().enterCanTransitionOut()}const Ba=[];function to(){const i=Ba.at(-1);if(!i)throw new yu("The thread is not available in the current context.",`<p><code>useThread()</code> can only be called from within generator functions.
      It&#39;s not available during rendering.</p>
`);return i}function sp(i){Ba.push(i)}function op(i){if(Ba.pop()!==i)throw new Error("startThread/endThread was called out of order.")}function*U(i){const{slides:t}=Ks(),e=to();for(t.register(i,e.fixed),yield;t.shouldWait(i);)yield}function vs(i){return i[0].toUpperCase()+i.slice(1)}function C(){let i;return e=>{if(e!==void 0)i=e;else return i}}function w(i,t){return e=>{i[t]=e}}function vu(i){return{message:i.message,stack:i.stack,remarks:i.remarks}}const rp=180/Math.PI,Li=Math.PI/180;function gt(i,t,e){let n=0,s=i;t!==void 0&&(n=i,s=t),e=e===void 0?n<s?1:-1:e;const o=[];let a=Math.max(Math.ceil((s-n)/e),0),c=0;for(;a--;)o[c++]=n,n+=e;return o}function ap(i){const t=Ks(),e=to();return t.timeEvents.register(i,e.time())}const La=[];function bu(){const i=La.at(-1);if(!i)throw new Error("The playback is not available in the current context.");return i}function lp(i){La.push(i)}function up(i){if(La.pop()!==i)throw new Error("startPlayback/endPlayback were called out of order.")}function Hn(i,...t){const e={[i.name]:i},n=Object.getOwnPropertyDescriptor(e,i.name);if(n)for(let s=t.length-1;s>=0;s--)t[s](e,i.name,n)}const Ql=Symbol.for("@motion-canvas/core/decorators/UNINITIALIZED");function eo(i){return(t,e)=>{let n=Ql;Object.defineProperty(t,e,{get(){return n===Ql&&(n=i.call(this)),n}})}}function Ee(i){return function(t,e,n){n.value.prototype.name=i??e,n.value.prototype.threadable=!0}}function Ar(i,t){const e=Object.getPrototypeOf(i);e.threadable||(e.threadable=!0,e.name=typeof t=="string"?t:hp(t))}function hp(i){return Object.getPrototypeOf(i).name??null}class Kl{get fixed(){return this.fixedTime}get canceled(){var t;return this.isCanceled||(((t=this.parent)==null?void 0:t.canceled)??!1)}get paused(){var t;return this.isPaused||(((t=this.parent)==null?void 0:t.paused)??!1)}constructor(t){this.runner=t,this.children=[],this.time=W(0),this.parent=null,this.isCanceled=!1,this.isPaused=!1,this.fixedTime=0}next(){if(this.paused)return{value:null,done:!1};sp(this);const t=this.runner.next(this.value);return op(this),this.value=null,t}update(t){this.paused||(this.time(this.time()+t),this.fixedTime+=t),this.children=this.children.filter(e=>!e.canceled)}add(t){t.cancel(),t.parent=this,t.isCanceled=!1,t.time(this.time()),t.fixedTime=this.fixedTime,this.children.push(t),Ar(t.runner,`unknown ${this.children.length}`)}cancel(){this.isCanceled=!0,this.parent=null}pause(t){this.isPaused=t}}function cp(i){return i&&(typeof i=="object"||typeof i=="function")&&"toPromise"in i}function wu(i){return i!==null&&typeof i=="object"&&Symbol.iterator in i&&"next"in i}function ue(...i){const t=to();for(const e of i){const n=t.children.find(s=>s.runner===e);n&&!n.canceled&&(n.cancel(),n.time(t.time()))}}Hn(Ma,Ee());function*Ma(i,...t){let e=!0;typeof i=="boolean"?e=i:t.push(i);const n=to(),s=t.map(c=>n.children.find(g=>g.runner===c)).filter(c=>c),o=n.time();let a;if(e){for(;s.find(c=>!c.canceled);)yield;a=Math.max(...s.map(c=>c.time()))}else{for(;!s.find(g=>g.canceled);)yield;const c=s.filter(g=>g.canceled);a=Math.min(...c.map(g=>g.time()))}n.time(Math.max(o,a))}function pp(i){return typeof(i==null?void 0:i.then)=="function"}Hn(Pu,Ee());function*Pu(i,t){const e=bu(),n=i();Ar(n,"root");const s=new Kl(n);t==null||t(s);let o=[s];for(;o.length>0;){const a=[],c=[...o],g=e.framesToSeconds(1)*e.speed;for(;c.length>0;){const v=c.pop();if(!v||v.canceled)continue;const A=v.next();if(A.done){v.cancel();continue}if(wu(A.value)){const P=new Kl(A.value);v.value=A.value,v.add(P),c.push(v),c.push(P)}else A.value?(v.value=yield A.value,c.push(v)):(v.update(g),a.unshift(v))}o=a.filter(v=>!v.canceled),o.length>0&&(yield)}}var Nn;(function(i){i[i.BeforeRender=0]="BeforeRender",i[i.BeginRender=1]="BeginRender",i[i.FinishRender=2]="FinishRender",i[i.AfterRender=3]="AfterRender"})(Nn||(Nn={}));class fp{get onBeforeRender(){return this.beforeRender.subscribable}get onBeginRender(){return this.beginRender.subscribable}get onFinishRender(){return this.finishRender.subscribable}get onAfterRender(){return this.afterRender.subscribable}constructor(t){this.scene=t,this.beforeRender=new si,this.beginRender=new si,this.finishRender=new si,this.afterRender=new si,this.scene.onRenderLifecycle.subscribe(([e,n])=>{switch(e){case Nn.BeforeRender:return this.beforeRender.dispatch(n);case Nn.BeginRender:return this.beginRender.dispatch(n);case Nn.FinishRender:return this.finishRender.dispatch(n);case Nn.AfterRender:return this.afterRender.dispatch(n)}}),this.scene.onReset.subscribe(()=>{this.beforeRender.clear(),this.beginRender.clear(),this.finishRender.clear(),this.afterRender.clear()})}}class Bo{constructor(t){this.state=t,this.nextGauss=null}static createSeed(){return Math.floor(Math.random()*4294967296)}nextFloat(t=0,e=1){return _t(t,e,this.next())}nextInt(t=0,e=4294967296){let n=Math.floor(_t(t,e,this.next()));return n===e&&(n=t),n}gauss(t=0,e=1){let n=this.nextGauss;if(this.nextGauss=null,n===null){const s=this.next()*2*Math.PI,o=Math.sqrt(-2*Math.log(1-this.next()));n=Math.cos(s)*o,this.nextGauss=Math.sin(s)*o}return t+n*e}floatArray(t,e=0,n=1){return gt(t).map(()=>this.nextFloat(e,n))}intArray(t,e=0,n=4294967296){return gt(t).map(()=>this.nextInt(e,n))}spawn(){return new Bo(this.nextInt())}next(){this.state|=0,this.state=this.state+1831565813|0;let t=Math.imul(this.state^this.state>>>15,1|this.state);return t=t+Math.imul(t^t>>>7,61|t)^t,((t^t>>>14)>>>0)/4294967296}}var ze;(function(i){i[i.Initial=0]="Initial",i[i.AfterTransitionIn=1]="AfterTransitionIn",i[i.CanTransitionOut=2]="CanTransitionOut",i[i.Finished=3]="Finished"})(ze||(ze={}));var Lo;(function(i){i[i.Playing=0]="Playing",i[i.Rendering=1]="Rendering",i[i.Paused=2]="Paused",i[i.Presenting=3]="Presenting"})(Lo||(Lo={}));class dp{get onChanged(){return this.slides.subscribable}constructor(t){this.scene=t,this.slides=new ge([]),this.lookup=new Map,this.collisionLookup=new Set,this.current=null,this.canResume=!1,this.waitsForId=null,this.targetId=null,this.handleReload=()=>{this.lookup.clear(),this.collisionLookup.clear(),this.current=null,this.waitsForId=null,this.targetId=null},this.handleReset=()=>{this.collisionLookup.clear(),this.current=null,this.waitsForId=null},this.handleRecalculated=()=>{this.slides.current=[...this.lookup.values()]},this.scene.onReloaded.subscribe(this.handleReload),this.scene.onReset.subscribe(this.handleReset),this.scene.onRecalculated.subscribe(this.handleRecalculated)}setTarget(t){this.targetId=t}resume(){this.canResume=!0}isWaitingFor(t){return this.waitsForId===t}isWaiting(){return this.waitsForId!==null}didHappen(t){var e;if(this.current===null)return!1;for(const n of this.lookup.keys()){if(n===t)return!0;if(n===((e=this.current)==null?void 0:e.id))return!1}return!1}getCurrent(){return this.current}register(t,e){if(this.waitsForId!==null)throw new Error(`The animation already waits for a slide: ${this.waitsForId}.`);const n=this.toId(t);this.scene.playback.state!==Lo.Presenting&&(this.lookup.has(n)||this.lookup.set(n,{id:n,name:t,time:e,scene:this.scene,stack:new Error().stack}),this.collisionLookup.has(t)?this.scene.logger.warn({message:`A slide named "${t}" already exists.`,stack:new Error().stack}):this.collisionLookup.add(t)),this.waitsForId=n,this.current=this.lookup.get(n)??null,this.canResume=!1}shouldWait(t){const e=this.toId(t);if(this.waitsForId!==e)throw new Error(`The animation waits for a different slide: ${this.waitsForId}.`);if(!this.lookup.get(e))throw new Error(`Could not find the "${t}" slide.`);let s=this.canResume;return this.scene.playback.state!==Lo.Presenting&&(s=e!==this.targetId),s&&(this.waitsForId=null),!s}toId(t){return`${this.scene.name}:${t}`}}class gp{constructor(t){this.scene=t,this.signals={},this.variables={},this.handleReset=()=>{this.signals={}},t.onReset.subscribe(this.handleReset)}get(t,e){var n;return(n=this.signals)[t]??(n[t]=W(this.variables[t]??e)),()=>this.signals[t]()}updateSignals(t){this.variables=t,Object.keys(t).map(e=>{e in this.signals&&this.signals[e](t[e])})}}class mp{get firstFrame(){return this.cache.current.firstFrame}get lastFrame(){return this.firstFrame+this.cache.current.duration}get onCacheChanged(){return this.cache.subscribable}get onReloaded(){return this.reloaded.subscribable}get onRecalculated(){return this.recalculated.subscribable}get onThreadChanged(){return this.thread.subscribable}get onRenderLifecycle(){return this.renderLifecycle.subscribable}get onReset(){return this.afterReset.subscribable}get LifecycleEvents(){return this.logger.warn("LifecycleEvents is deprecated. Use lifecycleEvents instead."),this.lifecycleEvents}get previous(){return this.previousScene}constructor(t){this.cache=new ge({firstFrame:0,transitionDuration:0,duration:0,lastFrame:0}),this.reloaded=new si,this.recalculated=new si,this.thread=new ge(null),this.renderLifecycle=new si,this.afterReset=new si,this.lifecycleEvents=new fp(this),this.previousScene=null,this.runner=null,this.state=ze.Initial,this.cached=!1,this.counters={},this.name=t.name,this.size=t.size,this.resolutionScale=t.resolutionScale,this.logger=t.logger,this.playback=t.playback,this.meta=t.meta,this.runnerFactory=t.config,this.creationStack=t.stack,this.experimentalFeatures=t.experimentalFeatures??!1,Hn(this.runnerFactory,Ee(this.name)),this.timeEvents=new t.timeEventsClass(this),this.variables=new gp(this),this.slides=new dp(this),this.random=new Bo(this.meta.seed.get()),this.previousOnTop=!1}update(){}async render(t){let e=0;do e++,await ve.consumePromises(),t.save(),t.clearRect(0,0,t.canvas.width,t.canvas.height),this.execute(()=>this.draw(t)),t.restore();while(ve.hasPromises()&&e<10);e>1&&this.logger.debug(`render iterations: ${e}`)}reload({config:t,size:e,stack:n,resolutionScale:s}={}){t&&(this.runnerFactory=t),e&&(this.size=e),s&&(this.resolutionScale=s),n&&(this.creationStack=n),this.cached=!1,this.reloaded.dispatch()}async recalculate(t){const e=this.cache.current;if(e.firstFrame=this.playback.frame,e.lastFrame=e.firstFrame+e.duration,this.isCached()){t(e.lastFrame),this.cache.current={...e};return}for(e.transitionDuration=-1,await this.reset();!this.canTransitionOut();)e.transitionDuration<0&&this.state===ze.AfterTransitionIn&&(e.transitionDuration=this.playback.frame-e.firstFrame),t(this.playback.frame+1),await this.next();e.transitionDuration===-1&&(e.transitionDuration=0),e.lastFrame=this.playback.frame,e.duration=e.lastFrame-e.firstFrame,await new Promise(n=>setTimeout(n,0)),this.cached=!0,this.cache.current={...e},this.recalculated.dispatch()}async next(){var e;if(!this.runner)return;let t=this.execute(()=>this.runner.next());for(this.update();t.value;){if(cp(t.value)){const n=await t.value.toPromise();t=this.execute(()=>this.runner.next(n))}else if(pp(t.value)){const n=await t.value;t=this.execute(()=>this.runner.next(n))}else this.logger.warn({message:"Invalid value yielded by the scene.",object:t.value}),t=this.execute(()=>this.runner.next(t.value));this.update()}if(ve.hasPromises()){const n=await ve.consumePromises();this.logger.error({message:"Tried to access an asynchronous property before the node was ready. Make sure to yield the node before accessing the property.",stack:n[0].stack,inspect:((e=n[0].owner)==null?void 0:e.key)??void 0})}t.done&&(this.state=ze.Finished)}async reset(t=null){this.counters={},this.previousScene=t,this.previousOnTop=!1,this.random=new Bo(this.meta.seed.get()),this.runner=Pu(()=>this.runnerFactory(this.getView()),e=>{this.thread.current=e}),this.state=ze.AfterTransitionIn,this.afterReset.dispatch(),await this.next()}getSize(){return this.size}getRealSize(){return this.size.mul(this.resolutionScale)}isAfterTransitionIn(){return this.state===ze.AfterTransitionIn}canTransitionOut(){return this.state===ze.CanTransitionOut||this.state===ze.Finished}isFinished(){return this.state===ze.Finished}enterInitial(){this.state===ze.AfterTransitionIn?this.state=ze.Initial:this.logger.warn(`Scene ${this.name} entered initial in an unexpected state: ${this.state}`)}enterAfterTransitionIn(){this.state===ze.Initial?this.state=ze.AfterTransitionIn:this.logger.warn(`Scene ${this.name} transitioned in an unexpected state: ${this.state}`)}enterCanTransitionOut(){this.state===ze.AfterTransitionIn||this.state===ze.Initial?this.state=ze.CanTransitionOut:this.logger.warn(`Scene ${this.name} was marked as finished in an unexpected state: ${this.state}`)}isCached(){return this.cached}execute(t){let e;np(this),lp(this.playback);try{e=t()}finally{up(this.playback),ip(this)}return e}}function yp(){return new $i("scene",{version:new fn("version",1),timeEvents:new fn("time events",[]),seed:new fn("seed",Bo.createSeed())})}function xu(i,t,e){if(t.length>=i.length){const n=Math.floor(t.length*e),s=Math.floor(_t(i.length-1,t.length,e));let o="";for(let a=0;a<t.length;a++)a<n?o+=t[a]:(i[a]||a<=s)&&(o+=i[a]??t[a]);return o}else{const n=Math.round(i.length*(1-e)),s=Math.floor(_t(i.length+1,t.length,e)),o=[];for(let a=i.length-1;a>=0;a--)a<n?o.unshift(i[a]):(t[a]||a<s)&&o.unshift(t[a]??i[a]);return o.join("")}}function Zs(i,t,e,n=!1){if(e===0)return i;if(e===1)return t;if(i==null||t==null){n||de().warn(`Attempting to lerp ${i} -> ${t} may result in unexpected behavior.`);return}if(typeof i=="number"&&typeof t=="number")return _t(i,t,e);if(typeof i=="string"&&typeof t=="string")return xu(i,t,e);if(typeof i=="boolean"&&typeof t=="boolean")return e<.5?i:t;if("lerp"in i)return i.lerp(t,e);if(i&&t&&typeof i=="object"&&typeof t=="object")if(Array.isArray(i)&&Array.isArray(t)){if(i.length===t.length)return i.map((s,o)=>Zs(s,t[o],e))}else{let s=!1;if(!(i instanceof Map)&&!(t instanceof Map)&&(s=!0,i=new Map(Object.entries(i)),t=new Map(Object.entries(t))),i instanceof Map&&t instanceof Map){const o=new Map;for(const a of new Set([...i.keys(),...t.keys()])){const c=Zs(i.get(a),t.get(a),e,!0);c!==void 0&&o.set(a,c)}return s?Object.fromEntries(o):o}}return t}function vp(i,t,e){return e<.5?i:t}function _t(i,t,e){return i+(t-i)*e}function bp(i,t,e,n,s){return e+(s-i)*(n-e)/(t-i)}function He(i,t,e){return e<i?i:e>t?t:e}function Su(i,t,e){let n=t;e>1?e=1/e:n=!n;const s=n?Math.acos(He(-1,1,1-i)):Math.asin(i),o=_t(s,_t(0,Math.PI/2,i),e);let a=Math.sin(o),c=1-Math.cos(o);return t&&([a,c]=[c,a]),new d(a,c)}function Ou(i,t=0,e=1){return i=i*i*i,_t(t,e,i)}function Cr(i,t=0,e=1){return i=i<.5?4*i*i*i:1-Math.pow(-2*i+2,3)/2,_t(t,e,i)}function wp(i,t=0,e=1){return i=i===1?1:1-Math.pow(2,-10*i),_t(t,e,i)}function is(i,t=0,e=1){return _t(t,e,i)}Hn(qs,Ee());function*qs(i,t,e){const n=to(),s=n.time(),o=n.time()+i;for(t(0,0);o>n.fixed;){const a=n.fixed-s,c=a/i;a>0&&t(c,a),yield}n.time(o),t(1,i),e==null||e(1,i)}Hn(Q,Ee());function*Q(...i){for(const t of i)yield t;yield*Ma(...i)}Hn(Ru,Ee());function*Ru(...i){for(const t of i)yield t;yield*Ma(!1,...i)}Hn(Pp,Ee());function*Pp(i,t){yield*yt(ap(i)),t&&(yield*t)}Hn(yt,Ee());function*yt(i=0,t){const e=to(),n=bu().framesToSeconds(1),s=e.time()+i;for(;s-n>e.fixed;)yield;e.time(s),t&&(yield*t)}Hn(le,Ee());function*le(i,t){yield*yt(i),wu(t)?yield*t:t()}Hn(Ht,Ee());function*Ht(i,t){for(let e=0;e<i;e++){const n=t(e);n?yield*n:yield}}function tu(i,t){let e;return typeof i=="string"?(e=t(),Ar(e,i)):(e=i(),Ar(e,e)),e}class ve{static collectPromise(t,e=null){const n={promise:t,value:e,stack:new Error().stack},s=this.collectionStack.at(-1);return s&&(n.owner=s.owner),t.then(o=>{n.value=o,s==null||s.markDirty()}),this.promises.push(n),n}static hasPromises(){return this.promises.length>0}static async consumePromises(){const t=[...this.promises];return await Promise.all(t.map(e=>e.promise)),this.promises=this.promises.filter(e=>!t.includes(e)),t}constructor(t){this.owner=t,this.dependencies=new Set,this.event=new Kc,this.markDirty=()=>this.event.raise(),this.invokable=this.invoke.bind(this),Object.defineProperty(this.invokable,"context",{value:this}),Object.defineProperty(this.invokable,"toPromise",{value:this.toPromise.bind(this)})}invoke(){}startCollecting(){if(ve.collectionSet.has(this))throw new yu("A circular dependency occurred between signals.",`This can happen when signals reference each other in a loop.
        Try using the attached stack trace to locate said loop.`);ve.collectionSet.add(this),ve.collectionStack.push(this)}finishCollecting(){if(ve.collectionSet.delete(this),ve.collectionStack.pop()!==this)throw new Error("collectStart/collectEnd was called out of order.")}clearDependencies(){this.dependencies.forEach(t=>t.unsubscribe(this.markDirty)),this.dependencies.clear()}collect(){const t=ve.collectionStack.at(-1);t&&(t.dependencies.add(this.event.subscribable),this.event.subscribe(t.markDirty))}dispose(){this.clearDependencies(),this.event.clear(),this.owner=null}async toPromise(){do await ve.consumePromises(),this.invokable();while(ve.hasPromises());return this.invokable}}ve.collectionSet=new Set;ve.collectionStack=[];ve.promises=[];const Pa=Symbol.for("@motion-canvas/core/signals/default");function oi(i){return typeof i=="function"}function Vs(i,t){return oi(i)?()=>t(i()):t(i)}function ri(i){return oi(i)?i():i}class ws extends ve{constructor(t,e,n=void 0,s=a=>a,o={}){super(n),this.initial=t,this.interpolation=e,this.parser=s,this.tweening=!1,Object.defineProperty(this.invokable,"reset",{value:this.reset.bind(this)}),Object.defineProperty(this.invokable,"save",{value:this.save.bind(this)}),Object.defineProperty(this.invokable,"isInitial",{value:this.isInitial.bind(this)}),this.initial!==void 0&&(this.current=this.initial,this.markDirty(),oi(this.initial)||(this.last=this.parse(this.initial))),this.extensions={getter:this.getter.bind(this),setter:this.setter.bind(this),tweener:this.tweener.bind(this),...o}}toSignal(){return this.invokable}parse(t){return this.parser(t)}set(t){return this.extensions.setter(t),this.owner}setter(t){return t===Pa&&(t=this.initial),this.current===t?this.owner:(this.current=t,this.markDirty(),this.clearDependencies(),oi(t)||(this.last=this.parse(t)),this.owner)}get(){return this.extensions.getter()}getter(){var t;if(this.event.isRaised()&&oi(this.current)){this.clearDependencies(),this.startCollecting();try{this.last=this.parse(this.current())}catch(e){de().error({...vu(e),inspect:(t=this.owner)==null?void 0:t.key})}this.finishCollecting()}return this.event.reset(),this.collect(),this.last}invoke(t,e,n=Cr,s=this.interpolation){return t===void 0?this.get():e===void 0?this.set(t):this.createQueue(n,s).to(t,e)}createQueue(t,e){const n=this.get(),s=[],o=tu("animation chain",function*(){for(;s.length>0;)yield*s.shift()});return o.to=(a,c,g=t,v=e)=>(t=g,e=v,s.push(this.tween(a,c,g,v)),o),o.back=(a,c=t,g=e)=>(t=c,e=g,s.push(this.tween(n,a,t,e)),o),o.wait=a=>(s.push(yt(a)),o),o.run=a=>(s.push(a),o),o.do=a=>(s.push(tu(function*(){a()})),o),o}*tween(t,e,n,s){t===Pa&&(t=this.initial),this.tweening=!0,yield*this.extensions.tweener(t,e,n,s),this.set(t),this.tweening=!1}*tweener(t,e,n,s){const o=this.get();yield*qs(e,a=>{this.set(s(o,this.parse(ri(t)),n(a)))})}dispose(){super.dispose(),this.initial=void 0,this.current=void 0,this.last=void 0}reset(){return this.initial!==void 0&&this.set(this.initial),this.owner}save(){return this.set(this.get())}isInitial(){return this.collect(),this.current===this.initial}getInitial(){return this.initial}raw(){return this.current}isTweening(){return this.tweening}}class Br extends ws{constructor(t,e,n,s,o=void 0,a={}){var c;super(void 0,s,o,e,a),this.entries=t,this.signals=[],this.parser=e;for(const g of t){let v,A;Array.isArray(g)?([v,A]=g,(c=A.context).owner??(c.owner=this)):(v=g,A=new ws(Vs(n,P=>e(P)[g]),_t,o??this.invokable).toSignal()),this.signals.push([v,A]),Object.defineProperty(this.invokable,v,{value:A})}}toSignal(){return this.invokable}parse(t){return this.parser(t)}getter(){return this.parse(Object.fromEntries(this.signals.map(([t,e])=>[t,e()])))}setter(t){if(oi(t))for(const[e,n]of this.signals)n(()=>this.parser(t())[e]);else{const e=this.parse(t);for(const[n,s]of this.signals)s(e[n])}return this.owner}reset(){for(const[,t]of this.signals)t.reset();return this.owner}save(){for(const[,t]of this.signals)t.save();return this.owner}isInitial(){for(const[,t]of this.signals)if(!t.isInitial())return!1;return!0}raw(){return Object.fromEntries(this.signals.map(([t,e])=>[t,e.context.raw()]))}}class xp extends ve{constructor(t,e){super(e),this.factory=t,this.markDirty()}toSignal(){return this.invokable}dispose(){super.dispose(),this.last=void 0}invoke(...t){var e;if(this.event.isRaised()){this.clearDependencies(),this.startCollecting();try{this.last=this.factory(...t)}catch(n){de().error({...vu(n),inspect:(e=this.owner)==null?void 0:e.key})}this.finishCollecting()}return this.event.reset(),this.collect(),this.last}}function Sp(i,t){return new xp(i,t).toSignal()}function W(i,t=Zs,e){return new ws(i,t,e).toSignal()}const To=1e-6;class te{static fromRotation(t){return te.identity.rotate(t)}static fromTranslation(t){return te.identity.translate(new d(t))}static fromScaling(t){return te.identity.scale(new d(t))}get x(){return new d(this.values[0],this.values[1])}get y(){return new d(this.values[2],this.values[3])}get scaleX(){return this.values[0]}set scaleX(t){this.values[0]=this.x.normalized.scale(t).x}get skewX(){return this.values[1]}set skewX(t){this.values[1]=t}get scaleY(){return this.values[3]}set scaleY(t){this.values[3]=this.y.normalized.scale(t).y}get skewY(){return this.values[2]}set skewY(t){this.values[2]=t}get translateX(){return this.values[4]}set translateX(t){this.values[4]=t}get translateY(){return this.values[5]}set translateY(t){this.values[5]=t}get rotation(){return d.degrees(this.values[0],this.values[1])}set rotation(t){const e=this.rotate(t-this.rotation);this.values[0]=e.values[0],this.values[1]=e.values[1],this.values[2]=e.values[2],this.values[3]=e.values[3]}get translation(){return new d(this.values[4],this.values[5])}set translation(t){const e=new d(t);this.values[4]=e.x,this.values[5]=e.y}get scaling(){return new d(this.values[0],this.values[3])}set scaling(t){const e=new d(t),n=new d(this.values[0],this.values[1]).normalized,s=new d(this.values[2],this.values[3]).normalized;this.values[0]=n.x*e.x,this.values[1]=n.y*e.y,this.values[2]=s.x*e.x,this.values[3]=s.y*e.y}get inverse(){const t=this.values[0],e=this.values[1],n=this.values[2],s=this.values[3],o=this.values[4],a=this.values[5];let c=t*s-e*n;return c?(c=1/c,new te(s*c,-e*c,-n*c,t*c,(n*a-s*o)*c,(e*o-t*a)*c)):null}get determinant(){return this.values[0]*this.values[3]-this.values[1]*this.values[2]}get domMatrix(){return new DOMMatrix([this.values[0],this.values[1],this.values[2],this.values[3],this.values[4],this.values[5]])}constructor(t,e,n,s,o,a){if(this.values=new Float32Array(6),arguments.length===0){this.values=new Float32Array([1,0,0,1,0,0]);return}if(arguments.length===6){this.values[0]=t,this.values[1]=e,this.values[2]=n,this.values[3]=s,this.values[4]=o,this.values[5]=a;return}if(t instanceof DOMMatrix){this.values[0]=t.m11,this.values[1]=t.m12,this.values[2]=t.m21,this.values[3]=t.m22,this.values[4]=t.m41,this.values[5]=t.m42;return}if(t instanceof te){this.values=t.values;return}if(Array.isArray(t)){if(t.length===2){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=e[0],this.values[3]=e[1],this.values[4]=n[0],this.values[5]=n[1];return}if(t.length===3){const A=new d(t[0]),P=new d(t[1]),M=new d(t[2]);this.values[0]=A.x,this.values[1]=A.y,this.values[2]=P.x,this.values[3]=P.y,this.values[4]=M.x,this.values[5]=M.y;return}this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3],this.values[4]=t[4],this.values[5]=t[5];return}const c=new d(t),g=new d(e),v=new d(n);this.values[0]=c.x,this.values[1]=c.y,this.values[2]=g.x,this.values[3]=g.y,this.values[4]=v.x,this.values[5]=v.y}column(t){return new d(this.values[t*2],this.values[t*2+1])}row(t){return[this.values[t],this.values[t+2],this.values[t+4]]}mul(t){const e=this.values[0],n=this.values[1],s=this.values[2],o=this.values[3],a=this.values[4],c=this.values[5],g=t.values[0],v=t.values[1],A=t.values[2],P=t.values[3],M=t.values[4],G=t.values[5];return new te(e*g+s*v,n*g+o*v,e*A+s*P,n*A+o*P,e*M+s*G+a,n*M+o*G+c)}rotate(t,e=!0){e&&(t*=Li);const n=this.values[0],s=this.values[1],o=this.values[2],a=this.values[3],c=this.values[4],g=this.values[5],v=Math.sin(t),A=Math.cos(t);return new te(n*A+o*v,s*A+a*v,n*-v+o*A,s*-v+a*A,c,g)}scale(t){const e=new d(t);return new te(this.values[0]*e.x,this.values[1]*e.x,this.values[2]*e.y,this.values[3]*e.y,this.values[4],this.values[5])}mulScalar(t){return new te(this.values[0]*t,this.values[1]*t,this.values[2]*t,this.values[3]*t,this.values[4]*t,this.values[5]*t)}translate(t){const e=new d(t);return new te(this.values[0],this.values[1],this.values[2],this.values[3],this.values[0]*e.x+this.values[2]*e.y+this.values[4],this.values[1]*e.x+this.values[3]*e.y+this.values[5])}add(t){return new te(this.values[0]+t.values[0],this.values[1]+t.values[1],this.values[2]+t.values[2],this.values[3]+t.values[3],this.values[4]+t.values[4],this.values[5]+t.values[5])}sub(t){return new te(this.values[0]-t.values[0],this.values[1]-t.values[1],this.values[2]-t.values[2],this.values[3]-t.values[3],this.values[4]-t.values[4],this.values[5]-t.values[5])}toSymbol(){return te.symbol}equals(t,e=To){return Math.abs(this.values[0]-t.values[0])<=e+Number.EPSILON&&Math.abs(this.values[1]-t.values[1])<=e+Number.EPSILON&&Math.abs(this.values[2]-t.values[2])<=e+Number.EPSILON&&Math.abs(this.values[3]-t.values[3])<=e+Number.EPSILON&&Math.abs(this.values[4]-t.values[4])<=e+Number.EPSILON&&Math.abs(this.values[5]-t.values[5])<=e+Number.EPSILON}exactlyEquals(t){return this.values[0]===t.values[0]&&this.values[1]===t.values[1]&&this.values[2]===t.values[2]&&this.values[3]===t.values[3]&&this.values[4]===t.values[4]&&this.values[5]===t.values[5]}}te.symbol=Symbol.for("@motion-canvas/core/types/Matrix2D");te.identity=new te(1,0,0,1,0,0);te.zero=new te(0,0,0,0,0,0);var eu;(function(i){i[i.Vertical=1]="Vertical",i[i.Horizontal=2]="Horizontal"})(eu||(eu={}));var ne;(function(i){i[i.Top=4]="Top",i[i.Bottom=8]="Bottom",i[i.Left=16]="Left",i[i.Right=32]="Right"})(ne||(ne={}));var Ue;(function(i){i[i.Middle=3]="Middle",i[i.Top=5]="Top",i[i.Bottom=9]="Bottom",i[i.Left=18]="Left",i[i.Right=34]="Right",i[i.TopLeft=20]="TopLeft",i[i.TopRight=36]="TopRight",i[i.BottomLeft=24]="BottomLeft",i[i.BottomRight=40]="BottomRight"})(Ue||(Ue={}));function Op(i){if(i===Ue.Middle)return d.zero;let t=0;i&ne.Left?t=-1:i&ne.Right&&(t=1);let e=0;return i&ne.Top?e=-1:i&ne.Bottom&&(e=1),new d(t,e)}class d{static createSignal(t,e=d.lerp,n){return new Br(["x","y"],s=>new d(s),t,e,n).toSignal()}static lerp(t,e,n){let s,o;return typeof n=="number"?s=o=n:(s=n.x,o=n.y),new d(_t(t.x,e.x,s),_t(t.y,e.y,o))}static arcLerp(t,e,n,s=!1,o){return o??(o=t.sub(e).ctg),d.lerp(t,e,Su(n,s,o))}static createArcLerp(t,e){return(n,s,o)=>d.arcLerp(n,s,o,t,e)}static polarLerp(t,e,n,s=!1,o=d.zero){t=t.sub(o),e=e.sub(o);const a=t.degrees;let c=e.degrees;a>c!==s&&(c=c+(s?-360:360));const v=_t(a,c,n)*Li,A=_t(t.magnitude,e.magnitude,n);return new d(A*Math.cos(v)+o.x,A*Math.sin(v)+o.y)}static createPolarLerp(t=!1,e=d.zero){return(n,s,o)=>d.polarLerp(n,s,o,t,new d(e))}static fromOrigin(t){const e=new d;return t===Ue.Middle||(t&ne.Left?e.x=-1:t&ne.Right&&(e.x=1),t&ne.Top?e.y=-1:t&ne.Bottom&&(e.y=1)),e}static fromScalar(t){return new d(t,t)}static fromRadians(t){return new d(Math.cos(t),Math.sin(t))}static fromDegrees(t){return d.fromRadians(t*Li)}static radians(t,e){return Math.atan2(e,t)}static degrees(t,e){return d.radians(t,e)*rp}static magnitude(t,e){return Math.sqrt(t*t+e*e)}static squaredMagnitude(t,e){return t*t+e*e}static angleBetween(t,e){return Math.acos(He(-1,1,t.dot(e)/(t.magnitude*e.magnitude)))*(t.cross(e)>=0?1:-1)}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}get magnitude(){return d.magnitude(this.x,this.y)}get squaredMagnitude(){return d.squaredMagnitude(this.x,this.y)}get normalized(){return this.scale(1/d.magnitude(this.x,this.y))}get safe(){return new d(isNaN(this.x)?0:this.x,isNaN(this.y)?0:this.y)}get flipped(){return new d(-this.x,-this.y)}get floored(){return new d(Math.floor(this.x),Math.floor(this.y))}get perpendicular(){return new d(this.y,-this.x)}get radians(){return d.radians(this.x,this.y)}get degrees(){return d.degrees(this.x,this.y)}get ctg(){return this.x/this.y}constructor(t,e){if(this.x=0,this.y=0,t!=null){if(typeof t!="object"){this.x=t,this.y=e??t;return}if(Array.isArray(t)){this.x=t[0],this.y=t[1];return}if("width"in t){this.x=t.width,this.y=t.height;return}this.x=t.x,this.y=t.y}}lerp(t,e){return d.lerp(this,t,e)}getOriginOffset(t){const e=d.fromOrigin(t);return e.x*=this.x/2,e.y*=this.y/2,e}scale(t){return new d(this.x*t,this.y*t)}transformAsPoint(t){const e=new te(t);return new d(this.x*e.scaleX+this.y*e.skewY+e.translateX,this.x*e.skewX+this.y*e.scaleY+e.translateY)}transform(t){const e=new te(t);return new d(this.x*e.scaleX+this.y*e.skewY,this.x*e.skewX+this.y*e.scaleY)}mul(t){const e=new d(t);return new d(this.x*e.x,this.y*e.y)}div(t){const e=new d(t);return new d(this.x/e.x,this.y/e.y)}add(t){const e=new d(t);return new d(this.x+e.x,this.y+e.y)}sub(t){const e=new d(t);return new d(this.x-e.x,this.y-e.y)}dot(t){const e=new d(t);return this.x*e.x+this.y*e.y}cross(t){const e=new d(t);return this.x*e.y-this.y*e.x}mod(t){const e=new d(t);return new d(this.x%e.x,this.y%e.y)}rotate(t,e=d.zero){const n=new d(e),s=te.fromTranslation(n).rotate(t).translate(n.flipped);return this.transformAsPoint(s)}addX(t){return new d(this.x+t,this.y)}addY(t){return new d(this.x,this.y+t)}toSymbol(){return d.symbol}toString(){return`Vector2(${this.x}, ${this.y})`}serialize(){return{x:this.x,y:this.y}}exactlyEquals(t){return this.x===t.x&&this.y===t.y}equals(t,e=To){return Math.abs(this.x-t.x)<=e+Number.EPSILON&&Math.abs(this.y-t.y)<=e+Number.EPSILON}}d.symbol=Symbol.for("@motion-canvas/core/types/Vector2");d.zero=new d;d.one=new d(1,1);d.right=new d(1,0);d.left=new d(-1,0);d.up=new d(0,1);d.down=new d(0,-1);d.top=new d(0,-1);d.bottom=new d(0,1);d.topLeft=new d(-1,-1);d.topRight=new d(1,-1);d.bottomLeft=new d(-1,1);d.bottomRight=new d(1,1);class Rt{static createSignal(t,e=Rt.lerp){return new Br(["x","y","width","height"],n=>new Rt(n),t,e).toSignal()}static lerp(t,e,n){let s,o,a,c;return typeof n=="number"?s=o=a=c=n:n instanceof d?(s=a=n.x,o=c=n.y):(s=n.x,o=n.y,a=n.width,c=n.height),new Rt(_t(t.x,e.x,s),_t(t.y,e.y,o),_t(t.width,e.width,a),_t(t.height,e.height,c))}static arcLerp(t,e,n,s=!1,o){return o??(o=(t.position.sub(e.position).ctg+t.size.sub(e.size).ctg)/2),Rt.lerp(t,e,Su(n,s,o))}static fromSizeCentered(t){return new Rt(-t.width/2,-t.height/2,t.width,t.height)}static fromPoints(...t){let e=1/0,n=1/0,s=-1/0,o=-1/0;for(const a of t)a.x>s&&(s=a.x),a.x<e&&(e=a.x),a.y>o&&(o=a.y),a.y<n&&(n=a.y);return new Rt(e,n,s-e,o-n)}static fromBBoxes(...t){let e=1/0,n=1/0,s=-1/0,o=-1/0;for(const a of t){const c=a.x+a.width;c>s&&(s=c),a.x<e&&(e=a.x);const g=a.y+a.height;g>o&&(o=g),a.y<n&&(n=a.y)}return new Rt(e,n,s-e,o-n)}lerp(t,e){return Rt.lerp(this,t,e)}get position(){return new d(this.x,this.y)}set position(t){this.x=t.x,this.y=t.y}get size(){return new d(this.width,this.height)}get center(){return new d(this.x+this.width/2,this.y+this.height/2)}get left(){return this.x}set left(t){this.width+=this.x-t,this.x=t}get right(){return this.x+this.width}set right(t){this.width=t-this.x}get top(){return this.y}set top(t){this.height+=this.y-t,this.y=t}get bottom(){return this.y+this.height}set bottom(t){this.height=t-this.y}get topLeft(){return this.position}get topRight(){return new d(this.x+this.width,this.y)}get bottomLeft(){return new d(this.x,this.y+this.height)}get bottomRight(){return new d(this.x+this.width,this.y+this.height)}get corners(){return[this.topLeft,this.topRight,this.bottomRight,this.bottomLeft]}get pixelPerfect(){return new Rt(Math.floor(this.x),Math.floor(this.y),Math.ceil(this.width+1),Math.ceil(this.height+1))}constructor(t,e=0,n=0,s=0){if(this.x=0,this.y=0,this.width=0,this.height=0,t!=null){if(typeof t=="number"){this.x=t,this.y=e,this.width=n,this.height=s;return}if(t instanceof d){this.x=t.x,this.y=t.y,e instanceof d&&(this.width=e.x,this.height=e.y);return}if(Array.isArray(t)){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3];return}this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}}transform(t){return new Rt(this.position.transformAsPoint(t),this.size.transform(t))}transformCorners(t){return this.corners.map(e=>e.transformAsPoint(t))}expand(t){return new Rt(this.x-t,this.y-t,this.width+t*2,this.height+t*2)}addSpacing(t){const e=new Rt(this);return e.left-=t.left,e.top-=t.top,e.right+=t.right,e.bottom+=t.bottom,e}includes(t){return t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height}intersects(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top}intersection(t){const e=new Rt;return this.intersects(t)&&(e.left=Math.max(this.left,t.left),e.top=Math.max(this.top,t.top),e.right=Math.min(this.right,t.right),e.bottom=Math.min(this.bottom,t.bottom)),e}toSymbol(){return Rt.symbol}toString(){return`BBox(${this.x}, ${this.y}, ${this.width}, ${this.height})`}serialize(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}Rt.symbol=Symbol.for("@motion-canvas/core/types/Rect");var Rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ut={},Ap={get exports(){return Ut},set exports(i){Ut=i}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(i,t){(function(e,n){i.exports=n()})(Rp,function(){for(var e=function(r,u,h){return u===void 0&&(u=0),h===void 0&&(h=1),r<u?u:r>h?h:r},n=e,s=function(r){r._clipped=!1,r._unclipped=r.slice(0);for(var u=0;u<=3;u++)u<3?((r[u]<0||r[u]>255)&&(r._clipped=!0),r[u]=n(r[u],0,255)):u===3&&(r[u]=n(r[u],0,1));return r},o={},a=0,c=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];a<c.length;a+=1){var g=c[a];o["[object "+g+"]"]=g.toLowerCase()}var v=function(r){return o[Object.prototype.toString.call(r)]||"object"},A=v,P=function(r,u){return u===void 0&&(u=null),r.length>=3?Array.prototype.slice.call(r):A(r[0])=="object"&&u?u.split("").filter(function(h){return r[0][h]!==void 0}).map(function(h){return r[0][h]}):r[0]},M=v,G=function(r){if(r.length<2)return null;var u=r.length-1;return M(r[u])=="string"?r[u].toLowerCase():null},K=Math.PI,I={clip_rgb:s,limit:e,type:v,unpack:P,last:G,PI:K,TWOPI:K*2,PITHIRD:K/3,DEG2RAD:K/180,RAD2DEG:180/K},X={format:{},autodetect:[]},V=I.last,ut=I.clip_rgb,D=I.type,tt=X,ot=function(){for(var u=[],h=arguments.length;h--;)u[h]=arguments[h];var p=this;if(D(u[0])==="object"&&u[0].constructor&&u[0].constructor===this.constructor)return u[0];var y=V(u),b=!1;if(!y){b=!0,tt.sorted||(tt.autodetect=tt.autodetect.sort(function(E,J){return J.p-E.p}),tt.sorted=!0);for(var m=0,x=tt.autodetect;m<x.length;m+=1){var S=x[m];if(y=S.test.apply(S,u),y)break}}if(tt.format[y]){var B=tt.format[y].apply(null,b?u:u.slice(0,-1));p._rgb=ut(B)}else throw new Error("unknown format: "+u);p._rgb.length===3&&p._rgb.push(1)};ot.prototype.toString=function(){return D(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var _=ot,pt=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(pt.Color,[null].concat(r)))};pt.Color=_,pt.version="2.4.2";var ht=pt,Et=I.unpack,se=Math.max,rt=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=Et(r,"rgb"),p=h[0],y=h[1],b=h[2];p=p/255,y=y/255,b=b/255;var m=1-se(p,se(y,b)),x=m<1?1/(1-m):0,S=(1-p-m)*x,B=(1-y-m)*x,E=(1-b-m)*x;return[S,B,E,m]},xt=rt,Nt=I.unpack,ae=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];r=Nt(r,"cmyk");var h=r[0],p=r[1],y=r[2],b=r[3],m=r.length>4?r[4]:1;return b===1?[0,0,0,m]:[h>=1?0:255*(1-h)*(1-b),p>=1?0:255*(1-p)*(1-b),y>=1?0:255*(1-y)*(1-b),m]},Gt=ae,et=ht,Fe=_,qn=X,pi=I.unpack,on=I.type,R=xt;Fe.prototype.cmyk=function(){return R(this._rgb)},et.cmyk=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(Fe,[null].concat(r,["cmyk"])))},qn.format.cmyk=Gt,qn.autodetect.push({p:2,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=pi(r,"cmyk"),on(r)==="array"&&r.length===4)return"cmyk"}});var z=I.unpack,Zt=I.last,rn=function(r){return Math.round(r*100)/100},Cs=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=z(r,"hsla"),p=Zt(r)||"lsa";return h[0]=rn(h[0]||0),h[1]=rn(h[1]*100)+"%",h[2]=rn(h[2]*100)+"%",p==="hsla"||h.length>3&&h[3]<1?(h[3]=h.length>3?h[3]:1,p="hsla"):h.length=3,p+"("+h.join(",")+")"},Dt=Cs,On=I.unpack,Ln=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];r=On(r,"rgba");var h=r[0],p=r[1],y=r[2];h/=255,p/=255,y/=255;var b=Math.min(h,p,y),m=Math.max(h,p,y),x=(m+b)/2,S,B;return m===b?(S=0,B=Number.NaN):S=x<.5?(m-b)/(m+b):(m-b)/(2-m-b),h==m?B=(p-y)/(m-b):p==m?B=2+(y-h)/(m-b):y==m&&(B=4+(h-p)/(m-b)),B*=60,B<0&&(B+=360),r.length>3&&r[3]!==void 0?[B,S,x,r[3]]:[B,S,x]},_o=Ln,an=I.unpack,Er=I.last,fi=Dt,Ho=_o,di=Math.round,Fr=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=an(r,"rgba"),p=Er(r)||"rgb";return p.substr(0,3)=="hsl"?fi(Ho(h),p):(h[0]=di(h[0]),h[1]=di(h[1]),h[2]=di(h[2]),(p==="rgba"||h.length>3&&h[3]<1)&&(h[3]=h.length>3?h[3]:1,p="rgba"),p+"("+h.slice(0,p==="rgb"?3:4).join(",")+")")},Wr=Fr,Nr=I.unpack,io=Math.round,Go=function(){for(var r,u=[],h=arguments.length;h--;)u[h]=arguments[h];u=Nr(u,"hsl");var p=u[0],y=u[1],b=u[2],m,x,S;if(y===0)m=x=S=b*255;else{var B=[0,0,0],E=[0,0,0],J=b<.5?b*(1+y):b+y-b*y,N=2*b-J,st=p/360;B[0]=st+1/3,B[1]=st,B[2]=st-1/3;for(var nt=0;nt<3;nt++)B[nt]<0&&(B[nt]+=1),B[nt]>1&&(B[nt]-=1),6*B[nt]<1?E[nt]=N+(J-N)*6*B[nt]:2*B[nt]<1?E[nt]=J:3*B[nt]<2?E[nt]=N+(J-N)*(2/3-B[nt])*6:E[nt]=N;r=[io(E[0]*255),io(E[1]*255),io(E[2]*255)],m=r[0],x=r[1],S=r[2]}return u.length>3?[m,x,S,u[3]]:[m,x,S,1]},Xo=Go,Yo=Xo,qo=X,Vo=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Uo=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,gi=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Jo=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Zo=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ye=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,mn=Math.round,oe=function(r){r=r.toLowerCase().trim();var u;if(qo.format.named)try{return qo.format.named(r)}catch{}if(u=r.match(Vo)){for(var h=u.slice(1,4),p=0;p<3;p++)h[p]=+h[p];return h[3]=1,h}if(u=r.match(Uo)){for(var y=u.slice(1,5),b=0;b<4;b++)y[b]=+y[b];return y}if(u=r.match(gi)){for(var m=u.slice(1,4),x=0;x<3;x++)m[x]=mn(m[x]*2.55);return m[3]=1,m}if(u=r.match(Jo)){for(var S=u.slice(1,5),B=0;B<3;B++)S[B]=mn(S[B]*2.55);return S[3]=+S[3],S}if(u=r.match(Zo)){var E=u.slice(1,4);E[1]*=.01,E[2]*=.01;var J=Yo(E);return J[3]=1,J}if(u=r.match(Ye)){var N=u.slice(1,4);N[1]*=.01,N[2]*=.01;var st=Yo(N);return st[3]=+u[4],st}};oe.test=function(r){return Vo.test(r)||Uo.test(r)||gi.test(r)||Jo.test(r)||Zo.test(r)||Ye.test(r)};var jr=oe,_r=ht,ln=_,so=X,We=I.type,Ne=Wr,Je=jr;ln.prototype.css=function(r){return Ne(this._rgb,r)},_r.css=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(ln,[null].concat(r,["css"])))},so.format.css=Je,so.autodetect.push({p:5,test:function(r){for(var u=[],h=arguments.length-1;h-- >0;)u[h]=arguments[h+1];if(!u.length&&We(r)==="string"&&Je.test(r))return"css"}});var Pe=_,je=ht,Ts=X,Is=I.unpack;Ts.format.gl=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=Is(r,"rgba");return h[0]*=255,h[1]*=255,h[2]*=255,h},je.gl=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(Pe,[null].concat(r,["gl"])))},Pe.prototype.gl=function(){var r=this._rgb;return[r[0]/255,r[1]/255,r[2]/255,r[3]]};var Qo=I.unpack,Hr=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=Qo(r,"rgb"),p=h[0],y=h[1],b=h[2],m=Math.min(p,y,b),x=Math.max(p,y,b),S=x-m,B=S*100/255,E=m/(255-S)*100,J;return S===0?J=Number.NaN:(p===x&&(J=(y-b)/S),y===x&&(J=2+(b-p)/S),b===x&&(J=4+(p-y)/S),J*=60,J<0&&(J+=360)),[J,B,E]},oo=Hr,ro=I.unpack,It=Math.floor,ao=function(){for(var r,u,h,p,y,b,m=[],x=arguments.length;x--;)m[x]=arguments[x];m=ro(m,"hcg");var S=m[0],B=m[1],E=m[2],J,N,st;E=E*255;var nt=B*255;if(B===0)J=N=st=E;else{S===360&&(S=0),S>360&&(S-=360),S<0&&(S+=360),S/=60;var vt=It(S),Ot=S-vt,Lt=E*(1-B),$t=Lt+nt*(1-Ot),$e=Lt+nt*Ot,Re=Lt+nt;switch(vt){case 0:r=[Re,$e,Lt],J=r[0],N=r[1],st=r[2];break;case 1:u=[$t,Re,Lt],J=u[0],N=u[1],st=u[2];break;case 2:h=[Lt,Re,$e],J=h[0],N=h[1],st=h[2];break;case 3:p=[Lt,$t,Re],J=p[0],N=p[1],st=p[2];break;case 4:y=[$e,Lt,Re],J=y[0],N=y[1],st=y[2];break;case 5:b=[Re,Lt,$t],J=b[0],N=b[1],st=b[2];break}}return[J,N,st,m.length>3?m[3]:1]},Xt=ao,lo=I.unpack,uo=I.type,Bs=ht,Ni=_,Bt=X,Mn=oo;Ni.prototype.hcg=function(){return Mn(this._rgb)},Bs.hcg=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(Ni,[null].concat(r,["hcg"])))},Bt.format.hcg=Xt,Bt.autodetect.push({p:1,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=lo(r,"hcg"),uo(r)==="array"&&r.length===3)return"hcg"}});var Ko=I.unpack,mt=I.last,Te=Math.round,un=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=Ko(r,"rgba"),p=h[0],y=h[1],b=h[2],m=h[3],x=mt(r)||"auto";m===void 0&&(m=1),x==="auto"&&(x=m<1?"rgba":"rgb"),p=Te(p),y=Te(y),b=Te(b);var S=p<<16|y<<8|b,B="000000"+S.toString(16);B=B.substr(B.length-6);var E="0"+Te(m*255).toString(16);switch(E=E.substr(E.length-2),x.toLowerCase()){case"rgba":return"#"+B+E;case"argb":return"#"+E+B;default:return"#"+B}},mi=un,yi=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Vn=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,xe=function(r){if(r.match(yi)){(r.length===4||r.length===7)&&(r=r.substr(1)),r.length===3&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var u=parseInt(r,16),h=u>>16,p=u>>8&255,y=u&255;return[h,p,y,1]}if(r.match(Vn)){(r.length===5||r.length===9)&&(r=r.substr(1)),r.length===4&&(r=r.split(""),r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]);var b=parseInt(r,16),m=b>>24&255,x=b>>16&255,S=b>>8&255,B=Math.round((b&255)/255*100)/100;return[m,x,S,B]}throw new Error("unknown hex color: "+r)},me=xe,hn=ht,qe=_,tr=I.type,ji=X,he=mi;qe.prototype.hex=function(r){return he(this._rgb,r)},hn.hex=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(qe,[null].concat(r,["hex"])))},ji.format.hex=me,ji.autodetect.push({p:4,test:function(r){for(var u=[],h=arguments.length-1;h-- >0;)u[h]=arguments[h+1];if(!u.length&&tr(r)==="string"&&[3,4,5,6,7,8,9].indexOf(r.length)>=0)return"hex"}});var yn=I.unpack,Qt=I.TWOPI,er=Math.min,Rn=Math.sqrt,Un=Math.acos,ho=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=yn(r,"rgb"),p=h[0],y=h[1],b=h[2];p/=255,y/=255,b/=255;var m,x=er(p,y,b),S=(p+y+b)/3,B=S>0?1-x/S:0;return B===0?m=NaN:(m=(p-y+(p-b))/2,m/=Rn((p-y)*(p-y)+(p-b)*(y-b)),m=Un(m),b>y&&(m=Qt-m),m/=Qt),[m*360,B,S]},vi=ho,nr=I.unpack,_i=I.limit,Jn=I.TWOPI,Ls=I.PITHIRD,bi=Math.cos,Ze=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];r=nr(r,"hsi");var h=r[0],p=r[1],y=r[2],b,m,x;return isNaN(h)&&(h=0),isNaN(p)&&(p=0),h>360&&(h-=360),h<0&&(h+=360),h/=360,h<1/3?(x=(1-p)/3,b=(1+p*bi(Jn*h)/bi(Ls-Jn*h))/3,m=1-(x+b)):h<2/3?(h-=1/3,b=(1-p)/3,m=(1+p*bi(Jn*h)/bi(Ls-Jn*h))/3,x=1-(b+m)):(h-=2/3,m=(1-p)/3,x=(1+p*bi(Jn*h)/bi(Ls-Jn*h))/3,b=1-(m+x)),b=_i(y*b*3),m=_i(y*m*3),x=_i(y*x*3),[b*255,m*255,x*255,r.length>3?r[3]:1]},cn=Ze,wi=I.unpack,Ms=I.type,Ds=ht,co=_,ir=X,Dn=vi;co.prototype.hsi=function(){return Dn(this._rgb)},Ds.hsi=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(co,[null].concat(r,["hsi"])))},ir.format.hsi=cn,ir.autodetect.push({p:2,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=wi(r,"hsi"),Ms(r)==="array"&&r.length===3)return"hsi"}});var Ie=I.unpack,ce=I.type,Zn=ht,$n=_,po=X,sr=_o;$n.prototype.hsl=function(){return sr(this._rgb)},Zn.hsl=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply($n,[null].concat(r,["hsl"])))},po.format.hsl=Xo,po.autodetect.push({p:2,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=Ie(r,"hsl"),ce(r)==="array"&&r.length===3)return"hsl"}});var Hi=I.unpack,ft=Math.min,Gr=Math.max,Gi=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];r=Hi(r,"rgb");var h=r[0],p=r[1],y=r[2],b=ft(h,p,y),m=Gr(h,p,y),x=m-b,S,B,E;return E=m/255,m===0?(S=Number.NaN,B=0):(B=x/m,h===m&&(S=(p-y)/x),p===m&&(S=2+(y-h)/x),y===m&&(S=4+(h-p)/x),S*=60,S<0&&(S+=360)),[S,B,E]},or=Gi,Xr=I.unpack,St=Math.floor,Yt=function(){for(var r,u,h,p,y,b,m=[],x=arguments.length;x--;)m[x]=arguments[x];m=Xr(m,"hsv");var S=m[0],B=m[1],E=m[2],J,N,st;if(E*=255,B===0)J=N=st=E;else{S===360&&(S=0),S>360&&(S-=360),S<0&&(S+=360),S/=60;var nt=St(S),vt=S-nt,Ot=E*(1-B),Lt=E*(1-B*vt),$t=E*(1-B*(1-vt));switch(nt){case 0:r=[E,$t,Ot],J=r[0],N=r[1],st=r[2];break;case 1:u=[Lt,E,Ot],J=u[0],N=u[1],st=u[2];break;case 2:h=[Ot,E,$t],J=h[0],N=h[1],st=h[2];break;case 3:p=[Ot,Lt,E],J=p[0],N=p[1],st=p[2];break;case 4:y=[$t,Ot,E],J=y[0],N=y[1],st=y[2];break;case 5:b=[E,Ot,Lt],J=b[0],N=b[1],st=b[2];break}}return[J,N,st,m.length>3?m[3]:1]},$s=Yt,rr=I.unpack,Yr=I.type,fo=ht,vn=_,bn=X,Pi=or;vn.prototype.hsv=function(){return Pi(this._rgb)},fo.hsv=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(vn,[null].concat(r,["hsv"])))},bn.format.hsv=$s,bn.autodetect.push({p:2,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=rr(r,"hsv"),Yr(r)==="array"&&r.length===3)return"hsv"}});var ks={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},kn=ks,Xi=I.unpack,xi=Math.pow,Yi=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=Xi(r,"rgb"),p=h[0],y=h[1],b=h[2],m=pe(p,y,b),x=m[0],S=m[1],B=m[2],E=116*S-16;return[E<0?0:E,500*(x-S),200*(S-B)]},qi=function(r){return(r/=255)<=.04045?r/12.92:xi((r+.055)/1.055,2.4)},Vi=function(r){return r>kn.t3?xi(r,1/3):r/kn.t2+kn.t0},pe=function(r,u,h){r=qi(r),u=qi(u),h=qi(h);var p=Vi((.4124564*r+.3575761*u+.1804375*h)/kn.Xn),y=Vi((.2126729*r+.7151522*u+.072175*h)/kn.Yn),b=Vi((.0193339*r+.119192*u+.9503041*h)/kn.Zn);return[p,y,b]},zs=Yi,be=ks,Qn=I.unpack,ar=Math.pow,Se=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];r=Qn(r,"lab");var h=r[0],p=r[1],y=r[2],b,m,x,S,B,E;return m=(h+16)/116,b=isNaN(p)?m:m+p/500,x=isNaN(y)?m:m-y/200,m=be.Yn*Si(m),b=be.Xn*Si(b),x=be.Zn*Si(x),S=Ui(3.2404542*b-1.5371385*m-.4985314*x),B=Ui(-.969266*b+1.8760108*m+.041556*x),E=Ui(.0556434*b-.2040259*m+1.0572252*x),[S,B,E,r.length>3?r[3]:1]},Ui=function(r){return 255*(r<=.00304?12.92*r:1.055*ar(r,1/2.4)-.055)},Si=function(r){return r>be.t1?r*r*r:be.t2*(r-be.t0)},go=Se,lr=I.unpack,mo=I.type,An=ht,zn=_,yo=X,Ct=zs;zn.prototype.lab=function(){return Ct(this._rgb)},An.lab=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(zn,[null].concat(r,["lab"])))},yo.format.lab=go,yo.autodetect.push({p:2,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=lr(r,"lab"),mo(r)==="array"&&r.length===3)return"lab"}});var qr=I.unpack,Es=I.RAD2DEG,vo=Math.sqrt,ur=Math.atan2,hr=Math.round,Oi=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=qr(r,"lab"),p=h[0],y=h[1],b=h[2],m=vo(y*y+b*b),x=(ur(b,y)*Es+360)%360;return hr(m*1e4)===0&&(x=Number.NaN),[p,m,x]},bo=Oi,cr=I.unpack,Ji=zs,Be=bo,Ri=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=cr(r,"rgb"),p=h[0],y=h[1],b=h[2],m=Ji(p,y,b),x=m[0],S=m[1],B=m[2];return Be(x,S,B)},wo=Ri,Po=I.unpack,Zi=I.DEG2RAD,pr=Math.sin,xo=Math.cos,fr=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=Po(r,"lch"),p=h[0],y=h[1],b=h[2];return isNaN(b)&&(b=0),b=b*Zi,[p,xo(b)*y,pr(b)*y]},Le=fr,Fs=I.unpack,Me=Le,Qi=go,Qe=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];r=Fs(r,"lch");var h=r[0],p=r[1],y=r[2],b=Me(h,p,y),m=b[0],x=b[1],S=b[2],B=Qi(m,x,S),E=B[0],J=B[1],N=B[2];return[E,J,N,r.length>3?r[3]:1]},So=Qe,Vr=I.unpack,Ur=So,Jr=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=Vr(r,"hcl").reverse();return Ur.apply(void 0,h)},ul=Jr,Zr=I.unpack,f=I.type,T=ht,it=_,jt=X,qt=wo;it.prototype.lch=function(){return qt(this._rgb)},it.prototype.hcl=function(){return qt(this._rgb).reverse()},T.lch=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(it,[null].concat(r,["lch"])))},T.hcl=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(it,[null].concat(r,["hcl"])))},jt.format.lch=So,jt.format.hcl=ul,["lch","hcl"].forEach(function(r){return jt.autodetect.push({p:2,test:function(){for(var u=[],h=arguments.length;h--;)u[h]=arguments[h];if(u=Zr(u,r),f(u)==="array"&&u.length===3)return r}})});var Ft={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},De=Ft,Kt=_,dr=X,Nu=I.type,Oo=De,ju=me,_u=mi;Kt.prototype.name=function(){for(var r=_u(this._rgb,"rgb"),u=0,h=Object.keys(Oo);u<h.length;u+=1){var p=h[u];if(Oo[p]===r)return p.toLowerCase()}return r},dr.format.named=function(r){if(r=r.toLowerCase(),Oo[r])return ju(Oo[r]);throw new Error("unknown color name: "+r)},dr.autodetect.push({p:5,test:function(r){for(var u=[],h=arguments.length-1;h-- >0;)u[h]=arguments[h+1];if(!u.length&&Nu(r)==="string"&&Oo[r.toLowerCase()])return"named"}});var Hu=I.unpack,Gu=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=Hu(r,"rgb"),p=h[0],y=h[1],b=h[2];return(p<<16)+(y<<8)+b},Xu=Gu,Yu=I.type,qu=function(r){if(Yu(r)=="number"&&r>=0&&r<=16777215){var u=r>>16,h=r>>8&255,p=r&255;return[u,h,p,1]}throw new Error("unknown num color: "+r)},Vu=qu,Uu=ht,hl=_,cl=X,Ju=I.type,Zu=Xu;hl.prototype.num=function(){return Zu(this._rgb)},Uu.num=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(hl,[null].concat(r,["num"])))},cl.format.num=Vu,cl.autodetect.push({p:5,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r.length===1&&Ju(r[0])==="number"&&r[0]>=0&&r[0]<=16777215)return"num"}});var Qu=ht,Qr=_,pl=X,fl=I.unpack,dl=I.type,gl=Math.round;Qr.prototype.rgb=function(r){return r===void 0&&(r=!0),r===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(gl)},Qr.prototype.rgba=function(r){return r===void 0&&(r=!0),this._rgb.slice(0,4).map(function(u,h){return h<3?r===!1?u:gl(u):u})},Qu.rgb=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(Qr,[null].concat(r,["rgb"])))},pl.format.rgb=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=fl(r,"rgba");return h[3]===void 0&&(h[3]=1),h},pl.autodetect.push({p:3,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=fl(r,"rgba"),dl(r)==="array"&&(r.length===3||r.length===4&&dl(r[3])=="number"&&r[3]>=0&&r[3]<=1))return"rgb"}});var gr=Math.log,Ku=function(r){var u=r/100,h,p,y;return u<66?(h=255,p=u<6?0:-155.25485562709179-.44596950469579133*(p=u-2)+104.49216199393888*gr(p),y=u<20?0:-254.76935184120902+.8274096064007395*(y=u-10)+115.67994401066147*gr(y)):(h=351.97690566805693+.114206453784165*(h=u-55)-40.25366309332127*gr(h),p=325.4494125711974+.07943456536662342*(p=u-50)-28.0852963507957*gr(p),y=255),[h,p,y,1]},ml=Ku,th=ml,eh=I.unpack,nh=Math.round,ih=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];for(var h=eh(r,"rgb"),p=h[0],y=h[2],b=1e3,m=4e4,x=.4,S;m-b>x;){S=(m+b)*.5;var B=th(S);B[2]/B[0]>=y/p?m=S:b=S}return nh(S)},sh=ih,Kr=ht,mr=_,ta=X,oh=sh;mr.prototype.temp=mr.prototype.kelvin=mr.prototype.temperature=function(){return oh(this._rgb)},Kr.temp=Kr.kelvin=Kr.temperature=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(mr,[null].concat(r,["temp"])))},ta.format.temp=ta.format.kelvin=ta.format.temperature=ml;var rh=I.unpack,ea=Math.cbrt,ah=Math.pow,lh=Math.sign,uh=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=rh(r,"rgb"),p=h[0],y=h[1],b=h[2],m=[na(p/255),na(y/255),na(b/255)],x=m[0],S=m[1],B=m[2],E=ea(.4122214708*x+.5363325363*S+.0514459929*B),J=ea(.2119034982*x+.6806995451*S+.1073969566*B),N=ea(.0883024619*x+.2817188376*S+.6299787005*B);return[.2104542553*E+.793617785*J-.0040720468*N,1.9779984951*E-2.428592205*J+.4505937099*N,.0259040371*E+.7827717662*J-.808675766*N]},yl=uh;function na(r){var u=Math.abs(r);return u<.04045?r/12.92:(lh(r)||1)*ah((u+.055)/1.055,2.4)}var hh=I.unpack,yr=Math.pow,ch=Math.sign,ph=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];r=hh(r,"lab");var h=r[0],p=r[1],y=r[2],b=yr(h+.3963377774*p+.2158037573*y,3),m=yr(h-.1055613458*p-.0638541728*y,3),x=yr(h-.0894841775*p-1.291485548*y,3);return[255*ia(4.0767416621*b-3.3077115913*m+.2309699292*x),255*ia(-1.2684380046*b+2.6097574011*m-.3413193965*x),255*ia(-.0041960863*b-.7034186147*m+1.707614701*x),r.length>3?r[3]:1]},vl=ph;function ia(r){var u=Math.abs(r);return u>.0031308?(ch(r)||1)*(1.055*yr(u,1/2.4)-.055):r*12.92}var fh=I.unpack,dh=I.type,gh=ht,bl=_,wl=X,mh=yl;bl.prototype.oklab=function(){return mh(this._rgb)},gh.oklab=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(bl,[null].concat(r,["oklab"])))},wl.format.oklab=vl,wl.autodetect.push({p:3,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=fh(r,"oklab"),dh(r)==="array"&&r.length===3)return"oklab"}});var yh=I.unpack,vh=yl,bh=bo,wh=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];var h=yh(r,"rgb"),p=h[0],y=h[1],b=h[2],m=vh(p,y,b),x=m[0],S=m[1],B=m[2];return bh(x,S,B)},Ph=wh,xh=I.unpack,Sh=Le,Oh=vl,Rh=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];r=xh(r,"lch");var h=r[0],p=r[1],y=r[2],b=Sh(h,p,y),m=b[0],x=b[1],S=b[2],B=Oh(m,x,S),E=B[0],J=B[1],N=B[2];return[E,J,N,r.length>3?r[3]:1]},Ah=Rh,Ch=I.unpack,Th=I.type,Ih=ht,Pl=_,xl=X,Bh=Ph;Pl.prototype.oklch=function(){return Bh(this._rgb)},Ih.oklch=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];return new(Function.prototype.bind.apply(Pl,[null].concat(r,["oklch"])))},xl.format.oklch=Ah,xl.autodetect.push({p:3,test:function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];if(r=Ch(r,"oklch"),Th(r)==="array"&&r.length===3)return"oklch"}});var Sl=_,Lh=I.type;Sl.prototype.alpha=function(r,u){return u===void 0&&(u=!1),r!==void 0&&Lh(r)==="number"?u?(this._rgb[3]=r,this):new Sl([this._rgb[0],this._rgb[1],this._rgb[2],r],"rgb"):this._rgb[3]};var Mh=_;Mh.prototype.clipped=function(){return this._rgb._clipped||!1};var Ki=_,Dh=ks;Ki.prototype.darken=function(r){r===void 0&&(r=1);var u=this,h=u.lab();return h[0]-=Dh.Kn*r,new Ki(h,"lab").alpha(u.alpha(),!0)},Ki.prototype.brighten=function(r){return r===void 0&&(r=1),this.darken(-r)},Ki.prototype.darker=Ki.prototype.darken,Ki.prototype.brighter=Ki.prototype.brighten;var $h=_;$h.prototype.get=function(r){var u=r.split("."),h=u[0],p=u[1],y=this[h]();if(p){var b=h.indexOf(p)-(h.substr(0,2)==="ok"?2:0);if(b>-1)return y[b];throw new Error("unknown channel "+p+" in mode "+h)}else return y};var Ws=_,kh=I.type,zh=Math.pow,Eh=1e-7,Fh=20;Ws.prototype.luminance=function(r){if(r!==void 0&&kh(r)==="number"){if(r===0)return new Ws([0,0,0,this._rgb[3]],"rgb");if(r===1)return new Ws([255,255,255,this._rgb[3]],"rgb");var u=this.luminance(),h="rgb",p=Fh,y=function(m,x){var S=m.interpolate(x,.5,h),B=S.luminance();return Math.abs(r-B)<Eh||!p--?S:B>r?y(m,S):y(S,x)},b=(u>r?y(new Ws([0,0,0]),this):y(this,new Ws([255,255,255]))).rgb();return new Ws(b.concat([this._rgb[3]]))}return Wh.apply(void 0,this._rgb.slice(0,3))};var Wh=function(r,u,h){return r=sa(r),u=sa(u),h=sa(h),.2126*r+.7152*u+.0722*h},sa=function(r){return r/=255,r<=.03928?r/12.92:zh((r+.055)/1.055,2.4)},pn={},Ol=_,Rl=I.type,vr=pn,Al=function(r,u,h){h===void 0&&(h=.5);for(var p=[],y=arguments.length-3;y-- >0;)p[y]=arguments[y+3];var b=p[0]||"lrgb";if(!vr[b]&&!p.length&&(b=Object.keys(vr)[0]),!vr[b])throw new Error("interpolation mode "+b+" is not defined");return Rl(r)!=="object"&&(r=new Ol(r)),Rl(u)!=="object"&&(u=new Ol(u)),vr[b](r,u,h).alpha(r.alpha()+h*(u.alpha()-r.alpha()))},Cl=_,Nh=Al;Cl.prototype.mix=Cl.prototype.interpolate=function(r,u){u===void 0&&(u=.5);for(var h=[],p=arguments.length-2;p-- >0;)h[p]=arguments[p+2];return Nh.apply(void 0,[this,r,u].concat(h))};var Tl=_;Tl.prototype.premultiply=function(r){r===void 0&&(r=!1);var u=this._rgb,h=u[3];return r?(this._rgb=[u[0]*h,u[1]*h,u[2]*h,h],this):new Tl([u[0]*h,u[1]*h,u[2]*h,h],"rgb")};var oa=_,jh=ks;oa.prototype.saturate=function(r){r===void 0&&(r=1);var u=this,h=u.lch();return h[1]+=jh.Kn*r,h[1]<0&&(h[1]=0),new oa(h,"lch").alpha(u.alpha(),!0)},oa.prototype.desaturate=function(r){return r===void 0&&(r=1),this.saturate(-r)};var Il=_,Bl=I.type;Il.prototype.set=function(r,u,h){h===void 0&&(h=!1);var p=r.split("."),y=p[0],b=p[1],m=this[y]();if(b){var x=y.indexOf(b)-(y.substr(0,2)==="ok"?2:0);if(x>-1){if(Bl(u)=="string")switch(u.charAt(0)){case"+":m[x]+=+u;break;case"-":m[x]+=+u;break;case"*":m[x]*=+u.substr(1);break;case"/":m[x]/=+u.substr(1);break;default:m[x]=+u}else if(Bl(u)==="number")m[x]=u;else throw new Error("unsupported value for Color.set");var S=new Il(m,y);return h?(this._rgb=S._rgb,this):S}throw new Error("unknown channel "+b+" in mode "+y)}else return m};var _h=_,Hh=function(r,u,h){var p=r._rgb,y=u._rgb;return new _h(p[0]+h*(y[0]-p[0]),p[1]+h*(y[1]-p[1]),p[2]+h*(y[2]-p[2]),"rgb")};pn.rgb=Hh;var Gh=_,ra=Math.sqrt,Ns=Math.pow,Xh=function(r,u,h){var p=r._rgb,y=p[0],b=p[1],m=p[2],x=u._rgb,S=x[0],B=x[1],E=x[2];return new Gh(ra(Ns(y,2)*(1-h)+Ns(S,2)*h),ra(Ns(b,2)*(1-h)+Ns(B,2)*h),ra(Ns(m,2)*(1-h)+Ns(E,2)*h),"rgb")};pn.lrgb=Xh;var Yh=_,qh=function(r,u,h){var p=r.lab(),y=u.lab();return new Yh(p[0]+h*(y[0]-p[0]),p[1]+h*(y[1]-p[1]),p[2]+h*(y[2]-p[2]),"lab")};pn.lab=qh;var Ll=_,js=function(r,u,h,p){var y,b,m,x;p==="hsl"?(m=r.hsl(),x=u.hsl()):p==="hsv"?(m=r.hsv(),x=u.hsv()):p==="hcg"?(m=r.hcg(),x=u.hcg()):p==="hsi"?(m=r.hsi(),x=u.hsi()):p==="lch"||p==="hcl"?(p="hcl",m=r.hcl(),x=u.hcl()):p==="oklch"&&(m=r.oklch().reverse(),x=u.oklch().reverse());var S,B,E,J,N,st;(p.substr(0,1)==="h"||p==="oklch")&&(y=m,S=y[0],E=y[1],N=y[2],b=x,B=b[0],J=b[1],st=b[2]);var nt,vt,Ot,Lt;return!isNaN(S)&&!isNaN(B)?(B>S&&B-S>180?Lt=B-(S+360):B<S&&S-B>180?Lt=B+360-S:Lt=B-S,vt=S+h*Lt):isNaN(S)?isNaN(B)?vt=Number.NaN:(vt=B,(N==1||N==0)&&p!="hsv"&&(nt=J)):(vt=S,(st==1||st==0)&&p!="hsv"&&(nt=E)),nt===void 0&&(nt=E+h*(J-E)),Ot=N+h*(st-N),p==="oklch"?new Ll([Ot,nt,vt],p):new Ll([vt,nt,Ot],p)},Vh=js,Ml=function(r,u,h){return Vh(r,u,h,"lch")};pn.lch=Ml,pn.hcl=Ml;var Uh=_,Jh=function(r,u,h){var p=r.num(),y=u.num();return new Uh(p+h*(y-p),"num")};pn.num=Jh;var Zh=js,Qh=function(r,u,h){return Zh(r,u,h,"hcg")};pn.hcg=Qh;var Kh=js,tc=function(r,u,h){return Kh(r,u,h,"hsi")};pn.hsi=tc;var ec=js,nc=function(r,u,h){return ec(r,u,h,"hsl")};pn.hsl=nc;var ic=js,sc=function(r,u,h){return ic(r,u,h,"hsv")};pn.hsv=sc;var oc=_,rc=function(r,u,h){var p=r.oklab(),y=u.oklab();return new oc(p[0]+h*(y[0]-p[0]),p[1]+h*(y[1]-p[1]),p[2]+h*(y[2]-p[2]),"oklab")};pn.oklab=rc;var ac=js,lc=function(r,u,h){return ac(r,u,h,"oklch")};pn.oklch=lc;var aa=_,uc=I.clip_rgb,la=Math.pow,ua=Math.sqrt,ha=Math.PI,Dl=Math.cos,$l=Math.sin,hc=Math.atan2,cc=function(r,u,h){u===void 0&&(u="lrgb"),h===void 0&&(h=null);var p=r.length;h||(h=Array.from(new Array(p)).map(function(){return 1}));var y=p/h.reduce(function(vt,Ot){return vt+Ot});if(h.forEach(function(vt,Ot){h[Ot]*=y}),r=r.map(function(vt){return new aa(vt)}),u==="lrgb")return pc(r,h);for(var b=r.shift(),m=b.get(u),x=[],S=0,B=0,E=0;E<m.length;E++)if(m[E]=(m[E]||0)*h[0],x.push(isNaN(m[E])?0:h[0]),u.charAt(E)==="h"&&!isNaN(m[E])){var J=m[E]/180*ha;S+=Dl(J)*h[0],B+=$l(J)*h[0]}var N=b.alpha()*h[0];r.forEach(function(vt,Ot){var Lt=vt.get(u);N+=vt.alpha()*h[Ot+1];for(var $t=0;$t<m.length;$t++)if(!isNaN(Lt[$t]))if(x[$t]+=h[Ot+1],u.charAt($t)==="h"){var $e=Lt[$t]/180*ha;S+=Dl($e)*h[Ot+1],B+=$l($e)*h[Ot+1]}else m[$t]+=Lt[$t]*h[Ot+1]});for(var st=0;st<m.length;st++)if(u.charAt(st)==="h"){for(var nt=hc(B/x[st],S/x[st])/ha*180;nt<0;)nt+=360;for(;nt>=360;)nt-=360;m[st]=nt}else m[st]=m[st]/x[st];return N/=p,new aa(m,u).alpha(N>.99999?1:N,!0)},pc=function(r,u){for(var h=r.length,p=[0,0,0,0],y=0;y<r.length;y++){var b=r[y],m=u[y]/h,x=b._rgb;p[0]+=la(x[0],2)*m,p[1]+=la(x[1],2)*m,p[2]+=la(x[2],2)*m,p[3]+=x[3]*m}return p[0]=ua(p[0]),p[1]=ua(p[1]),p[2]=ua(p[2]),p[3]>.9999999&&(p[3]=1),new aa(uc(p))},Cn=ht,_s=I.type,fc=Math.pow,ca=function(r){var u="rgb",h=Cn("#ccc"),p=0,y=[0,1],b=[],m=[0,0],x=!1,S=[],B=!1,E=0,J=1,N=!1,st={},nt=!0,vt=1,Ot=function(j){if(j=j||["#fff","#000"],j&&_s(j)==="string"&&Cn.brewer&&Cn.brewer[j.toLowerCase()]&&(j=Cn.brewer[j.toLowerCase()]),_s(j)==="array"){j.length===1&&(j=[j[0],j[0]]),j=j.slice(0);for(var dt=0;dt<j.length;dt++)j[dt]=Cn(j[dt]);b.length=0;for(var wt=0;wt<j.length;wt++)b.push(wt/(j.length-1))}return Ke(),S=j},Lt=function(j){if(x!=null){for(var dt=x.length-1,wt=0;wt<dt&&j>=x[wt];)wt++;return wt-1}return 0},$t=function(j){return j},$e=function(j){return j},Re=function(j,dt){var wt,bt;if(dt==null&&(dt=!1),isNaN(j)||j===null)return h;if(dt)bt=j;else if(x&&x.length>2){var ke=Lt(j);bt=ke/(x.length-2)}else J!==E?bt=(j-E)/(J-E):bt=1;bt=$e(bt),dt||(bt=$t(bt)),vt!==1&&(bt=fc(bt,vt)),bt=m[0]+bt*(1-m[0]-m[1]),bt=Math.min(1,Math.max(0,bt));var Vt=Math.floor(bt*1e4);if(nt&&st[Vt])wt=st[Vt];else{if(_s(S)==="array")for(var Mt=0;Mt<b.length;Mt++){var kt=b[Mt];if(bt<=kt){wt=S[Mt];break}if(bt>=kt&&Mt===b.length-1){wt=S[Mt];break}if(bt>kt&&bt<b[Mt+1]){bt=(bt-kt)/(b[Mt+1]-kt),wt=Cn.interpolate(S[Mt],S[Mt+1],bt,u);break}}else _s(S)==="function"&&(wt=S(bt));nt&&(st[Vt]=wt)}return wt},Ke=function(){return st={}};Ot(r);var Tt=function(j){var dt=Cn(Re(j));return B&&dt[B]?dt[B]():dt};return Tt.classes=function(j){if(j!=null){if(_s(j)==="array")x=j,y=[j[0],j[j.length-1]];else{var dt=Cn.analyze(y);j===0?x=[dt.min,dt.max]:x=Cn.limits(dt,"e",j)}return Tt}return x},Tt.domain=function(j){if(!arguments.length)return y;E=j[0],J=j[j.length-1],b=[];var dt=S.length;if(j.length===dt&&E!==J)for(var wt=0,bt=Array.from(j);wt<bt.length;wt+=1){var ke=bt[wt];b.push((ke-E)/(J-E))}else{for(var Vt=0;Vt<dt;Vt++)b.push(Vt/(dt-1));if(j.length>2){var Mt=j.map(function(zt,Wt){return Wt/(j.length-1)}),kt=j.map(function(zt){return(zt-E)/(J-E)});kt.every(function(zt,Wt){return Mt[Wt]===zt})||($e=function(zt){if(zt<=0||zt>=1)return zt;for(var Wt=0;zt>=kt[Wt+1];)Wt++;var In=(zt-kt[Wt])/(kt[Wt+1]-kt[Wt]),Ti=Mt[Wt]+In*(Mt[Wt+1]-Mt[Wt]);return Ti})}}return y=[E,J],Tt},Tt.mode=function(j){return arguments.length?(u=j,Ke(),Tt):u},Tt.range=function(j,dt){return Ot(j),Tt},Tt.out=function(j){return B=j,Tt},Tt.spread=function(j){return arguments.length?(p=j,Tt):p},Tt.correctLightness=function(j){return j==null&&(j=!0),N=j,Ke(),N?$t=function(dt){for(var wt=Re(0,!0).lab()[0],bt=Re(1,!0).lab()[0],ke=wt>bt,Vt=Re(dt,!0).lab()[0],Mt=wt+(bt-wt)*dt,kt=Vt-Mt,zt=0,Wt=1,In=20;Math.abs(kt)>.01&&In-- >0;)(function(){return ke&&(kt*=-1),kt<0?(zt=dt,dt+=(Wt-dt)*.5):(Wt=dt,dt+=(zt-dt)*.5),Vt=Re(dt,!0).lab()[0],kt=Vt-Mt})();return dt}:$t=function(dt){return dt},Tt},Tt.padding=function(j){return j!=null?(_s(j)==="number"&&(j=[j,j]),m=j,Tt):m},Tt.colors=function(j,dt){arguments.length<2&&(dt="hex");var wt=[];if(arguments.length===0)wt=S.slice(0);else if(j===1)wt=[Tt(.5)];else if(j>1){var bt=y[0],ke=y[1]-bt;wt=dc(0,j,!1).map(function(Wt){return Tt(bt+Wt/(j-1)*ke)})}else{r=[];var Vt=[];if(x&&x.length>2)for(var Mt=1,kt=x.length,zt=1<=kt;zt?Mt<kt:Mt>kt;zt?Mt++:Mt--)Vt.push((x[Mt-1]+x[Mt])*.5);else Vt=y;wt=Vt.map(function(Wt){return Tt(Wt)})}return Cn[dt]&&(wt=wt.map(function(Wt){return Wt[dt]()})),wt},Tt.cache=function(j){return j!=null?(nt=j,Tt):nt},Tt.gamma=function(j){return j!=null?(vt=j,Tt):vt},Tt.nodata=function(j){return j!=null?(h=Cn(j),Tt):h},Tt};function dc(r,u,h){for(var p=[],y=r<u,b=h?y?u+1:u-1:u,m=r;y?m<b:m>b;y?m++:m--)p.push(m);return p}var Ro=_,gc=ca,mc=function(r){for(var u=[1,1],h=1;h<r;h++){for(var p=[1],y=1;y<=u.length;y++)p[y]=(u[y]||0)+u[y-1];u=p}return u},yc=function(r){var u,h,p,y,b,m,x;if(r=r.map(function(N){return new Ro(N)}),r.length===2)u=r.map(function(N){return N.lab()}),b=u[0],m=u[1],y=function(N){var st=[0,1,2].map(function(nt){return b[nt]+N*(m[nt]-b[nt])});return new Ro(st,"lab")};else if(r.length===3)h=r.map(function(N){return N.lab()}),b=h[0],m=h[1],x=h[2],y=function(N){var st=[0,1,2].map(function(nt){return(1-N)*(1-N)*b[nt]+2*(1-N)*N*m[nt]+N*N*x[nt]});return new Ro(st,"lab")};else if(r.length===4){var S;p=r.map(function(N){return N.lab()}),b=p[0],m=p[1],x=p[2],S=p[3],y=function(N){var st=[0,1,2].map(function(nt){return(1-N)*(1-N)*(1-N)*b[nt]+3*(1-N)*(1-N)*N*m[nt]+3*(1-N)*N*N*x[nt]+N*N*N*S[nt]});return new Ro(st,"lab")}}else if(r.length>=5){var B,E,J;B=r.map(function(N){return N.lab()}),J=r.length-1,E=mc(J),y=function(N){var st=1-N,nt=[0,1,2].map(function(vt){return B.reduce(function(Ot,Lt,$t){return Ot+E[$t]*Math.pow(st,J-$t)*Math.pow(N,$t)*Lt[vt]},0)});return new Ro(nt,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return y},vc=function(r){var u=yc(r);return u.scale=function(){return gc(u)},u},pa=ht,Tn=function(r,u,h){if(!Tn[h])throw new Error("unknown blend mode "+h);return Tn[h](r,u)},Ai=function(r){return function(u,h){var p=pa(h).rgb(),y=pa(u).rgb();return pa.rgb(r(p,y))}},Ci=function(r){return function(u,h){var p=[];return p[0]=r(u[0],h[0]),p[1]=r(u[1],h[1]),p[2]=r(u[2],h[2]),p}},bc=function(r){return r},wc=function(r,u){return r*u/255},Pc=function(r,u){return r>u?u:r},xc=function(r,u){return r>u?r:u},Sc=function(r,u){return 255*(1-(1-r/255)*(1-u/255))},Oc=function(r,u){return u<128?2*r*u/255:255*(1-2*(1-r/255)*(1-u/255))},Rc=function(r,u){return 255*(1-(1-u/255)/(r/255))},Ac=function(r,u){return r===255?255:(r=255*(u/255)/(1-r/255),r>255?255:r)};Tn.normal=Ai(Ci(bc)),Tn.multiply=Ai(Ci(wc)),Tn.screen=Ai(Ci(Sc)),Tn.overlay=Ai(Ci(Oc)),Tn.darken=Ai(Ci(Pc)),Tn.lighten=Ai(Ci(xc)),Tn.dodge=Ai(Ci(Ac)),Tn.burn=Ai(Ci(Rc));for(var Cc=Tn,fa=I.type,Tc=I.clip_rgb,Ic=I.TWOPI,Bc=Math.pow,Lc=Math.sin,Mc=Math.cos,kl=ht,Dc=function(r,u,h,p,y){r===void 0&&(r=300),u===void 0&&(u=-1.5),h===void 0&&(h=1),p===void 0&&(p=1),y===void 0&&(y=[0,1]);var b=0,m;fa(y)==="array"?m=y[1]-y[0]:(m=0,y=[y,y]);var x=function(S){var B=Ic*((r+120)/360+u*S),E=Bc(y[0]+m*S,p),J=b!==0?h[0]+S*b:h,N=J*E*(1-E)/2,st=Mc(B),nt=Lc(B),vt=E+N*(-.14861*st+1.78277*nt),Ot=E+N*(-.29227*st-.90649*nt),Lt=E+N*(1.97294*st);return kl(Tc([vt*255,Ot*255,Lt*255,1]))};return x.start=function(S){return S==null?r:(r=S,x)},x.rotations=function(S){return S==null?u:(u=S,x)},x.gamma=function(S){return S==null?p:(p=S,x)},x.hue=function(S){return S==null?h:(h=S,fa(h)==="array"?(b=h[1]-h[0],b===0&&(h=h[1])):b=0,x)},x.lightness=function(S){return S==null?y:(fa(S)==="array"?(y=S,m=S[1]-S[0]):(y=[S,S],m=0),x)},x.scale=function(){return kl.scale(x)},x.hue(h),x},$c=_,kc="0123456789abcdef",zc=Math.floor,Ec=Math.random,Fc=function(){for(var r="#",u=0;u<6;u++)r+=kc.charAt(zc(Ec()*16));return new $c(r,"hex")},da=v,zl=Math.log,Wc=Math.pow,Nc=Math.floor,jc=Math.abs,El=function(r,u){u===void 0&&(u=null);var h={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return da(r)==="object"&&(r=Object.values(r)),r.forEach(function(p){u&&da(p)==="object"&&(p=p[u]),p!=null&&!isNaN(p)&&(h.values.push(p),h.sum+=p,p<h.min&&(h.min=p),p>h.max&&(h.max=p),h.count+=1)}),h.domain=[h.min,h.max],h.limits=function(p,y){return Fl(h,p,y)},h},Fl=function(r,u,h){u===void 0&&(u="equal"),h===void 0&&(h=7),da(r)=="array"&&(r=El(r));var p=r.min,y=r.max,b=r.values.sort(function(ma,ya){return ma-ya});if(h===1)return[p,y];var m=[];if(u.substr(0,1)==="c"&&(m.push(p),m.push(y)),u.substr(0,1)==="e"){m.push(p);for(var x=1;x<h;x++)m.push(p+x/h*(y-p));m.push(y)}else if(u.substr(0,1)==="l"){if(p<=0)throw new Error("Logarithmic scales are only possible for values > 0");var S=Math.LOG10E*zl(p),B=Math.LOG10E*zl(y);m.push(p);for(var E=1;E<h;E++)m.push(Wc(10,S+E/h*(B-S)));m.push(y)}else if(u.substr(0,1)==="q"){m.push(p);for(var J=1;J<h;J++){var N=(b.length-1)*J/h,st=Nc(N);if(st===N)m.push(b[st]);else{var nt=N-st;m.push(b[st]*(1-nt)+b[st+1]*nt)}}m.push(y)}else if(u.substr(0,1)==="k"){var vt,Ot=b.length,Lt=new Array(Ot),$t=new Array(h),$e=!0,Re=0,Ke=null;Ke=[],Ke.push(p);for(var Tt=1;Tt<h;Tt++)Ke.push(p+Tt/h*(y-p));for(Ke.push(y);$e;){for(var j=0;j<h;j++)$t[j]=0;for(var dt=0;dt<Ot;dt++)for(var wt=b[dt],bt=Number.MAX_VALUE,ke=void 0,Vt=0;Vt<h;Vt++){var Mt=jc(Ke[Vt]-wt);Mt<bt&&(bt=Mt,ke=Vt),$t[ke]++,Lt[dt]=ke}for(var kt=new Array(h),zt=0;zt<h;zt++)kt[zt]=null;for(var Wt=0;Wt<Ot;Wt++)vt=Lt[Wt],kt[vt]===null?kt[vt]=b[Wt]:kt[vt]+=b[Wt];for(var In=0;In<h;In++)kt[In]*=1/$t[In];$e=!1;for(var Ti=0;Ti<h;Ti++)if(kt[Ti]!==Ke[Ti]){$e=!0;break}Ke=kt,Re++,Re>200&&($e=!1)}for(var Ii={},Hs=0;Hs<h;Hs++)Ii[Hs]=[];for(var Gs=0;Gs<Ot;Gs++)vt=Lt[Gs],Ii[vt].push(b[Gs]);for(var ti=[],ts=0;ts<h;ts++)ti.push(Ii[ts][0]),ti.push(Ii[ts][Ii[ts].length-1]);ti=ti.sort(function(ma,ya){return ma-ya}),m.push(ti[0]);for(var Ao=1;Ao<ti.length;Ao+=2){var es=ti[Ao];!isNaN(es)&&m.indexOf(es)===-1&&m.push(es)}}return m},Wl={analyze:El,limits:Fl},Nl=_,_c=function(r,u){r=new Nl(r),u=new Nl(u);var h=r.luminance(),p=u.luminance();return h>p?(h+.05)/(p+.05):(p+.05)/(h+.05)},jl=_,Kn=Math.sqrt,ye=Math.pow,Hc=Math.min,Gc=Math.max,_l=Math.atan2,Hl=Math.abs,br=Math.cos,Gl=Math.sin,Xc=Math.exp,Xl=Math.PI,Yc=function(r,u,h,p,y){h===void 0&&(h=1),p===void 0&&(p=1),y===void 0&&(y=1);var b=function(es){return 360*es/(2*Xl)},m=function(es){return 2*Xl*es/360};r=new jl(r),u=new jl(u);var x=Array.from(r.lab()),S=x[0],B=x[1],E=x[2],J=Array.from(u.lab()),N=J[0],st=J[1],nt=J[2],vt=(S+N)/2,Ot=Kn(ye(B,2)+ye(E,2)),Lt=Kn(ye(st,2)+ye(nt,2)),$t=(Ot+Lt)/2,$e=.5*(1-Kn(ye($t,7)/(ye($t,7)+ye(25,7)))),Re=B*(1+$e),Ke=st*(1+$e),Tt=Kn(ye(Re,2)+ye(E,2)),j=Kn(ye(Ke,2)+ye(nt,2)),dt=(Tt+j)/2,wt=b(_l(E,Re)),bt=b(_l(nt,Ke)),ke=wt>=0?wt:wt+360,Vt=bt>=0?bt:bt+360,Mt=Hl(ke-Vt)>180?(ke+Vt+360)/2:(ke+Vt)/2,kt=1-.17*br(m(Mt-30))+.24*br(m(2*Mt))+.32*br(m(3*Mt+6))-.2*br(m(4*Mt-63)),zt=Vt-ke;zt=Hl(zt)<=180?zt:Vt<=ke?zt+360:zt-360,zt=2*Kn(Tt*j)*Gl(m(zt)/2);var Wt=N-S,In=j-Tt,Ti=1+.015*ye(vt-50,2)/Kn(20+ye(vt-50,2)),Ii=1+.045*dt,Hs=1+.015*dt*kt,Gs=30*Xc(-ye((Mt-275)/25,2)),ti=2*Kn(ye(dt,7)/(ye(dt,7)+ye(25,7))),ts=-ti*Gl(2*m(Gs)),Ao=Kn(ye(Wt/(h*Ti),2)+ye(In/(p*Ii),2)+ye(zt/(y*Hs),2)+ts*(In/(p*Ii))*(zt/(y*Hs)));return Gc(0,Hc(100,Ao))},Yl=_,qc=function(r,u,h){h===void 0&&(h="lab"),r=new Yl(r),u=new Yl(u);var p=r.get(h),y=u.get(h),b=0;for(var m in p){var x=(p[m]||0)-(y[m]||0);b+=x*x}return Math.sqrt(b)},Vc=_,Uc=function(){for(var r=[],u=arguments.length;u--;)r[u]=arguments[u];try{return new(Function.prototype.bind.apply(Vc,[null].concat(r))),!0}catch{return!1}},ql=ht,Vl=ca,Jc={cool:function(){return Vl([ql.hsl(180,1,.9),ql.hsl(250,.7,.4)])},hot:function(){return Vl(["#000","#f00","#ff0","#fff"]).mode("rgb")}},wr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ga=0,Ul=Object.keys(wr);ga<Ul.length;ga+=1){var Jl=Ul[ga];wr[Jl.toLowerCase()]=wr[Jl]}var Zc=wr,Oe=ht;Oe.average=cc,Oe.bezier=vc,Oe.blend=Cc,Oe.cubehelix=Dc,Oe.mix=Oe.interpolate=Al,Oe.random=Fc,Oe.scale=ca,Oe.analyze=Wl.analyze,Oe.contrast=_c,Oe.deltaE=Yc,Oe.distance=qc,Oe.limits=Wl.limits,Oe.valid=Uc,Oe.scales=Jc,Oe.colors=De,Oe.brewer=Zc;var Qc=Oe;return Qc})})(Ap);const ki=(()=>(Ut.Color.symbol=Ut.Color.prototype.symbol=Symbol.for("@motion-canvas/core/types/Color"),Ut.Color.lerp=Ut.Color.prototype.lerp=(i,t,e,n="lch")=>{typeof i=="string"&&(i=new Ut.Color(i)),typeof t=="string"&&(t=new Ut.Color(t));const s=i instanceof Ut.Color,o=t instanceof Ut.Color;return s||(i=o?t.alpha(0):new Ut.Color("rgba(0, 0, 0, 0)")),o||(t=s?i.alpha(0):new Ut.Color("rgba(0, 0, 0, 0)")),Ut.mix(i,t,e,n)},Ut.Color.createLerp=Ut.Color.prototype.createLerp=i=>(t,e,n)=>Ut.Color.lerp(t,e,n,i),Ut.Color.createSignal=(i,t=Ut.Color.lerp)=>new ws(i,t,void 0,e=>new Ut.Color(e)).toSignal(),Ut.Color.prototype.toSymbol=()=>Ut.Color.symbol,Ut.Color.prototype.serialize=function(){return this.css()},Ut.Color.prototype.lerp=function(i,t,e){return Ut.Color.lerp(this,i,t,e)},Ut.Color))();function Cp(i,t){return d.fromDegrees(i).transform(t).degrees}function xa(i,t){return d.magnitude(t.m11,t.m12)*i}class Fn{static createSignal(t,e=Fn.lerp){return new Br(["top","right","bottom","left"],n=>new Fn(n),t,e).toSignal()}static lerp(t,e,n){return new Fn(_t(t.top,e.top,n),_t(t.right,e.right,n),_t(t.bottom,e.bottom,n),_t(t.left,e.left,n))}get x(){return this.left+this.right}get y(){return this.top+this.bottom}constructor(t=0,e,n,s){if(this.top=0,this.right=0,this.bottom=0,this.left=0,t!=null){if(Array.isArray(t)&&(s=t[3],n=t[2],e=t[1],t=t[0]),typeof t=="number"){this.top=t,this.right=e!==void 0?e:t,this.bottom=n!==void 0?n:t,this.left=s!==void 0?s:e!==void 0?e:t;return}this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left}}lerp(t,e){return Fn.lerp(this,t,e)}scale(t){return new Fn(this.top*t,this.right*t,this.bottom*t,this.left*t)}addScalar(t){return new Fn(this.top+t,this.right+t,this.bottom+t,this.left+t)}toSymbol(){return Fn.symbol}toString(){return`Spacing(${this.top}, ${this.right}, ${this.bottom}, ${this.left})`}serialize(){return{top:this.top,right:this.right,bottom:this.bottom,left:this.left}}}Fn.symbol=Symbol.for("@motion-canvas/core/types/Spacing");class Sa extends fn{constructor(){super(...arguments),this.type=ki.symbol}parse(t){return t===null?null:new ki(t)}serialize(){var t;return((t=this.value.current)==null?void 0:t.serialize())??null}}class bs extends fn{constructor(t,e,n=(s=>(s=e[0])==null?void 0:s.value)()){super(t,n),this.options=e,this.type=bs.symbol}set(t){var e;super.set((e=this.getOption(t))==null?void 0:e.value)}parse(t){var e;return(e=this.getOption(t))==null?void 0:e.value}getOption(t){return this.options.find(e=>e.value===t)??this.options[0]}}bs.symbol=Symbol.for("@motion-canvas/core/meta/EnumMetaField");class Tp extends fn{get onFieldsChanged(){return this.fields.subscribable}get options(){return this.optionFields[this.current]}constructor(t,e,n=0){var c,g;const s=e.plugins.flatMap(v=>{var A;return((A=v.exporters)==null?void 0:A.call(v,e))??[]}),o=s.map(v=>v.meta(e)),a=new bs("exporter",s.map(v=>({value:v.id,text:v.displayName})),(c=s[n])==null?void 0:c.id);super(t,{name:a.get(),options:(g=o[n])==null?void 0:g.get()}),this.current=n,this.type=Object,this.handleChange=()=>{var P,M,G;const v=this.exporterField.get(),A=Math.max(this.exporters.findIndex(K=>K.id===v),0);this.current!==A&&((P=this.options)==null||P.onChanged.unsubscribe(this.handleChange),this.current=A,(M=this.options)==null||M.onChanged.subscribe(this.handleChange,!1),this.fields.current=this.options?[this.exporterField,this.options]:[this.exporterField]),this.value.current={name:this.exporterField.get(),options:((G=this.options)==null?void 0:G.get())??null}},this.exporters=s,this.exporterField=a,this.exporterField.onChanged.subscribe(this.handleChange,!1),this.exporterField.disable(o.length<2).space(),this.optionFields=o,this.fields=new ge([this.exporterField]),this.options&&(this.options.onChanged.subscribe(this.handleChange,!1),this.fields.current=[this.exporterField,this.options])}set(t){var e;this.exporterField.set(t.name),(e=this.options)==null||e.set(t.options??{})}serialize(){var t;return{name:this.exporterField.serialize(),options:((t=this.options)==null?void 0:t.serialize())??null}}clone(){return new this.constructor(this.name,this.exporters,this.current)}}var Co;class Ce{constructor(t,e=!1){this.name=t,this.source=e,this.lock=new ep,this.ignoreChange=!1,this.cache=null,this.metaField=null,this.handleChanged=async()=>{}}attach(t){var e;this.metaField||(this.metaField=t,this.cache&&this.metaField.set(this.cache),(e=this.metaField)==null||e.onChanged.subscribe(this.handleChanged))}async saveData(t){if(this.source===!1)return;if(!this.source)throw new Error(`The meta file for ${this.name} is missing.`);if(Co.sourceLookup[this.source])throw new Error(`Metadata for ${this.name} is already being updated`);const e=this.source;await new Promise((n,s)=>{setTimeout(()=>{delete Co.sourceLookup[e],s(`Connection timeout when updating metadata for ${this.name}`)},1e3),Co.sourceLookup[e]=()=>{delete Co.sourceLookup[e],n()},(void 0).send("motion-canvas:meta",{source:e,data:t})})}loadData(t){var e;this.ignoreChange=!0,this.cache=t,(e=this.metaField)==null||e.set(t),this.ignoreChange=!1}}Co=Ce;Ce.sourceLookup={};class va extends fn{constructor(){super(...arguments),this.type=Number,this.presets=[]}parse(t){let e=parseFloat(t);return this.min!==void 0&&e<this.min&&(e=this.min),this.max!==void 0&&e>this.max&&(e=this.max),e}getPresets(){return this.presets}setPresets(t){return this.presets=t,this}setRange(t,e){return this.min=t,this.max=e,this}}class Ip extends fn{get onFieldsChanged(){return this.event.subscribable}constructor(t,e){const n=new Map(Object.entries(e));super(t,Object.fromEntries(Array.from(n,([s,o])=>[s,o.get()]))),this.type=Object,this.ignoreChange=!1,this.customFields={},this.handleChange=()=>{this.ignoreChange||(this.value.current=this.transform("get"))},this.event=new ge([...n.values()]),this.fields=n;for(const[s,o]of this.fields)Object.defineProperty(this,s,{value:o}),o.onChanged.subscribe(this.handleChange)}set(t){this.ignoreChange=!0;for(const[e,n]of Object.entries(t)){const s=this.fields.get(e);s?s.set(n):this.customFields[e]=n}this.ignoreChange=!1,this.handleChange()}serialize(){return this.transform("serialize")}clone(){return new this.constructor(this.name,this.transform("clone"))}transform(t){return{...Object.fromEntries(Array.from(this.fields,([n,s])=>[n,s[t]()])),...this.customFields}}}const $i=Ip;class Lr extends fn{constructor(){super(...arguments),this.type=Lr.symbol}parse(t){return this.parseRange(1/0,t[0],t[1]??1/0)}update(t,e,n,s){this.value.current=this.parseRange(n/s-To,t/s-To,e/s-To)}parseRange(t,e=this.value.current[0],n=this.value.current[1]){return e=He(0,t,e),n=He(0,t,n??1/0),e>n&&([e,n]=[n,e]),n>=t&&(n=1/0),[e,n]}}Lr.symbol=Symbol.for("@motion-canvas/core/meta/RangeMetaField");class Au extends fn{constructor(){super(...arguments),this.type=d.symbol}parse(t){return new d(t)}serialize(){return this.value.current.serialize()}}const nu=[{value:.25,text:"0.25x (Quarter)"},{value:.5,text:"0.5x (Half)"},{value:1,text:"1.0x (Full)"},{value:2,text:"2.0x (Double)"}],Bp=[{value:"srgb",text:"sRGB"},{value:"display-p3",text:"DCI-P3"}],iu=[{value:30,text:"30 FPS"},{value:60,text:"60 FPS"}];var En;(function(i){i.Error="error",i.Warn="warn",i.Info="info",i.Http="http",i.Verbose="verbose",i.Debug="debug",i.Silly="silly"})(En||(En={}));class Lp{constructor(){this.logged=new si,this.history=[],this.profilers={}}get onLogged(){return this.logged.subscribable}log(t){this.logged.dispatch(t),this.history.push(t)}error(t){this.logLevel(En.Error,t)}warn(t){this.logLevel(En.Warn,t)}info(t){this.logLevel(En.Info,t)}http(t){this.logLevel(En.Http,t)}verbose(t){this.logLevel(En.Verbose,t)}debug(t){this.logLevel(En.Debug,t)}silly(t){this.logLevel(En.Silly,t)}logLevel(t,e){const n=typeof e=="string"?{message:e}:e;n.level=t,this.log(n)}profile(t,e){const n=performance.now();if(this.profilers[t]){const s=this.profilers[t];delete this.profilers[t];const o=e??{message:t};o.level??(o.level=En.Debug),o.durationMs=n-s,this.log(o);return}this.profilers[t]=n}}function Mp(i){const t={version:new fn("version",1),shared:new $i("General",{background:new Sa("background",null),range:new Lr("range",[0,1/0]),size:new Au("resolution",new d(1920,1080)),audioOffset:new va("audio offset",0)}),preview:new $i("Preview",{fps:new va("frame rate",30).setPresets(iu),resolutionScale:new bs("scale",nu,1)}),rendering:new $i("Rendering",{fps:new va("frame rate",60).setPresets(iu),resolutionScale:new bs("scale",nu,1),colorSpace:new bs("color space",Bp),exporter:new Tp("exporter",i)})};return t.shared.audioOffset.disable(!i.audio),t}class Dp extends $i{constructor(t){super("project",Mp(t))}getFullPreviewSettings(){return{...this.shared.get(),...this.preview.get()}}getFullRenderingSettings(){return{...this.shared.get(),...this.rendering.get()}}}function $p(){return new $i("Application Settings",{version:new fn("version",1),appearance:new $i("Appearance",{color:new Sa("accent color",new ki("#33a6ff")).describe("The accent color for the user interface. (Leave empty to use the default color)"),font:new Zl("legacy font",!1).describe("Use the 'JetBrains Mono' font for the user interface."),coordinates:new Zl("coordinates",!0).describe("Display mouse coordinates within the preview window.")}),defaults:new $i("Defaults",{background:new Sa("background",null).describe("The default background color used in new projects."),size:new Au("resolution",new d(1920,1080)).describe("The default resolution used in new projects.")})})}function kp(i,t,e,n,s,o,a=n.logger??new Lp){const c=$p();o.attach(c);const g={name:i,...n,plugins:e,versions:t,settings:c,logger:a};return g.meta=new Dp(g),g.meta.shared.set(c.defaults.get()),g.experimentalFeatures??(g.experimentalFeatures=!1),s.attach(g.meta),g}function zp(i,t,e){t==null&&(t=()=>{});const n=Ks(),s=n.previous;n.previousOnTop=e??!1;const o=s==null?void 0:s.lifecycleEvents.onBeforeRender.subscribe(t),a=n.lifecycleEvents.onBeforeRender.subscribe(i);return n.enterInitial(),()=>{n.enterAfterTransitionIn(),o==null||o(),a()}}function*dn(i=ne.Top,t=.6){const n=Ks().getSize().getOriginOffset(i).scale(2),s=d.createSignal(),o=d.createSignal(n),a=zp(c=>c.translate(o.x(),o.y()),c=>c.translate(s.x(),s.y()));yield*Q(s(n.scale(-1),t),o(d.zero,t)),a()}let Da;Da??(Da=new Ce("project",!1));Da.loadData({version:0,shared:{background:null,range:[0,null],size:{x:1920,y:1080},audioOffset:0},preview:{fps:60,resolutionScale:1},rendering:{fps:30,resolutionScale:1,colorSpace:"srgb",exporter:{name:"@motion-canvas/core/image-sequence",options:{fileType:"image/png",quality:100,groupByScene:!1}}}});const Ep=Da;let $a;$a??($a=new Ce("title",!1));$a.loadData({version:0,timeEvents:[],seed:402488104});const Fp=$a;function Wp(i){var t;return!!((t=i.prototype)!=null&&t.isClass)}const lt=Symbol.for("@motion-canvas/2d/fragment");function l(i,t,e){const{ref:n,children:s,...o}=t,a=Array.isArray(s)?s.flat():s;if(i===lt)return a;if(Wp(i)){const c=new i({...o,children:a,key:e});return n==null||n(c),c}else return i({...o,ref:n,children:a,key:e})}const su={invert:{name:"invert"},sepia:{name:"sepia"},grayscale:{name:"grayscale"},brightness:{name:"brightness",default:1},contrast:{name:"contrast",default:1},saturate:{name:"saturate",default:1},hue:{name:"hue-rotate",unit:"deg",scale:1},blur:{name:"blur",transform:!0,unit:"px",scale:1}};class Np{get name(){return this.props.name}get default(){return this.props.default}constructor(t){this.props={name:"invert",default:0,unit:"%",scale:100,transform:!1,...t,value:t.value??t.default??0},this.value=W(this.props.value,_t,this)}isActive(){return this.value()!==this.props.default}serialize(t){let e=this.value();return this.props.transform&&(e=xa(e,t)),`${this.props.name}(${e*this.props.scale}${this.props.unit})`}}const ei=Symbol.for("@motion-canvas/2d/decorators/initializers");function Do(i,t){if(!i[ei])i[ei]=[];else if(i[ei]&&!Object.prototype.hasOwnProperty.call(i,ei)){const e=Object.getPrototypeOf(i);i[ei]=[...e[ei]]}i[ei].push(t)}function jp(i,t){if(i[ei])try{i[ei].forEach(e=>e(i,t))}catch(e){throw e.inspect??(e.inspect=i.key),e}}function ct(){return(i,t)=>{Do(i,e=>{const n=Object.getPrototypeOf(e)[t];e[t]=Sp(n.bind(e),e)})}}function Oa(i={},t,e){const n={};if(e&&t){const s=i.setter??(t==null?void 0:t[`set${vs(e)}`]);s&&(n.setter=s.bind(t));const o=i.getter??(t==null?void 0:t[`get${vs(e)}`]);o&&(n.getter=o.bind(t));const a=i.tweener??(t==null?void 0:t[`tween${vs(e)}`]);a&&(n.tweener=a.bind(t))}return n}const ni=Symbol.for("@motion-canvas/2d/decorators/properties");function xs(i,t){var e;return((e=i[ni])==null?void 0:e[t])??null}function ka(i,t){let e;return i[ni]?i[ni]&&!Object.prototype.hasOwnProperty.call(i,ni)?i[ni]=e=Object.fromEntries(Object.entries(i[ni]).map(([n,s])=>[n,{...s}])):e=i[ni]:i[ni]=e={},e[t]??(e[t]={cloneable:!0,inspectable:!0,compoundEntries:[]}),e[t]}function Cu(i){return i&&typeof i=="object"?i[ni]??{}:{}}function za(i,t){jp(i);for(const[e,n]of Object.entries(Cu(i))){const s=i[e];if(s.reset(),t[e]!==void 0&&s(t[e]),n.compoundEntries!==void 0)for(const[o,a]of n.compoundEntries)a in t&&s[o](t[a])}}function L(){return(i,t)=>{const e=ka(i,t);Do(i,n=>{var c;let s=e.default;const o=n[`getDefault${vs(t)}`];o&&(s=()=>o.call(n,e.default));const a=new ws(s,e.interpolationFunction??Zs,n,(c=e.parser)==null?void 0:c.bind(n),Oa(e,n,t));n[t]=a.toSignal()})}}function k(i){return(t,e)=>{const n=xs(t,e);if(!n){de().error(`Missing property decorator for "${e.toString()}"`);return}n.default=i}}function Ea(i){return(t,e)=>{const n=xs(t,e);if(!n){de().error(`Missing property decorator for "${e.toString()}"`);return}n.interpolationFunction=i}}function Fa(i){return(t,e)=>{const n=xs(t,e);if(!n){de().error(`Missing property decorator for "${e.toString()}"`);return}n.parser=i}}function Ss(i){return(t,e)=>{const n=xs(t,e);if(!n){de().error(`Missing property decorator for "${e.toString()}"`);return}n.parser=s=>new i(s),"lerp"in i&&(n.interpolationFunction??(n.interpolationFunction=i.lerp))}}function Os(i=!0){return(t,e)=>{const n=xs(t,e);if(!n){de().error(`Missing property decorator for "${e.toString()}"`);return}n.cloneable=i}}function Tu(i=!0){return(t,e)=>{const n=xs(t,e);if(!n){de().error(`Missing property decorator for "${e.toString()}"`);return}n.inspectable=i}}function Wa(i){return(t,e)=>{const n=ka(t,e);n.compound=!0,n.compoundEntries=Object.entries(i),Do(t,s=>{if(!n.parser){de().error(`Missing parser decorator for "${e.toString()}"`);return}const o=n.default,a=n.parser.bind(s),c=new Br(n.compoundEntries.map(([g,v])=>{const A=new ws(Vs(o,P=>a(P)[g]),_t,s,void 0,Oa(void 0,s,v)).toSignal();return[g,A]}),a,o,n.interpolationFunction??Zs,s,Oa(n,s,e));s[e]=c.toSignal()})}}function hi(i){return(t,e)=>{Wa(typeof i=="object"?i:{x:i?`${i}X`:"x",y:i?`${i}Y`:"y"})(t,e),Ss(d)(t,e)}}var Ei=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};class Gn{constructor(t){za(this,t)}canvasGradient(t){let e;switch(this.type()){case"linear":e=t.createLinearGradient(this.from.x(),this.from.y(),this.to.x(),this.to.y());break;case"conic":e=t.createConicGradient(this.angle(),this.from.x(),this.from.y());break;case"radial":e=t.createRadialGradient(this.from.x(),this.from.y(),this.fromRadius(),this.to.x(),this.to.y(),this.toRadius());break}for(const{offset:n,color:s}of this.stops())e.addColorStop(ri(n),new ki(ri(s)).serialize());return e}}Ei([k("linear"),L()],Gn.prototype,"type",void 0);Ei([hi("from")],Gn.prototype,"from",void 0);Ei([hi("to")],Gn.prototype,"to",void 0);Ei([k(0),L()],Gn.prototype,"angle",void 0);Ei([k(0),L()],Gn.prototype,"fromRadius",void 0);Ei([k(0),L()],Gn.prototype,"toRadius",void 0);Ei([k([]),L()],Gn.prototype,"stops",void 0);Ei([ct()],Gn.prototype,"canvasGradient",null);var Na=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};class $o{constructor(t){za(this,t)}canvasPattern(t){return t.createPattern(this.image(),this.repetition())}}Na([L()],$o.prototype,"image",void 0);Na([k(null),L()],$o.prototype,"repetition",void 0);Na([ct()],$o.prototype,"canvasPattern",null);function _p(i){return i===null?null:i instanceof Gn||i instanceof $o?i:new ki(i)}function Ra(i,t){return i===null?"":i instanceof ki?i.serialize():i instanceof Gn?i.canvasGradient(t):i instanceof $o?i.canvasPattern(t)??"":""}function ou(i,t,e,n,s){if(e.top===0&&e.right===0&&e.bottom===0&&e.left===0){Hp(i,t);return}const o=Mi(e.top,e.right,e.left,t),a=Mi(e.right,e.top,e.bottom,t),c=Mi(e.bottom,e.left,e.right,t),g=Mi(e.left,e.bottom,e.top,t);if(n){const v=A=>{const P=A*s;return A-P};i.moveTo(t.left+o,t.top),i.lineTo(t.right-a,t.top),i.bezierCurveTo(t.right-v(a),t.top,t.right,t.top+v(a),t.right,t.top+a),i.lineTo(t.right,t.bottom-c),i.bezierCurveTo(t.right,t.bottom-v(c),t.right-v(c),t.bottom,t.right-c,t.bottom),i.lineTo(t.left+g,t.bottom),i.bezierCurveTo(t.left+v(g),t.bottom,t.left,t.bottom-v(g),t.left,t.bottom-g),i.lineTo(t.left,t.top+o),i.bezierCurveTo(t.left,t.top+v(o),t.left+v(o),t.top,t.left+o,t.top);return}i.moveTo(t.left+o,t.top),i.arcTo(t.right,t.top,t.right,t.bottom,a),i.arcTo(t.right,t.bottom,t.left,t.bottom,c),i.arcTo(t.left,t.bottom,t.left,t.top,g),i.arcTo(t.left,t.top,t.right,t.top,o)}function Mi(i,t,e,n){const s=i+t>n.width?n.width*(i/(i+t)):i,o=i+e>n.height?n.height*(i/(i+e)):i;return Math.min(s,o)}function Hp(i,t){i.rect(t.x,t.y,t.width,t.height)}function ru(i,t,e){const n=t.size.scale(.5);for(let s=0;s<=e;s++){const o=s*2*Math.PI/e,c=d.fromRadians(o).perpendicular.mul(n);s===0?Pn(i,c):tn(i,c)}i.closePath()}function Pn(i,t){i.moveTo(t.x,t.y)}function tn(i,t){i.lineTo(t.x,t.y)}function ii(i,t){if(!(t.length<2)){Pn(i,t[0]);for(const e of t.slice(1))tn(i,e)}}function ja(i,t,e=8){tn(i,t.addY(-e)),tn(i,t.addY(e)),tn(i,t),tn(i,t.addX(-e)),Io(i,t,e)}function Io(i,t,e,n=0,s=Math.PI*2,o=!1){i.arc(t.x,t.y,e,n,s,o)}function Iu(i,t,e,n){i.bezierCurveTo(t.x,t.y,e.x,e.y,n.x,n.y)}function Bu(i,t,e){i.quadraticCurveTo(t.x,t.y,e.x,e.y)}function Lu(i){return t=>t instanceof i}function Mu(){return(i,t)=>{L()(i,t),Fa(_p)(i,t),Ea(ki.lerp)(i,t),k(null)(i,t)}}function Gp(){return(i,t)=>{L()(i,t),Ss(ki)(i,t)}}function Fi(i,t=e=>e){return(e,n)=>{e[`getDefault${vs(n)}`]=function(){this.requestLayoutUpdate();const s=this.element.style[i];this.element.style[i]="";const o=t.call(this,this.styles.getPropertyValue(i));return this.element.style[i]=s,o}}}class Xp extends ws{constructor(t,e){super(t,Zs,e);for(const n in su){const s=su[n];Object.defineProperty(this.invokable,n,{value:(o,a,c=Cr)=>{var v,A,P;if(o===void 0)return((A=(v=this.get())==null?void 0:v.find(M=>M.name===s.name))==null?void 0:A.value())??s.default??0;let g=(P=this.get())==null?void 0:P.find(M=>M.name===s.name);return g||(g=new Np(s),this.set([...this.get(),g])),a===void 0?(g.value(o),this.owner):g.value(o,a,c)}})}}*tweener(t,e,n){const s=this.get(),o=ri(t);if(qp(s,o)){yield*Q(...s.map((g,v)=>g.value(o[v].value(),e,n))),this.set(o);return}for(const g of o)g.value(g.default);const a=o.map(g=>g.value.context.raw()),c=s.length>0&&o.length>0?e/2:e;s.length>0&&(yield*Q(...s.map(g=>g.value(g.default,c,n)))),this.set(o),o.length>0&&(yield*Q(...o.map((g,v)=>g.value(a[v],c,n))))}}function Yp(){return(i,t)=>{const e=ka(i,t);Do(i,n=>{n[t]=new Xp(e.default??[],n).toSignal()})}}function qp(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e].name!==t[e].name)return!1;return!0}const Vp=Symbol.for("@motion-canvas/2d/nodeName");function Xn(i){return function(t){t.prototype[Vp]=i}}function au(i,t){const e=He(0,i.arcLength,t);let n=0;for(const s of i.segments){const o=n;if(n+=s.arcLength,n>=e){const a=(e-o)/s.arcLength;return s.getPoint(He(0,1,a))}}return{position:d.zero,tangent:d.up,normal:d.up}}function _a(i){return(t,e)=>{Wa({top:i?`${i}Top`:"top",right:i?`${i}Right`:"right",bottom:i?`${i}Bottom`:"bottom",left:i?`${i}Left`:"left"})(t,e),Ss(Fn)(t,e)}}function Du(){return Ks()}var Pt=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o},xr;let $=xr=class{get x(){return this.position.x}get y(){return this.position.y}getAbsolutePosition(){const t=this.localToWorld();return new d(t.m41,t.m42)}setAbsolutePosition(t){this.position(Vs(t,e=>new d(e).transformAsPoint(this.worldToParent())))}getAbsoluteRotation(){const t=this.localToWorld();return d.degrees(t.m11,t.m12)}setAbsoluteRotation(t){this.rotation(Vs(t,e=>Cp(e,this.worldToParent())))}getAbsoluteScale(){const t=this.localToWorld();return new d(d.magnitude(t.m11,t.m12),d.magnitude(t.m21,t.m22))}setAbsoluteScale(t){this.scale(Vs(t,e=>this.getRelativeScale(new d(e))))}getRelativeScale(t){var n;const e=((n=this.parent())==null?void 0:n.absoluteScale())??d.one;return t.div(e)}*tweenCompositeOperation(t,e,n){const s=ri(t);s==="source-over"?(yield*this.compositeOverride(1,e,n),this.compositeOverride(0),this.compositeOperation(s)):(this.compositeOperation(s),this.compositeOverride(1),yield*this.compositeOverride(0,e,n))}absoluteOpacity(){var t;return(((t=this.parent())==null?void 0:t.absoluteOpacity())??1)*this.opacity()}hasFilters(){return!!this.filters().find(t=>t.isActive())}hasShadow(){return!!this.shadowColor()&&(this.shadowBlur()>0||this.shadowOffset.x()!==0||this.shadowOffset.y()!==0)}filterString(){let t="";const e=this.compositeToWorld();for(const n of this.filters())n.isActive()&&(t+=" "+n.serialize(e));return t}getSpawner(){return this.children()}setSpawner(t){this.children(t)}setChildren(t){if(this.children.context.raw()!==t){if(this.children.context.setter(t),!oi(t))this.spawnChildren(!1,t);else if(!this.hasSpawnedChildren)for(const e of this.realChildren)e.parent(null)}}getChildren(){return this.children.context.getter(),this.spawnedChildren()}spawnedChildren(){const t=this.children.context.getter();return oi(this.children.context.raw())&&this.spawnChildren(!0,t),this.realChildren}sortedChildren(){return[...this.children()].sort((t,e)=>Math.sign(t.zIndex()-e.zIndex()))}constructor({children:t,spawner:e,key:n,...s}){this.compositeOverride=W(0),this.stateStack=[],this.realChildren=[],this.hasSpawnedChildren=!1,this.parent=W(null),this.properties=Cu(this);const o=Du();[this.key,this.unregister]=o.registerNode(this,n),this.view2D=o.getView(),this.creationStack=new Error().stack,za(this,s),e&&de().warn({message:"Node.spawner() has been deprecated.",remarks:"Use <code>Node.children()</code> instead.",inspect:this.key,stack:new Error().stack}),this.children(e??t)}localToWorld(){const t=this.parent();return t?t.localToWorld().multiply(this.localToParent()):this.localToParent()}worldToLocal(){return this.localToWorld().inverse()}worldToParent(){var t;return((t=this.parent())==null?void 0:t.worldToLocal())??new DOMMatrix}localToParent(){const t=new DOMMatrix;return t.translateSelf(this.x(),this.y()),t.rotateSelf(0,0,this.rotation()),t.scaleSelf(this.scale.x(),this.scale.y()),t.skewXSelf(this.skew.x()),t.skewYSelf(this.skew.y()),t}compositeToWorld(){var t;return((t=this.compositeRoot())==null?void 0:t.localToWorld())??new DOMMatrix}compositeRoot(){var t;return this.composite()?this:((t=this.parent())==null?void 0:t.compositeRoot())??null}compositeToLocal(){const t=this.compositeRoot();if(t){const e=this.worldToLocal();return e.m44=1,t.localToWorld().multiply(e)}return new DOMMatrix}view(){return this.view2D}add(t){return this.insert(t,1/0)}insert(t,e=0){const n=Array.isArray(t)?t:[t];if(n.length===0)return this;const s=this.children(),o=s.slice(0,e);for(const a of n)a instanceof xr&&(o.push(a),a.remove(),a.parent(this));return o.push(...s.slice(e)),this.setParsedChildren(o),this}remove(){const t=this.parent();return t===null?this:(t.removeChild(this),this.parent(null),this)}move(t=1){const e=this.parent();if(t===0||!e)return this;const n=e.children(),s=[];if(t>0)for(let o=0;o<n.length;o++){const a=n[o];if(a===this){const c=o+t;for(;o<c&&o+1<n.length;o++)s[o]=n[o+1]}s[o]=a}else for(let o=n.length-1;o>=0;o--){const a=n[o];if(a===this){const c=o+t;for(;o>c&&o>0;o--)s[o]=n[o-1]}s[o]=a}return e.setParsedChildren(s),this}moveUp(){return this.move(1)}moveDown(){return this.move(-1)}moveToTop(){return this.move(1/0)}moveToBottom(){return this.move(-1/0)}moveTo(t){const e=this.parent();if(!e)return this;const n=e.children().indexOf(this),s=t-n;return this.move(s)}moveBelow(t,e=!1){const n=this.parent();if(!n)return this;if(t.parent()!==n)return de().error("Cannot position nodes relative to each other if they don't belong to the same parent."),this;const s=n.children(),o=s.indexOf(this),a=s.indexOf(t);if(!e&&o<a)return this;const c=a-o-1;return this.move(c)}moveAbove(t,e=!1){const n=this.parent();if(!n)return this;if(t.parent()!==n)return de().error("Cannot position nodes relative to each other if they don't belong to the same parent."),this;const s=n.children(),o=s.indexOf(this),a=s.indexOf(t);if(!e&&o>a)return this;const c=a-o+1;return this.move(c)}reparent(t){const e=this.absolutePosition(),n=this.absoluteRotation(),s=this.absoluteScale();t.add(this),this.absolutePosition(e),this.absoluteRotation(n),this.absoluteScale(s)}removeChildren(){for(const t of this.realChildren)t.parent(null);this.setParsedChildren([])}findAll(t){const e=[],n=this.reversedChildren();for(;n.length>0;){const s=n.pop();t(s)&&e.push(s);const o=s.children();for(let a=o.length-1;a>=0;a--)n.push(o[a])}return e}findFirst(t){const e=this.reversedChildren();for(;e.length>0;){const n=e.pop();if(t(n))return n;const s=n.children();for(let o=s.length-1;o>=0;o--)e.push(s[o])}return null}findLast(t){const e=[],n=this.reversedChildren();for(;n.length>0;){const s=n.pop();e.push(s);const o=s.children();for(let a=o.length-1;a>=0;a--)n.push(o[a])}for(;e.length>0;){const s=e.pop();if(t(s))return s}return null}findAncestor(t){let e=this.parent();for(;e;){if(t(e))return e;e=e.parent()}return null}childAs(t){return this.children()[t]??null}childrenAs(){return this.children()}parentAs(){return this.parent()??null}dispose(){if(this.unregister){this.stateStack=[],this.unregister(),this.unregister=null;for(const{signal:t}of this)t==null||t.context.dispose();for(const t of this.realChildren)t.dispose()}}clone(t={}){const e={...t};oi(this.children.context.raw())?e.children??(e.children=this.children.context.raw()):this.children().length>0&&(e.children??(e.children=this.children().map(n=>n.clone())));for(const{key:n,meta:s,signal:o}of this)if(!(!s.cloneable||n in e))if(s.compound)for(const[a,c]of s.compoundEntries){if(c in e)continue;const g=o[a];g.context.isInitial()||(e[c]=g.context.raw())}else o.context.isInitial()||(e[n]=o.context.raw());return this.instantiate(e)}snapshotClone(t={}){const e={...this.getState(),...t};return this.children().length>0&&(e.children??(e.children=this.children().map(n=>n.snapshotClone()))),this.instantiate(e)}reactiveClone(t={}){const e={...t};this.children().length>0&&(e.children??(e.children=this.children().map(n=>n.reactiveClone())));for(const{key:n,meta:s,signal:o}of this)!s.cloneable||n in e||(e[n]=()=>o());return this.instantiate(e)}instantiate(t={}){return new this.constructor(t)}setParsedChildren(t){this.children.context.setter(t),this.realChildren=t}spawnChildren(t,e){const n=this.parseChildren(e),s=new Set;for(const o of n){const a=o.parent.context.raw();a&&a!==this&&a.removeChild(o),s.add(o.key),o.parent(this)}for(const o of this.realChildren)s.has(o.key)||o.parent(null);this.hasSpawnedChildren=t,this.realChildren=n}parseChildren(t){const e=[],n=Array.isArray(t)?t:[t];for(const s of n)s instanceof xr&&e.push(s);return e}removeChild(t){this.setParsedChildren(this.children().filter(e=>e!==t))}requiresCache(){return this.cache()||this.opacity()<1||this.compositeOperation()!=="source-over"||this.hasFilters()||this.hasShadow()}cacheCanvas(){const t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("Could not create a cache canvas");return t}cachedCanvas(){const t=this.cacheCanvas(),e=this.worldSpaceCacheBBox(),n=this.localToWorld();return t.canvas.width=e.width,t.canvas.height=e.height,t.setTransform(n.a,n.b,n.c,n.d,n.e-e.x,n.f-e.y),this.draw(t),t}getCacheBBox(){return new Rt}cacheBBox(){const t=this.getCacheBBox(),e=this.children();if(e.length===0)return t;const n=t.corners;for(const s of e){const o=s.fullCacheBBox(),a=s.localToParent();n.push(...o.corners.map(c=>c.transformAsPoint(a)))}return Rt.fromPoints(...n)}fullCacheBBox(){const t=this.compositeToLocal(),e=this.shadowOffset().transform(t),n=xa(this.shadowBlur(),t),s=this.cacheBBox().expand(this.filters.blur()*2+n);return e.x<0?(s.x+=e.x,s.width-=e.x):s.width+=e.x,e.y<0?(s.y+=e.y,s.height-=e.y):s.height+=e.y,s}worldSpaceCacheBBox(){const t=Rt.fromSizeCentered(this.view().size()),e=Rt.fromPoints(...t.transformCorners(this.view().localToWorld())),n=Rt.fromPoints(...this.cacheBBox().transformCorners(this.localToWorld()));return e.intersection(n).pixelPerfect}setupDrawFromCache(t){if(t.globalCompositeOperation=this.compositeOperation(),t.globalAlpha*=this.opacity(),this.hasFilters()&&(t.filter=this.filterString()),this.hasShadow()){const e=this.compositeToWorld(),n=this.shadowOffset().transform(e),s=xa(this.shadowBlur(),e);t.shadowColor=this.shadowColor().serialize(),t.shadowBlur=s,t.shadowOffsetX=n.x,t.shadowOffsetY=n.y}}render(t){if(!(this.absoluteOpacity()<=0)){if(t.save(),this.transformContext(t),this.requiresCache()){const e=this.worldSpaceCacheBBox();if(e.width!==0&&e.height!==0){this.setupDrawFromCache(t);const n=this.cachedCanvas(),s=this.compositeOverride(),o=this.worldToLocal();t.transform(o.a,o.b,o.c,o.d,o.e,o.f),t.drawImage(n.canvas,e.position.x,e.position.y),s>0&&(t.save(),t.globalAlpha*=s,t.globalCompositeOperation="source-over",t.drawImage(n.canvas,e.position.x,e.position.y),t.restore())}}else this.draw(t);t.restore()}}draw(t){this.drawChildren(t)}drawChildren(t){for(const e of this.sortedChildren())e.render(t)}drawOverlay(t,e){const n=this.cacheBBox().transformCorners(e),s=this.getCacheBBox().transformCorners(e);t.strokeStyle="white",t.lineWidth=1,t.beginPath(),ii(t,n),t.closePath(),t.stroke(),t.strokeStyle="blue",t.beginPath(),ii(t,s),t.closePath(),t.stroke()}transformContext(t){const e=this.localToParent();t.transform(e.a,e.b,e.c,e.d,e.e,e.f)}hit(t){let e=null;const n=t.transformAsPoint(this.localToParent().inverse()),s=this.children();for(let o=s.length-1;o>=0&&(e=s[o].hit(n),!e);o--);return e}collectAsyncResources(){for(const t of this.children())t.collectAsyncResources()}async toPromise(){do await ve.consumePromises(),this.collectAsyncResources();while(ve.hasPromises());return this}getState(){const t={};for(const{key:e,meta:n,signal:s}of this)!n.cloneable||e in t||(t[e]=s());return t}applyState(t,e,n=Cr){if(e===void 0)for(const o in t){const a=this.signalByKey(o);a&&a(t[o])}const s=[];for(const o in t){const a=this.signalByKey(o);t[o]!==a.context.raw()&&s.push(a(t[o],e,n))}return Q(...s)}save(){this.stateStack.push(this.getState())}restore(t,e=Cr){const n=this.stateStack.pop();if(n!==void 0)return this.applyState(n,t,e)}*[Symbol.iterator](){for(const t in this.properties){const e=this.properties[t],n=this.signalByKey(t);yield{meta:e,signal:n,key:t}}}signalByKey(t){return this[t]}reversedChildren(){const t=this.children(),e=[];for(let n=t.length-1;n>=0;n--)e.push(t[n]);return e}};Pt([hi()],$.prototype,"position",void 0);Pt([Ss(d),Os(!1),L()],$.prototype,"absolutePosition",void 0);Pt([k(0),L()],$.prototype,"rotation",void 0);Pt([Os(!1),L()],$.prototype,"absoluteRotation",void 0);Pt([k(d.one),hi("scale")],$.prototype,"scale",void 0);Pt([k(d.zero),hi("skew")],$.prototype,"skew",void 0);Pt([Ss(d),Os(!1),L()],$.prototype,"absoluteScale",void 0);Pt([k(0),L()],$.prototype,"zIndex",void 0);Pt([k(!1),L()],$.prototype,"cache",void 0);Pt([k(!1),L()],$.prototype,"composite",void 0);Pt([k("source-over"),L()],$.prototype,"compositeOperation",void 0);Pt([Ee()],$.prototype,"tweenCompositeOperation",null);Pt([k(1),Fa(i=>He(0,1,i)),L()],$.prototype,"opacity",void 0);Pt([ct()],$.prototype,"absoluteOpacity",null);Pt([Yp()],$.prototype,"filters",void 0);Pt([k("#0000"),Gp()],$.prototype,"shadowColor",void 0);Pt([k(0),L()],$.prototype,"shadowBlur",void 0);Pt([hi("shadowOffset")],$.prototype,"shadowOffset",void 0);Pt([ct()],$.prototype,"hasFilters",null);Pt([ct()],$.prototype,"hasShadow",null);Pt([ct()],$.prototype,"filterString",null);Pt([Tu(!1),Os(!1),L()],$.prototype,"spawner",void 0);Pt([Tu(!1),Os(!1),L()],$.prototype,"children",void 0);Pt([ct()],$.prototype,"spawnedChildren",null);Pt([ct()],$.prototype,"sortedChildren",null);Pt([ct()],$.prototype,"localToWorld",null);Pt([ct()],$.prototype,"worldToLocal",null);Pt([ct()],$.prototype,"worldToParent",null);Pt([ct()],$.prototype,"localToParent",null);Pt([ct()],$.prototype,"compositeToWorld",null);Pt([ct()],$.prototype,"compositeRoot",null);Pt([ct()],$.prototype,"compositeToLocal",null);Pt([ct()],$.prototype,"cacheCanvas",null);Pt([ct()],$.prototype,"cachedCanvas",null);Pt([ct()],$.prototype,"cacheBBox",null);Pt([ct()],$.prototype,"fullCacheBBox",null);Pt([ct()],$.prototype,"worldSpaceCacheBBox",null);$=xr=Pt([Xn("Node")],$);$.prototype.isClass=!0;var at=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o},Sr;let F=Sr=class extends ${get columnGap(){return this.gap.x}get rowGap(){return this.gap.y}getX(){return this.isLayoutRoot()?this.x.context.getter():this.computedPosition().x}setX(t){this.x.context.setter(t)}getY(){return this.isLayoutRoot()?this.y.context.getter():this.computedPosition().y}setY(t){this.y.context.setter(t)}get width(){return this.size.x}get height(){return this.size.y}getWidth(){return this.computedSize().width}setWidth(t){this.width.context.setter(t)}*tweenWidth(t,e,n,s){const o=this.desiredSize().x,a=typeof o!="number"||typeof t!="number";let c;a?c=this.size.x():c=o;let g;a?(this.size.x(t),g=this.size.x()):g=t,this.size.x(c),a&&this.lockSize(),yield*qs(e,v=>this.size.x(s(c,g,n(v)))),this.size.x(t),a&&this.releaseSize()}getHeight(){return this.computedSize().height}setHeight(t){this.height.context.setter(t)}*tweenHeight(t,e,n,s){const o=this.desiredSize().y,a=typeof o!="number"||typeof t!="number";let c;a?c=this.size.y():c=o;let g;a?(this.size.y(t),g=this.size.y()):g=t,this.size.y(c),a&&this.lockSize(),yield*qs(e,v=>this.size.y(s(c,g,n(v)))),this.size.y(t),a&&this.releaseSize()}desiredSize(){return{x:this.width.context.getter(),y:this.height.context.getter()}}*tweenSize(t,e,n,s){const o=this.desiredSize();let a;typeof o.x!="number"||typeof o.y!="number"?a=this.size():a=new d(o);let c;typeof t=="object"&&typeof t.x=="number"&&typeof t.y=="number"?c=new d(t):(this.size(t),c=this.size()),this.size(a),this.lockSize(),yield*qs(e,g=>this.size(s(a,c,n(g)))),this.releaseSize(),this.size(t)}constructor(t){super(t),this.element.dataset.motionCanvasKey=this.key}lockSize(){this.sizeLockCounter(this.sizeLockCounter()+1)}releaseSize(){this.sizeLockCounter(this.sizeLockCounter()-1)}parentTransform(){return this.findAncestor(Lu(Sr))}anchorPosition(){const t=this.computedSize(),e=this.offset();return t.scale(.5).mul(e)}layoutEnabled(){var t;return this.layout()??((t=this.parentTransform())==null?void 0:t.layoutEnabled())??!1}isLayoutRoot(){var t;return!this.layoutEnabled()||!((t=this.parentTransform())!=null&&t.layoutEnabled())}localToParent(){const t=super.localToParent(),e=this.offset();if(!e.exactlyEquals(d.zero)){const n=this.size().mul(e).scale(-.5);t.translateSelf(n.x,n.y)}return t}scalingRotationMatrix(){const t=new DOMMatrix;t.rotateSelf(0,0,this.rotation()),t.scaleSelf(this.scale.x(),this.scale.y());const e=this.offset();if(!e.exactlyEquals(d.zero)){const n=this.size().mul(e).scale(-.5);t.translateSelf(n.x,n.y)}return t}getComputedLayout(){return new Rt(this.element.getBoundingClientRect())}computedPosition(){this.requestLayoutUpdate();const t=this.getComputedLayout(),e=new d(t.x+t.width/2*this.offset.x(),t.y+t.height/2*this.offset.y()),n=this.parentTransform();if(n){const s=n.getComputedLayout();e.x-=s.x+(s.width-t.width)/2,e.y-=s.y+(s.height-t.height)/2}return e}computedSize(){return this.requestLayoutUpdate(),this.getComputedLayout().size}requestLayoutUpdate(){const t=this.parentTransform();this.appendedToView()?(t==null||t.requestFontUpdate(),this.updateLayout()):t.requestLayoutUpdate()}appendedToView(){const t=this.isLayoutRoot();return t&&this.view().element.append(this.element),t}updateLayout(){if(this.applyFont(),this.applyFlex(),this.layoutEnabled()){const t=this.layoutChildren();for(const e of t)e.updateLayout()}}layoutChildren(){const t=[...this.children()],e=[],n=[];for(;t.length;){const s=t.shift();s instanceof Sr?s.layoutEnabled()&&(e.push(s),n.push(s.element)):s&&t.unshift(...s.children())}return this.element.replaceChildren(...n),e}requestFontUpdate(){var t;this.appendedToView(),(t=this.parentTransform())==null||t.requestFontUpdate(),this.applyFont()}getCacheBBox(){return Rt.fromSizeCentered(this.computedSize())}draw(t){if(this.clip()){const e=this.computedSize();if(e.width===0||e.height===0)return;t.beginPath(),t.rect(e.width/-2,e.height/-2,e.width,e.height),t.closePath(),t.clip()}this.drawChildren(t)}drawOverlay(t,e){const n=this.computedSize(),s=n.mul(this.offset()).scale(.5).transformAsPoint(e),o=Rt.fromSizeCentered(n),a=o.transformCorners(e),c=o.addSpacing(this.padding().scale(-1)).transformCorners(e),g=o.addSpacing(this.margin()).transformCorners(e);t.beginPath(),ii(t,g),ii(t,a),t.closePath(),t.fillStyle="rgba(255,193,125,0.6)",t.fill("evenodd"),t.beginPath(),ii(t,a),ii(t,c),t.closePath(),t.fillStyle="rgba(180,255,147,0.6)",t.fill("evenodd"),t.beginPath(),ii(t,a),t.closePath(),t.lineWidth=1,t.strokeStyle="white",t.stroke(),t.beginPath(),ja(t,s),t.stroke()}getOriginDelta(t){const e=this.computedSize().scale(.5),n=this.offset().mul(e);return t===Ue.Middle?n.flipped:Op(t).mul(e).sub(n)}moveOffset(t){const e=this.computedSize().scale(.5),n=this.offset().mul(e),s=t.mul(e);this.offset(t),this.position(this.position().add(s).sub(n))}parsePixels(t){return t===null?"":`${t}px`}parseLength(t){return t===null?"":typeof t=="string"?t:`${t}px`}applyFlex(){this.element.style.position=this.isLayoutRoot()?"absolute":"relative";const t=this.desiredSize();this.element.style.width=this.parseLength(t.x),this.element.style.height=this.parseLength(t.y),this.element.style.maxWidth=this.parseLength(this.maxWidth()),this.element.style.minWidth=this.parseLength(this.minWidth()),this.element.style.maxHeight=this.parseLength(this.maxHeight()),this.element.style.minHeight=this.parseLength(this.minHeight()),this.element.style.aspectRatio=this.ratio()===null?"":this.ratio().toString(),this.element.style.marginTop=this.parsePixels(this.margin.top()),this.element.style.marginBottom=this.parsePixels(this.margin.bottom()),this.element.style.marginLeft=this.parsePixels(this.margin.left()),this.element.style.marginRight=this.parsePixels(this.margin.right()),this.element.style.paddingTop=this.parsePixels(this.padding.top()),this.element.style.paddingBottom=this.parsePixels(this.padding.bottom()),this.element.style.paddingLeft=this.parsePixels(this.padding.left()),this.element.style.paddingRight=this.parsePixels(this.padding.right()),this.element.style.flexDirection=this.direction(),this.element.style.flexBasis=this.parseLength(this.basis()),this.element.style.flexWrap=this.wrap(),this.element.style.justifyContent=this.justifyContent(),this.element.style.alignContent=this.alignContent(),this.element.style.alignItems=this.alignItems(),this.element.style.alignSelf=this.alignSelf(),this.element.style.columnGap=this.parseLength(this.gap.x()),this.element.style.rowGap=this.parseLength(this.gap.y()),this.sizeLockCounter()>0?(this.element.style.flexGrow="0",this.element.style.flexShrink="0"):(this.element.style.flexGrow=this.grow().toString(),this.element.style.flexShrink=this.shrink().toString())}applyFont(){if(this.element.style.fontFamily=this.fontFamily.isInitial()?"":this.fontFamily(),this.element.style.fontSize=this.fontSize.isInitial()?"":`${this.fontSize()}px`,this.element.style.fontStyle=this.fontStyle.isInitial()?"":this.fontStyle(),this.lineHeight.isInitial())this.element.style.lineHeight="";else{const t=this.lineHeight();this.element.style.lineHeight=typeof t=="string"?(parseFloat(t)/100).toString():`${t}px`}if(this.element.style.fontWeight=this.fontWeight.isInitial()?"":this.fontWeight().toString(),this.element.style.letterSpacing=this.letterSpacing.isInitial()?"":`${this.letterSpacing()}px`,this.element.style.textAlign=this.textAlign.isInitial()?"":this.textAlign(),this.textWrap.isInitial())this.element.style.whiteSpace="";else{const t=this.textWrap();typeof t=="boolean"?this.element.style.whiteSpace=t?"normal":"nowrap":this.element.style.whiteSpace=t}}dispose(){var t;super.dispose(),(t=this.sizeLockCounter)==null||t.context.dispose(),this.element&&(this.element.remove(),this.element.innerHTML=""),this.element=null,this.styles=null}hit(t){const e=t.transformAsPoint(this.localToParent().inverse());return this.cacheBBox().includes(e)?super.hit(t)??this:null}};at([k(null),Ea(vp),L()],F.prototype,"layout",void 0);at([k(null),L()],F.prototype,"maxWidth",void 0);at([k(null),L()],F.prototype,"maxHeight",void 0);at([k(null),L()],F.prototype,"minWidth",void 0);at([k(null),L()],F.prototype,"minHeight",void 0);at([k(null),L()],F.prototype,"ratio",void 0);at([_a("margin")],F.prototype,"margin",void 0);at([_a("padding")],F.prototype,"padding",void 0);at([k("row"),L()],F.prototype,"direction",void 0);at([k(null),L()],F.prototype,"basis",void 0);at([k(0),L()],F.prototype,"grow",void 0);at([k(1),L()],F.prototype,"shrink",void 0);at([k("nowrap"),L()],F.prototype,"wrap",void 0);at([k("start"),L()],F.prototype,"justifyContent",void 0);at([k("normal"),L()],F.prototype,"alignContent",void 0);at([k("stretch"),L()],F.prototype,"alignItems",void 0);at([k("auto"),L()],F.prototype,"alignSelf",void 0);at([k(0),hi({x:"columnGap",y:"rowGap"})],F.prototype,"gap",void 0);at([Fi("font-family"),L()],F.prototype,"fontFamily",void 0);at([Fi("font-size",parseFloat),L()],F.prototype,"fontSize",void 0);at([Fi("font-style"),L()],F.prototype,"fontStyle",void 0);at([Fi("font-weight",parseInt),L()],F.prototype,"fontWeight",void 0);at([Fi("line-height",parseFloat),L()],F.prototype,"lineHeight",void 0);at([Fi("letter-spacing",i=>i==="normal"?0:parseFloat(i)),L()],F.prototype,"letterSpacing",void 0);at([Fi("white-space",i=>i==="pre"?"pre":i==="normal"),L()],F.prototype,"textWrap",void 0);at([k("inherit"),L()],F.prototype,"textDirection",void 0);at([Fi("text-align"),L()],F.prototype,"textAlign",void 0);at([k({x:null,y:null}),hi({x:"width",y:"height"})],F.prototype,"size",void 0);at([Ee()],F.prototype,"tweenWidth",null);at([Ee()],F.prototype,"tweenHeight",null);at([ct()],F.prototype,"desiredSize",null);at([Ee()],F.prototype,"tweenSize",null);at([hi("offset")],F.prototype,"offset",void 0);at([ci(Ue.Middle)],F.prototype,"middle",void 0);at([ci(Ue.Top)],F.prototype,"top",void 0);at([ci(Ue.Bottom)],F.prototype,"bottom",void 0);at([ci(Ue.Left)],F.prototype,"left",void 0);at([ci(Ue.Right)],F.prototype,"right",void 0);at([ci(Ue.TopLeft)],F.prototype,"topLeft",void 0);at([ci(Ue.TopRight)],F.prototype,"topRight",void 0);at([ci(Ue.BottomLeft)],F.prototype,"bottomLeft",void 0);at([ci(Ue.BottomRight)],F.prototype,"bottomRight",void 0);at([k(!1),L()],F.prototype,"clip",void 0);at([k(0),L()],F.prototype,"sizeLockCounter",void 0);at([ct()],F.prototype,"parentTransform",null);at([ct()],F.prototype,"anchorPosition",null);at([ct()],F.prototype,"layoutEnabled",null);at([ct()],F.prototype,"isLayoutRoot",null);at([ct()],F.prototype,"scalingRotationMatrix",null);at([ct()],F.prototype,"computedPosition",null);at([ct()],F.prototype,"computedSize",null);at([ct()],F.prototype,"requestLayoutUpdate",null);at([ct()],F.prototype,"appendedToView",null);at([ct()],F.prototype,"updateLayout",null);at([ct()],F.prototype,"layoutChildren",null);at([ct()],F.prototype,"requestFontUpdate",null);at([ct()],F.prototype,"applyFlex",null);at([ct()],F.prototype,"applyFont",null);F=Sr=at([Xn("Layout")],F);function ci(i){return(t,e)=>{L()(t,e),Os(!1)(t,e);const n=xs(t,e);n.parser=s=>new d(s),n.getter=function(){return this.computedSize().getOriginOffset(i).transformAsPoint(this.localToParent())},n.setter=function(s){return this.position(Vs(s,o=>this.getOriginDelta(i).transform(this.scalingRotationMatrix()).flipped.add(o))),this}}}Do(F.prototype,i=>{i.element=document.createElement("div"),i.element.style.display="flex",i.element.style.boxSizing="border-box",i.styles=getComputedStyle(i.element)});var gn=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};let Ae=class extends F{rippleSize(){return wp(this.rippleStrength(),0,50)}constructor(t){super(t),this.rippleStrength=W(0)}applyText(t){t.direction=this.textDirection(),this.element.dir=this.textDirection()}applyStyle(t){t.fillStyle=Ra(this.fill(),t),t.strokeStyle=Ra(this.stroke(),t),t.lineWidth=this.lineWidth(),t.lineJoin=this.lineJoin(),t.lineCap=this.lineCap(),t.setLineDash(this.lineDash()),t.lineDashOffset=this.lineDashOffset(),this.antialiased()||(t.filter="url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxmaWx0ZXIgaWQ9ImZpbHRlciIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jUiB0eXBlPSJpZGVudGl0eSIvPjxmZUZ1bmNHIHR5cGU9ImlkZW50aXR5Ii8+PGZlRnVuY0IgdHlwZT0iaWRlbnRpdHkiLz48ZmVGdW5jQSB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAgMSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj48L2ZpbHRlcj48L3N2Zz4=#filter)")}draw(t){this.drawShape(t),this.clip()&&t.clip(this.getPath()),this.drawChildren(t)}drawShape(t){const e=this.getPath(),n=this.lineWidth()>0&&this.stroke()!==null,s=this.fill()!==null;t.save(),this.applyStyle(t),this.drawRipple(t),this.strokeFirst()?(n&&t.stroke(e),s&&t.fill(e)):(s&&t.fill(e),n&&t.stroke(e)),t.restore()}getCacheBBox(){return super.getCacheBBox().expand(this.lineWidth()/2)}getPath(){return new Path2D}getRipplePath(){return new Path2D}drawRipple(t){const e=this.rippleStrength();if(e>0){const n=this.getRipplePath();t.save(),t.globalAlpha*=_t(.54,0,e),t.fill(n),t.restore()}}*ripple(t=1){this.rippleStrength(0),yield*this.rippleStrength(1,t,is),this.rippleStrength(0)}};gn([Mu()],Ae.prototype,"fill",void 0);gn([Mu()],Ae.prototype,"stroke",void 0);gn([k(!1),L()],Ae.prototype,"strokeFirst",void 0);gn([k(0),L()],Ae.prototype,"lineWidth",void 0);gn([k("miter"),L()],Ae.prototype,"lineJoin",void 0);gn([k("butt"),L()],Ae.prototype,"lineCap",void 0);gn([k([]),L()],Ae.prototype,"lineDash",void 0);gn([k(0),L()],Ae.prototype,"lineDashOffset",void 0);gn([k(!0),L()],Ae.prototype,"antialiased",void 0);gn([ct()],Ae.prototype,"rippleSize",null);gn([ct()],Ae.prototype,"getPath",null);gn([Ee()],Ae.prototype,"ripple",null);Ae=gn([Xn("Shape")],Ae);var Bn=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};let Xe=class extends Ae{desiredSize(){return this.childrenBBox().size}constructor(t){super(t),this.canHaveSubpath=!1}percentageToDistance(t){return He(0,this.baseArcLength(),this.startOffset()+this.offsetArcLength()*t)}distanceToPercentage(t){return(t-this.startOffset())/this.offsetArcLength()}baseArcLength(){return this.profile().arcLength}offsetArcLength(){const t=this.startOffset(),e=this.endOffset(),n=this.baseArcLength();return He(0,n,n-t-e)}arcLength(){return this.offsetArcLength()*Math.abs(this.start()-this.end())}completion(){return Math.abs(this.start()-this.end())}processSubpath(t,e,n){}curveDrawingInfo(){const t=new Path2D;let e=new Path2D;const n=this.profile();let s=this.percentageToDistance(this.start()),o=this.percentageToDistance(this.end());s>o&&([s,o]=[o,s]);const a=o-s,c=Math.min(a/2,this.arrowSize());this.startArrow()&&(s+=c/2),this.endArrow()&&(o-=c/2);let g=0,v=null,A=null,P=null,M=null;for(const G of n.segments){const K=g;if(g+=G.arcLength,g<s)continue;const I=(s-K)/G.arcLength,X=(o-K)/G.arcLength,V=He(0,1,I),ut=He(0,1,X);this.canHaveSubpath&&P&&!G.getPoint(0).position.equals(P)&&(t.addPath(e),this.processSubpath(e,v,P),e=new Path2D,v=null);const[D,tt]=G.draw(e,V,ut,v===null);if(v===null&&(v=D.position,A=D.normal.flipped.perpendicular),P=tt.position,M=tt.normal.flipped.perpendicular,g>o)break}return this.closed()&&this.start.isInitial()&&this.end.isInitial()&&this.startOffset.isInitial()&&this.endOffset.isInitial()&&e.closePath(),this.processSubpath(e,v,P),t.addPath(e),{startPoint:v??d.zero,startTangent:A??d.right,endPoint:P??d.zero,endTangent:M??d.right,arrowSize:c,path:t,startOffset:s}}getPointAtDistance(t){return au(this.profile(),t+this.startOffset())}getPointAtPercentage(t){return au(this.profile(),this.percentageToDistance(t))}getComputedLayout(){return this.offsetComputedLayout(super.getComputedLayout())}offsetComputedLayout(t){return t.position=t.position.sub(this.childrenBBox().center),t}getPath(){return this.curveDrawingInfo().path}getCacheBBox(){const t=this.childrenBBox(),e=this.startArrow()||this.endArrow()?this.arrowSize():0,n=this.lineWidth(),s=this.lineWidthCoefficient();return t.expand(Math.max(0,e,n*s))}lineWidthCoefficient(){return this.lineCap()==="square"?.5*1.4143:.5}requiresProfile(){return!this.start.isInitial()||!this.startOffset.isInitial()||!this.startArrow.isInitial()||!this.end.isInitial()||!this.endOffset.isInitial()||!this.endArrow.isInitial()}drawShape(t){super.drawShape(t),(this.startArrow()||this.endArrow())&&this.drawArrows(t)}drawArrows(t){const{startPoint:e,startTangent:n,endPoint:s,endTangent:o,arrowSize:a}=this.curveDrawingInfo();a<.001||(t.save(),t.beginPath(),this.endArrow()&&this.drawArrow(t,s,o.flipped,a),this.startArrow()&&this.drawArrow(t,e,n,a),t.fillStyle=Ra(this.stroke(),t),t.closePath(),t.fill(),t.restore())}drawArrow(t,e,n,s){const o=n.perpendicular,a=e.add(n.scale(-s/2));Pn(t,a),tn(t,a.add(n.add(o).scale(s))),tn(t,a.add(n.sub(o).scale(s))),tn(t,a),t.closePath()}};Bn([k(!1),L()],Xe.prototype,"closed",void 0);Bn([k(0),L()],Xe.prototype,"start",void 0);Bn([k(0),L()],Xe.prototype,"startOffset",void 0);Bn([k(!1),L()],Xe.prototype,"startArrow",void 0);Bn([k(1),L()],Xe.prototype,"end",void 0);Bn([k(0),L()],Xe.prototype,"endOffset",void 0);Bn([k(!1),L()],Xe.prototype,"endArrow",void 0);Bn([k(24),L()],Xe.prototype,"arrowSize",void 0);Bn([ct()],Xe.prototype,"arcLength",null);Bn([ct()],Xe.prototype,"curveDrawingInfo",null);Xe=Bn([Xn("Curve")],Xe);class Mr{}class $u extends Mr{constructor(t,e,n,s,o){super(),this.center=t,this.radius=e,this.from=n,this.to=s,this.counter=o,this.angle=Math.acos(He(-1,1,n.dot(s))),this.length=Math.abs(this.angle*e);const a=new d(1,1).scale(e);this.points=[t.sub(a),t.add(a)]}get arcLength(){return this.length}draw(t,e,n){const s=this.counter?-1:1,o=this.from.radians+e*this.angle*s,a=this.to.radians-(1-n)*this.angle*s;Math.abs(this.angle)>1e-4&&t.arc(this.center.x,this.center.y,this.radius,o,a,this.counter);const c=d.fromRadians(o),g=d.fromRadians(a);return[{position:this.center.add(c.scale(this.radius)),tangent:this.counter?c:c.flipped,normal:this.counter?c.flipped:c},{position:this.center.add(g.scale(this.radius)),tangent:this.counter?g.flipped:g,normal:this.counter?g.flipped:g}]}getPoint(t){const e=this.counter?-1:1,n=this.from.radians+t*this.angle*e,s=d.fromRadians(n);return{position:this.center.add(s.scale(this.radius)),tangent:this.counter?s:s.flipped,normal:this.counter?s:s.flipped}}}class Ve{static constant(t){return new Ve(t)}static linear(t,e){return new Ve(t,e)}static quadratic(t,e,n){return new Ve(t,e,n)}static cubic(t,e,n,s){return new Ve(t,e,n,s)}get degree(){return this.c3!==0?3:this.c2!==0?2:this.c1!==0?1:0}constructor(t,e,n,s){this.c0=t,this.c1=e??0,this.c2=n??0,this.c3=s??0}differentiate(t=1){switch(t){case 0:return this;case 1:return new Ve(this.c1,2*this.c2,3*this.c3,0);case 2:return new Ve(2*this.c2,6*this.c3,0,0);case 3:return new Ve(6*this.c3,0,0,0);default:throw new Error("Unsupported derivative")}}eval(t,e=0){return e!==0?this.differentiate(e).eval(t):this.c3*(t*t*t)+this.c2*(t*t)+this.c1*t+this.c0}split(t){const e=1-t,n=new Ve(this.c0,this.c1*t,this.c2*t*t,this.c3*t*t*t),s=new Ve(this.eval(0),e*this.differentiate(1).eval(t),e*e/2*this.differentiate(2).eval(t),e*e*e/6*this.differentiate(3).eval(t));return[n,s]}roots(){switch(this.degree){case 3:return this.solveCubicRoots();case 2:return this.solveQuadraticRoots();case 1:return this.solveLinearRoot();case 0:return[];default:throw new Error(`Unsupported polynomial degree: ${this.degree}`)}}localExtrema(){return this.differentiate().roots()}localExtrema01(){const t=this.localExtrema(),e=[];for(let n=0;n<t.length;n++){const s=t[n];s>=0&&s<=1&&e.push(t[n])}return e}outputRange01(){let t=[this.eval(0),this.eval(1)];const e=n=>{t[1]>t[0]?t=[Math.min(t[0],n),Math.max(t[1],n)]:t=[Math.min(t[1],n),Math.max(t[0],n)]};return this.localExtrema01().forEach(n=>e(this.eval(n))),t}solveCubicRoots(){const t=this.c0,e=this.c1,n=this.c2,s=this.c3,o=t*t,a=t*n,c=e*e,g=(3*a-c)/(3*o),v=(2*c*e-9*a*e+27*o*s)/(27*o*t),A=this.solveDepressedCubicRoots(g,v),P=M=>M-e/(3*t);switch(A.length){case 1:return[P(A[0])];case 2:return[P(A[0]),P(A[1])];case 3:return[P(A[0]),P(A[1]),P(A[2])];default:return[]}}solveDepressedCubicRoots(t,e){if(this.almostZero(t))return[Math.cbrt(-e)];const n=Math.PI*2,s=4*t*t*t+27*e*e;if(s<1e-5){const o=2*Math.sqrt(-t/3),a=3*e/(2*t)*Math.sqrt(-3/t),c=g=>o*Math.cos(1/3*Math.acos(He(-1,1,a))-n/3*g);return a>=.9999?[c(0),c(2)]:a<=-.9999?[c(1),c(2)]:[c(0),c(1),c(2)]}if(s>0&&t<0){const o=.3333333333333333*Math.acosh(-3*Math.abs(e)/(2*t)*Math.sqrt(-3/t));return[-2*Math.sign(e)*Math.sqrt(-t/3)*Math.cosh(o)]}if(t>0){const o=.3333333333333333*Math.asinh(3*e/(2*t)*Math.sqrt(3/t));return[-2*Math.sqrt(t/3)*Math.sinh(o)]}return[]}solveQuadraticRoots(){const t=this.c2,e=this.c1,n=this.c0,s=e*e-4*t*n;if(this.almostZero(s))return[-e/(2*t)];if(s>=0){const o=Math.sqrt(s),a=(-e-o)/(2*t),c=(-e+o)/(2*t);return[Math.min(a,c),Math.max(a,c)]}return[]}solveLinearRoot(){return[-this.c0/this.c1]}almostZero(t){return Math.abs(0-t)<=Number.EPSILON}}class Us{constructor(t,e,n,s){this.c0=t,this.c1=e,this.c2=n,this.c3=s,t instanceof Ve?(this.x=t,this.y=e):s!==void 0?(this.x=new Ve(t.x,e.x,n.x,s.x),this.y=new Ve(t.y,e.y,n.y,s.y)):(this.x=new Ve(t.x,e.x,n.x),this.y=new Ve(t.y,e.y,n.y))}eval(t,e=0){return new d(this.x.differentiate(e).eval(t),this.y.differentiate(e).eval(t))}split(t){const[e,n]=this.x.split(t),[s,o]=this.y.split(t);return[new Us(e,s),new Us(n,o)]}differentiate(t=1){return new Us(this.x.differentiate(t),this.y.differentiate(t))}evalDerivative(t){return this.differentiate().eval(t)}getBounds(){const t=this.x.outputRange01(),e=this.y.outputRange01();return Rt.fromPoints(new d(Math.min(...t),Math.max(...e)),new d(Math.max(...t),Math.min(...e)))}}class Up{constructor(t,e=20){this.curve=t,this.sampledDistances=[],this.resample(e)}resample(t){this.sampledDistances=[0];let e=0,n=this.curve.eval(0).position;for(let s=1;s<t;s++){const o=s/(t-1),a=this.curve.eval(o),c=n.sub(a.position).magnitude;e+=c,this.sampledDistances.push(e),n=a.position}this.sampledDistances[this.sampledDistances.length-1]=this.curve.arcLength}pointAtDistance(t){return this.curve.eval(this.distanceToT(t))}distanceToT(t){const e=this.sampledDistances.length;t=He(0,this.curve.arcLength,t);for(let n=0;n<e;n++){const s=this.sampledDistances[n],o=this.sampledDistances[n+1];if(t>=s&&t<=o)return bp(s,o,n/(e-1),(n+1)/(e-1),t)}return 1}}class ku extends Mr{get arcLength(){return this.length}constructor(t,e){super(),this.curve=t,this.length=e,this.pointSampler=new Up(this)}getBBox(){return this.curve.getBounds()}eval(t){const e=this.tangent(t);return{position:this.curve.eval(t),tangent:e,normal:e.perpendicular}}getPoint(t){const e=this.pointSampler.pointAtDistance(this.arcLength*t);return{position:e.position,tangent:e.tangent,normal:e.tangent.perpendicular}}transformPoints(t){return this.points.map(e=>e.transformAsPoint(t))}tangent(t){return this.curve.evalDerivative(t).normalized}draw(t,e=0,n=1,s=!0){let o=null,a=e,c=n,g=this.points;if(e!==0||n!==1){const P=this.length*e,M=this.length*n;a=this.pointSampler.distanceToT(P),c=this.pointSampler.distanceToT(M);const G=(c-a)/(1-a),[,K]=this.split(a);[o]=K.split(G),g=o.points}s&&Pn(t,g[0]),(o??this).doDraw(t);const v=this.tangent(a),A=this.tangent(c);return[{position:g[0],tangent:v,normal:v.perpendicular},{position:g.at(-1),tangent:A,normal:A.perpendicular}]}}var Jp=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};class xn extends ku{get points(){return[this.p0,this.p1,this.p2,this.p3]}constructor(t,e,n,s){super(new Us(t,t.flipped.add(e).scale(3),t.scale(3).sub(e.scale(6)).add(n.scale(3)),t.flipped.add(e.scale(3)).sub(n.scale(3)).add(s)),xn.getLength(t,e,n,s)),this.p0=t,this.p1=e,this.p2=n,this.p3=s}split(t){const e=new d(this.p0.x+(this.p1.x-this.p0.x)*t,this.p0.y+(this.p1.y-this.p0.y)*t),n=new d(this.p1.x+(this.p2.x-this.p1.x)*t,this.p1.y+(this.p2.y-this.p1.y)*t),s=new d(this.p2.x+(this.p3.x-this.p2.x)*t,this.p2.y+(this.p3.y-this.p2.y)*t),o=new d(e.x+(n.x-e.x)*t,e.y+(n.y-e.y)*t),a=new d(n.x+(s.x-n.x)*t,n.y+(s.y-n.y)*t),c=new d(o.x+(a.x-o.x)*t,o.y+(a.y-o.y)*t),g=new xn(this.p0,e,o,c),v=new xn(c,a,s,this.p3);return[g,v]}doDraw(t){Iu(t,this.p1,this.p2,this.p3)}static getLength(t,e,n,s){return xn.el.setAttribute("d",`M ${t.x} ${t.y} C ${e.x} ${e.y} ${n.x} ${n.y} ${s.x} ${s.y}`),xn.el.getTotalLength()}}Jp([eo(()=>document.createElementNS("http://www.w3.org/2000/svg","path"))],xn,"el",void 0);class Di extends Mr{constructor(t,e){super(),this.from=t,this.to=e,this.vector=e.sub(t),this.length=this.vector.magnitude,this.normal=this.vector.perpendicular.normalized.safe,this.points=[t,e]}get arcLength(){return this.length}draw(t,e=0,n=1,s=!1){const o=this.from.add(this.vector.scale(e)),a=this.from.add(this.vector.scale(n));return s&&Pn(t,o),tn(t,a),[{position:o,tangent:this.normal.flipped,normal:this.normal},{position:a,tangent:this.normal,normal:this.normal}]}getPoint(t){return{position:this.from.add(this.vector.scale(t)),tangent:this.normal.flipped,normal:this.normal}}}var Zp=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};class Bi extends ku{get points(){return[this.p0,this.p1,this.p2]}constructor(t,e,n){super(new Us(t,t.flipped.add(e).scale(2),t.sub(e.scale(2)).add(n)),Bi.getLength(t,e,n)),this.p0=t,this.p1=e,this.p2=n}split(t){const e=new d(this.p0.x+(this.p1.x-this.p0.x)*t,this.p0.y+(this.p1.y-this.p0.y)*t),n=new d(this.p1.x+(this.p2.x-this.p1.x)*t,this.p1.y+(this.p2.y-this.p1.y)*t),s=new d(e.x+(n.x-e.x)*t,e.y+(n.y-e.y)*t),o=new Bi(this.p0,e,s),a=new Bi(s,n,this.p2);return[o,a]}static getLength(t,e,n){return Bi.el.setAttribute("d",`M ${t.x} ${t.y} Q ${e.x} ${e.y} ${n.x} ${n.y}`),Bi.el.getTotalLength()}doDraw(t){Bu(t,this.p1,this.p2)}}Zp([eo(()=>document.createElementNS("http://www.w3.org/2000/svg","path"))],Bi,"el",void 0);function lu(i){return i instanceof xn}function Qp(i,t,e,n){if(i.auto.start===0&&i.auto.end===0)return;const s=i.position.sub(t.position).magnitude,o=e.position.sub(i.position).magnitude,a=n*s/(s+o),c=n-a,g=new d(i.position.x-a*(e.position.x-t.position.x),i.position.y-a*(e.position.y-t.position.y)),v=new d(i.position.x+c*(e.position.x-t.position.x),i.position.y+c*(e.position.y-t.position.y));i.startHandle=i.startHandle.lerp(g,i.auto.start),i.endHandle=i.endHandle.lerp(v,i.auto.end)}function Kp(i){for(let t=0;t<i.segments.length;t++){const e=i.segments[t],n=i.segments[(t+1)%i.segments.length];if(!lu(e)||!lu(n))continue;const s=e.p2.sub(e.p3).normalized.safe,o=n.p1.sub(n.p0).normalized.safe,a=s.dot(o);if(!(1-Math.abs(a)>1e-4))continue;const g=Math.acos(He(-1,1,a)),v=Math.sin(g/2);i.minSin=Math.min(i.minSin,Math.abs(v))}}function Xs(i,t,e,n,s){const o=s!==void 0?new xn(t,e,n,s):new Bi(t,e,n);i.segments.push(o),i.arcLength+=o.arcLength}function tf(i,t,e){const n={segments:[],arcLength:0,minSin:1},s=i.length;for(let v=0;v<s;v++){const A=(v-1+s)%s,P=(v+1)%s;Qp(i[v],i[A],i[P],e)}const o=i[0],a=i[1];!t&&o.auto.start===1&&o.auto.end===1?Xs(n,o.position,a.startHandle,a.position):Xs(n,o.position,o.endHandle,a.startHandle,a.position);for(let v=1;v<s-2;v++){const A=i[v],P=i[v+1];Xs(n,A.position,A.endHandle,P.startHandle,P.position)}const c=i.at(-1),g=i.at(-2);return i.length>2&&(!t&&c.auto.start===1&&c.auto.end===1?Xs(n,g.position,g.endHandle,c.position):Xs(n,g.position,g.endHandle,c.startHandle,c.position)),t&&Xs(n,c.position,c.endHandle,o.startHandle,o.position),Kp(n),n}function ef(i,t,e,n){const s={arcLength:0,segments:[],minSin:1},o=Mi(t.top,t.right,t.left,i),a=Mi(t.right,t.top,t.bottom,i),c=Mi(t.bottom,t.left,t.right,i),g=Mi(t.left,t.bottom,t.top,i);let v=new d(i.left+o,i.top),A=new d(i.right-a,i.top);return Ys(s,new Di(v,A)),v=new d(i.right,i.top+a),A=new d(i.right,i.bottom-c),a>0&&Pr(s,v.addX(-a),a,d.down,d.right,e,n),Ys(s,new Di(v,A)),v=new d(i.right-c,i.bottom),A=new d(i.left+g,i.bottom),c>0&&Pr(s,v.addY(-c),c,d.right,d.up,e,n),Ys(s,new Di(v,A)),v=new d(i.left,i.bottom-g),A=new d(i.left,i.top+o),g>0&&Pr(s,v.addX(g),g,d.up,d.left,e,n),Ys(s,new Di(v,A)),v=new d(i.left+o,i.top),o>0&&Pr(s,v.addY(o),o,d.left,d.down,e,n),s}function Ys(i,t){i.segments.push(t),i.arcLength+=t.arcLength}function Pr(i,t,e,n,s,o,a){const c=t.add(n.scale(e)),g=t.add(s.scale(e));o?Ys(i,new xn(c,c.add(s.scale(a*e)),g.add(n.scale(a*e)),g)):Ys(i,new $u(t,e,n,s,!1))}var ko=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};let At=class extends Xe{constructor(t){super(t)}profile(){return ef(this.childrenBBox(),this.radius(),this.smoothCorners(),this.cornerSharpness())}desiredSize(){return{x:this.width.context.getter(),y:this.height.context.getter()}}offsetComputedLayout(t){return t}childrenBBox(){return Rt.fromSizeCentered(this.computedSize())}getPath(){if(this.requiresProfile())return this.curveDrawingInfo().path;const t=new Path2D,e=this.radius(),n=this.smoothCorners(),s=this.cornerSharpness(),o=Rt.fromSizeCentered(this.size());return ou(t,o,e,n,s),t}getCacheBBox(){return super.getCacheBBox().expand(this.rippleSize())}getRipplePath(){const t=new Path2D,e=this.rippleSize(),n=this.radius().addScalar(e),s=this.smoothCorners(),o=this.cornerSharpness(),a=Rt.fromSizeCentered(this.size()).expand(e);return ou(t,a,n,s,o),t}};ko([_a("radius")],At.prototype,"radius",void 0);ko([k(!1),L()],At.prototype,"smoothCorners",void 0);ko([k(.6),L()],At.prototype,"cornerSharpness",void 0);ko([ct()],At.prototype,"profile",null);At=ko([Xn("Rect")],At);var Dr=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o},Aa;let zi=Aa=class extends At{constructor(t){super({composite:!0,fontFamily:"Roboto",fontSize:48,lineHeight:"120%",textWrap:!1,fontStyle:"normal",...t}),this.view2D=this,Aa.shadowRoot.append(this.element),this.applyFlex()}dispose(){this.removeChildren(),super.dispose()}render(t){this.computedSize(),this.computedPosition(),super.render(t)}findKey(t){return Du().getNode(t)??null}requestLayoutUpdate(){this.updateLayout()}requestFontUpdate(){this.applyFont()}view(){return this}};Dr([k(Lo.Paused),L()],zi.prototype,"playbackState",void 0);Dr([L()],zi.prototype,"assetHash",void 0);Dr([eo(()=>{const i="motion-canvas-2d-frame";let t=document.querySelector(`#${i}`);return t||(t=document.createElement("div"),t.id=i,t.style.position="absolute",t.style.pointerEvents="none",t.style.top="0",t.style.left="0",t.style.opacity="0",t.style.overflow="hidden",document.body.prepend(t)),t.shadowRoot??t.attachShadow({mode:"open"})})],zi,"shadowRoot",void 0);zi=Aa=Dr([Xn("View2D")],zi);var nf=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};class Js extends Mr{constructor(t,e,n,s,o,a){super(),this.startPoint=t,this.radius=e,this.xAxisRotationDegree=n,this.largeArcFlag=s,this.sweepFlag=o,this.endPoint=a,this.xAxisRotation=this.xAxisRotationDegree*Li,this.radius=new d(Math.abs(e.x),Math.abs(e.y));const c=t.sub(a).div(2).transform(te.fromRotation(-n).domMatrix),g=c.x*c.x/(e.x*e.x)+c.y*c.y/(e.y*e.y);if(g>1){const G=Math.sqrt(g);e.x=G*e.x,e.y=G*e.y}const v=new d(e.ctg*c.y,e.perpendicular.ctg*c.x).scale(Math.sqrt(1/(c.x*c.x/(e.x*e.x)+c.y*c.y/(e.y*e.y))-1)*(s===o?-1:1));this.xAxisRotationMatrix=te.fromRotation(n).domMatrix,this.center=v.transform(this.xAxisRotationMatrix).add(t.add(a).div(2));const A=c.sub(v).div(e),P=c.scale(-1).sub(v).div(e);this.startAngle=A.radians,this.deltaAngle=d.angleBetween(A,P)%(Math.PI*2),this.sweepFlag===0&&this.deltaAngle>0&&(this.deltaAngle-=Math.PI*2),this.sweepFlag===1&&this.deltaAngle<0&&(this.deltaAngle+=Math.PI*2),Js.el.setAttribute("d",`M ${this.startPoint.x} ${this.startPoint.y} A ${this.radius.x} ${this.radius.y} ${this.xAxisRotationDegree} ${this.largeArcFlag} ${this.sweepFlag} ${this.endPoint.x} ${this.endPoint.y}`),this.length=Js.el.getTotalLength();const M=new Rt(Js.el.getBBox());this.points=[M.topLeft,M.bottomRight]}getAnglePosition(t){return this.radius.mul(d.fromRadians(t)).transform(this.xAxisRotationMatrix).add(this.center)}getAngleDerivative(t){return new d(-this.radius.x*Math.sin(t),this.radius.y*Math.cos(t)).transform(this.xAxisRotationMatrix)}draw(t,e,n,s){const o=this.startAngle+this.deltaAngle*e,a=this.startAngle+this.deltaAngle*n,c=this.getPoint(e),g=this.getPoint(n);return s&&t.moveTo(c.position.x,c.position.y),t.ellipse(this.center.x,this.center.y,this.radius.x,this.radius.y,this.xAxisRotation,o,a,this.sweepFlag===0),[c,g]}getPoint(t){const e=this.startAngle+t*this.deltaAngle,n=this.getAngleDerivative(e).normalized;return{position:t===0?this.startPoint:t===1?this.endPoint:this.getAnglePosition(e),tangent:n,normal:n.perpendicular}}get arcLength(){return this.length}}nf([eo(()=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");return i.appendChild(t),zi.shadowRoot.appendChild(i),t})],Js,"el",void 0);function sf(i,t,e,n,s=!1){const o={arcLength:0,minSin:1,segments:[]};if(e<t){const A=Math.floor((t-e)/(Math.PI*2))+1;e+=Math.PI*2*A}else if(e>t+Math.PI*2){const A=Math.floor((e-t)/(Math.PI*2));e-=Math.PI*2*A}const a=(t+e)/2,c=i.mul(d.fromRadians(t)),g=i.mul(d.fromRadians(e)),v=i.mul(d.fromRadians(a)).scale(s?-1:1);return n&&Ca(o,new Di(d.zero,c)),uu(o,i,c,v,t,a,s),uu(o,i,v,g,a,e,s),n&&Ca(o,new Di(g,d.zero)),o}function Ca(i,t){i.segments.push(t),i.arcLength+=t.arcLength}function uu(i,t,e,n,s,o,a){const c=Math.abs(s-o)<=180?1:0,g=s>o?0:1,v=a?0:1;Ca(i,new Js(e,t,0,0,c^v^g,n))}function of(i,t,e){const n={arcLength:0,segments:[],minSin:1};if(i.length===0)return n;if(e){const a=i[0].add(i[i.length-1]).scale(.5);i=[a,...i,a]}let s=i[0];for(let a=2;a<i.length;a++){const c=i[a-2],g=i[a-1],v=i[a],A=c.sub(g),P=v.sub(g),M=A.normalized.safe,G=P.normalized.safe,K=Math.acos(He(-1,1,M.dot(G))),I=Math.tan(K/2),X=Math.sin(K/2),V=Math.min(t,I*A.magnitude*(a===2?1:.5),I*P.magnitude*(a===i.length-1?1:.5)),ut=X===0?0:V/X,D=I===0?0:V/I,tt=M.add(G).scale(1/2).normalized.safe.scale(ut).add(g),ot=M.perpendicular.dot(G)<0,_=new Di(s,g.add(M.scale(D))),pt=new $u(tt,V,M.perpendicular.scale(ot?1:-1),G.perpendicular.scale(ot?-1:1),ot);_.arcLength>0&&(n.segments.push(_),n.arcLength+=_.arcLength),pt.arcLength>0&&(n.segments.push(pt),n.arcLength+=pt.arcLength),n.minSin=Math.min(n.minSin,Math.abs(X)),s=g.add(G.scale(D))}const o=new Di(s,i[i.length-1]);return o.arcLength>0&&(n.segments.push(o),n.arcLength+=o.arcLength),n}var zo=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};let en=class extends Xe{constructor(t){super(t)}profile(){return sf(this.size().scale(.5),this.startAngle()*Li,this.endAngle()*Li,this.closed(),this.counterclockwise())}desiredSize(){return{x:this.width.context.getter(),y:this.height.context.getter()}}offsetComputedLayout(t){return t}childrenBBox(){return Rt.fromSizeCentered(this.computedSize())}getPath(){return this.requiresProfile()?this.curveDrawingInfo().path:this.createPath()}getRipplePath(){return this.createPath(this.rippleSize())}getCacheBBox(){return super.getCacheBBox().expand(this.rippleSize())}createPath(t=0){const e=new Path2D,n=this.startAngle()*Li;let s=this.endAngle()*Li;const o=this.size().scale(.5).add(t),a=this.closed();if(s>n+Math.PI*2){const c=Math.floor((s-n)/(Math.PI*2));s-=Math.PI*2*c}return a&&e.moveTo(0,0),e.ellipse(0,0,o.x,o.y,0,n,s,this.counterclockwise()),a&&e.closePath(),e}};zo([k(0),L()],en.prototype,"startAngle",void 0);zo([k(360),L()],en.prototype,"endAngle",void 0);zo([k(!1),L()],en.prototype,"counterclockwise",void 0);zo([ct()],en.prototype,"profile",null);en=zo([Xn("Circle")],en);var $r=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};class fe extends ${get startHandleAuto(){return this.auto.startHandle}get endHandleAuto(){return this.auto.endHandle}constructor(t){super(t.startHandle===void 0&&t.endHandle===void 0?{auto:1,...t}:t)}points(){const t=!this.startHandle.isInitial()||!this.endHandle.isInitial(),e=t?this.startHandle():d.zero,n=t?this.endHandle():d.zero;return{position:this.position(),startHandle:e.transformAsPoint(this.localToParent()),endHandle:n.transformAsPoint(this.localToParent()),auto:{start:this.startHandleAuto(),end:this.endHandleAuto()}}}getDefaultEndHandle(){return this.startHandle().flipped}getDefaultStartHandle(){return this.endHandle().flipped}}$r([Ss(d),L()],fe.prototype,"startHandle",void 0);$r([Ss(d),L()],fe.prototype,"endHandle",void 0);$r([Os(!1),k(()=>({startHandle:0,endHandle:0})),Fa(i=>typeof i=="object"&&!Array.isArray(i)?i:(typeof i=="number"&&(i=[i,i]),{startHandle:i[0],endHandle:i[1]})),Wa({startHandle:"startHandleAuto",endHandle:"endHandleAuto"})],fe.prototype,"auto",void 0);$r([ct()],fe.prototype,"points",null);function rf(i){return i.reduce((t,e,n)=>n?t+i[n-1].sub(e).magnitude:0,0)}function ba(i,t,e){const n=i.length;let s=0;for(let o=0;o<t.length;o+=1){const a=i[(e+o)%n],c=t[o];s+=a.sub(c).squaredMagnitude}return s}function af(i,t,e){const n=[];if(e===0)return[...i];if(e===1)return[...t];for(let s=0;s<i.length;s++){const o=i[s],a=t[s];n.push(d.lerp(o,a,e))}return n}var Rs=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o},Or;let li=Or=class extends Xe{static rotatePoints(t,e,n){if(n){let s=1/0,o=0;for(let a=0;a<t.length;a+=1){const c=ba(t,e,a);c<s&&(s=c,o=a)}if(o){const a=t.splice(0,o);t.splice(t.length,0,...a)}}else{const s=ba(t,e,0),o=[...t].reverse();ba(o,e,0)<s&&t.reverse()}}static distributePoints(t,e){if(t.length===0){for(let c=0;c<e;c++)t.push(d.zero);return}if(t.length===1){const c=t[0];for(let g=0;g<e;g++)t.push(c);return}const n=t.length+e,s=rf(t);let o=e/s,a=0;for(;t.length<n;){const c=n-t.length;if(a+1>=t.length){o=c/s,a=0;continue}const g=t[a],v=t[a+1],A=g.sub(v).magnitude,P=Math.min(Math.round(A*o),c)+1;for(let M=1;M<P;M++)t.splice(++a,0,d.lerp(g,v,M/P));a++}}*tweenPoints(t,e,n){const s=[...this.parsedPoints()],o=this.parsePoints(ri(t)),a=this.closed(),c=s.length-o.length;Or.distributePoints(c<0?s:o,Math.abs(c)),Or.rotatePoints(o,s,a),this.tweenedPoints(s),yield*qs(e,g=>{const v=n(g);this.tweenedPoints(af(s,o,v))},()=>{this.tweenedPoints(null),this.points(t)})}constructor(t){super(t),this.tweenedPoints=W(null),t.children===void 0&&t.points===void 0&&de().warn({message:"No points specified for the line",remarks:`<p>The line won&#39;t be visible unless you specify at least two points:</p>
<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span>
  stroke=<span class="hljs-string">&quot;#fff&quot;</span>
  lineWidth={<span class="hljs-number">8</span>}
  points={[
    [<span class="hljs-number">100</span>, <span class="hljs-number">0</span>],
    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
    [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],
  ]}
/&gt;
</code></pre><p>Alternatively, you can define the points using the children:</p>
<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span> stroke=<span class="hljs-string">&quot;#fff&quot;</span> lineWidth={<span class="hljs-number">8</span>}&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> <span class="hljs-attr">x</span>=<span class="hljs-string">{100}</span> /&gt;</span></span>
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> /&gt;</span></span>
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> <span class="hljs-attr">y</span>=<span class="hljs-string">{100}</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">Line</span>&gt;
</code></pre><p>If you did this intentionally, and want to disable this message, set the
<code>points</code> property to <code>null</code>:</p>
<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span> stroke=<span class="hljs-string">&quot;#fff&quot;</span> lineWidth={<span class="hljs-number">8</span>} points={<span class="hljs-literal">null</span>} /&gt;
</code></pre>`,inspect:this.key})}childrenBBox(){let t=this.tweenedPoints();if(!t){const e=this.points();t=e?e.map(n=>new d(ri(n))):this.children().filter(n=>!(n instanceof F)||n.isLayoutRoot()).map(n=>n.position())}return Rt.fromPoints(...t)}parsedPoints(){return this.parsePoints(this.points())}profile(){return of(this.tweenedPoints()??this.parsedPoints(),this.radius(),this.closed())}lineWidthCoefficient(){const t=this.radius(),e=this.lineJoin();let n=super.lineWidthCoefficient();if(t===0&&e==="miter"){const{minSin:s}=this.profile();s>0&&(n=Math.max(n,.5/s))}return n}drawOverlay(t,e){const n=this.childrenBBox().transformCorners(e),o=this.computedSize().mul(this.offset()).scale(.5).transformAsPoint(e);t.fillStyle="white",t.strokeStyle="black",t.lineWidth=1;const a=new Path2D,c=(this.tweenedPoints()??this.parsedPoints()).map(g=>g.transformAsPoint(e));if(c.length>0){Pn(a,c[0]);for(const g of c)tn(a,g),t.beginPath(),Io(t,g,4),t.closePath(),t.fill(),t.stroke()}t.strokeStyle="white",t.stroke(a),t.beginPath(),ja(t,o),t.stroke(),t.beginPath(),ii(t,n),t.closePath(),t.stroke()}parsePoints(t){return t?t.map(e=>new d(ri(e))):this.children().map(e=>e.position())}};Rs([k(0),L()],li.prototype,"radius",void 0);Rs([k(null),L()],li.prototype,"points",void 0);Rs([Ee()],li.prototype,"tweenPoints",null);Rs([ct()],li.prototype,"childrenBBox",null);Rs([ct()],li.prototype,"parsedPoints",null);Rs([ct()],li.prototype,"profile",null);li=Or=Rs([Xn("Line")],li);var lf=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};class zu extends Ae{constructor(t){super(t)}getPath(){const t=new Path2D,e=this.sides(),n=Rt.fromSizeCentered(this.size());return ru(t,n,e),t}getRipplePath(){const t=new Path2D,e=this.sides(),n=this.rippleSize(),s=Rt.fromSizeCentered(this.size()).expand(n);return ru(t,s,e),t}}lf([k(6),L()],zu.prototype,"sides",void 0);var no=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o};class ui extends Xe{constructor(t){super(t),(t.children===void 0||!Array.isArray(t.children)||t.children.length<2)&&(t.points===void 0||t.points.length<2)&&t.spawner===void 0&&de().warn({message:"Insufficient number of knots specified for spline. A spline needs at least two knots.",remarks:`<p>The spline won&#39;t be visible unless you specify at least two knots:</p>
<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Spline</span>
  stroke=<span class="hljs-string">&quot;#fff&quot;</span>
  lineWidth={<span class="hljs-number">8</span>}
  points={[
    [<span class="hljs-number">100</span>, <span class="hljs-number">0</span>],
    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
    [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],
  ]}
/&gt;
</code></pre><p>For more control over the knot handles, you can alternatively provide the knots
as children to the spline using the <code>Knot</code> component:</p>
<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Spline</span> stroke=<span class="hljs-string">&quot;#fff&quot;</span> lineWidth={<span class="hljs-number">8</span>}&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Knot</span> <span class="hljs-attr">x</span>=<span class="hljs-string">{100}</span> <span class="hljs-attr">endHandle</span>=<span class="hljs-string">{[-50,</span> <span class="hljs-attr">0</span>]} /&gt;</span></span>
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Knot</span> /&gt;</span></span>
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Knot</span> <span class="hljs-attr">y</span>=<span class="hljs-string">{100}</span> <span class="hljs-attr">startHandle</span>=<span class="hljs-string">{[-100,</span> <span class="hljs-attr">50</span>]} /&gt;</span></span>
&lt;/<span class="hljs-title class_">Spline</span>&gt;
</code></pre>`,inspect:this.key})}profile(){return tf(this.knots(),this.closed(),this.smoothness())}knots(){const t=this.points();return t?t.map(e=>{const n=new d(ri(e));return{position:n,startHandle:n,endHandle:n,auto:{start:1,end:1}}}):this.children().filter(this.isKnot).map(e=>e.points())}childrenBBox(){const t=this.profile().segments.flatMap(e=>e.points);return Rt.fromPoints(...t)}lineWidthCoefficient(){const t=this.lineJoin();let e=super.lineWidthCoefficient();if(t!=="miter")return e;const{minSin:n}=this.profile();return n>0&&(e=Math.max(e,.5/n)),e}desiredSize(){return this.getTightBBox().size}offsetComputedLayout(t){return t.position=t.position.sub(this.getTightBBox().center),t}getTightBBox(){const t=this.profile().segments.map(e=>e.getBBox());return Rt.fromBBoxes(...t)}drawOverlay(t,e){const n=this.computedSize(),s=this.childrenBBox().transformCorners(e),o=n.mul(this.offset()).scale(.5).transformAsPoint(e),a=this.profile().segments;t.lineWidth=1,t.strokeStyle="white",t.fillStyle="white";const c=new Path2D;for(let g=0;g<a.length;g++){const v=a[g],[A,P,M,G]=v.transformPoints(e);Pn(c,A),v instanceof xn?Iu(c,P,M,G):Bu(c,P,M)}t.stroke(c);for(let g=0;g<a.length;g++){const v=a[g];t.fillStyle="white";const[A,P,M,G]=v.transformPoints(e),K=new Path2D;t.globalAlpha=.5,Pn(K,A),tn(K,P),v instanceof xn?(Pn(K,M),tn(K,G),t.beginPath(),t.stroke(K)):(tn(K,M),t.beginPath(),t.stroke(K)),t.globalAlpha=1,t.lineWidth=2,Pn(t,A),t.beginPath(),Io(t,A,4),t.closePath(),t.stroke(),t.fill(),g===a.length-1&&G!==void 0&&(Pn(t,G),t.beginPath(),Io(t,G,4),t.closePath(),t.stroke(),t.fill()),t.fillStyle="black";for(const I of[P,M])I.magnitude>0&&(Pn(t,I),t.beginPath(),Io(t,I,4),t.closePath(),t.fill(),t.stroke())}t.lineWidth=1,t.beginPath(),ja(t,o),t.stroke(),t.beginPath(),ii(t,s),t.closePath(),t.stroke()}isKnot(t){return t instanceof fe}}no([k(.4),L()],ui.prototype,"smoothness",void 0);no([k(null),L()],ui.prototype,"points",void 0);no([ct()],ui.prototype,"profile",null);no([ct()],ui.prototype,"knots",null);no([ct()],ui.prototype,"childrenBBox",null);no([ct()],ui.prototype,"getTightBBox",null);var Eo=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o},Rr;let Sn=Rr=class extends Ae{constructor({children:t,...e}){super(e),t&&this.text(t)}parentTxt(){const t=this.parent();return t instanceof q?t:null}draw(t){this.requestFontUpdate(),this.applyStyle(t),this.applyText(t),t.font=this.styles.font,"letterSpacing"in t&&(t.letterSpacing=`${this.letterSpacing()}px`);const e=this.element.getBoundingClientRect(),{width:n,height:s}=this.size(),o=document.createRange();let a="";const c=new Rt;for(const g of this.element.childNodes){if(!g.textContent)continue;o.selectNodeContents(g);const v=o.getBoundingClientRect(),A=n/-2+v.left-e.left,P=s/-2+v.top-e.top;c.y===P?(c.width+=v.width,a+=g.textContent):(this.drawText(t,a,c),c.x=A,c.y=P,c.width=v.width,c.height=v.height,a=g.textContent)}this.drawText(t,a,c)}drawText(t,e,n){const s=n.y+n.height/2;t.save(),t.textBaseline="middle",e=e.replace(/\s+/g," "),this.lineWidth()<=0?t.fillText(e,n.x,s):this.strokeFirst()?(t.strokeText(e,n.x,s),t.fillText(e,n.x,s)):(t.fillText(e,n.x,s),t.strokeText(e,n.x,s)),t.restore()}getCacheBBox(){const t=this.computedSize(),e=document.createRange();e.selectNodeContents(this.element);const n=e.getBoundingClientRect(),s=this.lineWidth(),o=this.lineJoin()==="miter"?.5*10:.5;return new Rt(-t.width/2,-t.height/2,n.width,n.height).expand(s*o)}applyFlex(){super.applyFlex(),this.element.style.display="inline"}updateLayout(){if(this.applyFont(),this.applyFlex(),this.justifyContent.isInitial()&&(this.element.style.justifyContent=this.styles.getPropertyValue("text-align")),this.styles.whiteSpace!=="nowrap"&&this.styles.whiteSpace!=="pre")if(this.element.innerText="",Rr.segmenter)for(const e of Rr.segmenter.segment(this.text()))this.element.appendChild(document.createTextNode(e.segment));else for(const e of this.text().split(""))this.element.appendChild(document.createTextNode(e));else if(this.styles.whiteSpace==="pre"){this.element.innerText="";for(const e of this.text().split(`
`))this.element.appendChild(document.createTextNode(e+`
`))}else this.element.innerText=this.text()}};Eo([k(""),Ea(xu),L()],Sn.prototype,"text",void 0);Eo([ct()],Sn.prototype,"parentTxt",null);Eo([eo(()=>{const i=document.createElement("span");return zi.shadowRoot.append(i),i})],Sn,"formatter",void 0);Eo([eo(()=>{try{return new Intl.Segmenter(void 0,{granularity:"grapheme"})}catch{return null}})],Sn,"segmenter",void 0);Sn=Rr=Eo([Xn("TxtLeaf")],Sn);["fill","stroke","lineWidth","strokeFirst","lineCap","lineJoin","lineDash","lineDashOffset"].forEach(i=>{Sn.prototype[`get${vs(i)}`]=function(){var t;return((t=this.parentTxt())==null?void 0:t[i]())??this[i].context.getInitial()}});var Fo=globalThis&&globalThis.__decorate||function(i,t,e,n){var s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,e,n);else for(var c=i.length-1;c>=0;c--)(a=i[c])&&(o=(s<3?a(o):s>3?a(t,e,o):a(t,e))||o);return s>3&&o&&Object.defineProperty(t,e,o),o},ns;let q=ns=class extends Ae{static b(t){return new ns({...t,fontWeight:700})}static i(t){return new ns({...t,fontStyle:"italic"})}getText(){return this.innerText()}setText(t){const e=this.children();let n=null;for(let s=0;s<e.length;s++){const o=e[s];n===null&&o instanceof Sn?n=o:o.parent(null)}n===null?(n=new Sn({text:t}),n.parent(this)):n.text(t),this.setParsedChildren([n])}setChildren(t){this.children.context.raw()!==t&&(typeof t=="string"?this.text(t):super.setChildren(t))}*tweenText(t,e,n,s){const o=this.children();(o.length!==1||!(o[0]instanceof Sn))&&this.text.save();const a=this.childAs(0),c=a.text.context.raw(),g=this.size.context.raw();a.text(t);const v=this.size();a.text(c??Pa),this.height()===0&&this.height(v.height),yield*Q(this.size(v,e,n),a.text(t,e,n,s)),this.children.context.setter(t),this.size(g)}getLayout(){return!0}constructor({children:t,text:e,...n}){super(n),this.children(e??t)}innerText(){const t=this.childrenAs();let e="";for(const n of t)e+=n.text();return e}parentTxt(){const t=this.parent();return t instanceof ns?t:null}parseChildren(t){const e=[],n=Array.isArray(t)?t:[t];for(const s of n)s instanceof ns||s instanceof Sn?e.push(s):typeof s=="string"&&e.push(new Sn({text:s}));return e}applyFlex(){super.applyFlex(),this.element.style.display=this.findAncestor(Lu(ns))?"inline":"block"}draw(t){this.drawChildren(t)}};Fo([k(""),L()],q.prototype,"text",void 0);Fo([Ee()],q.prototype,"tweenText",null);Fo([ct()],q.prototype,"innerText",null);Fo([ct()],q.prototype,"parentTxt",null);q=ns=Fo([Xn("Txt")],q);["fill","stroke","lineWidth","strokeFirst","lineCap","lineJoin","lineDash","lineDashOffset"].forEach(i=>{q.prototype[`getDefault${vs(i)}`]=function(t){var e;return((e=this.parentTxt())==null?void 0:e[i]())??t}});class uf extends mp{constructor(t){super(t),this.view=null,this.registeredNodes=new Map,this.nodeCounters=new Map,this.assetHash=Date.now().toString(),this.recreateView()}getView(){return this.view}next(){var t;return(t=this.getView())==null||t.playbackState(this.playback.state),super.next()}draw(t){t.save(),this.renderLifecycle.dispatch([Nn.BeforeRender,t]),t.save(),this.renderLifecycle.dispatch([Nn.BeginRender,t]),this.getView().playbackState(this.playback.state),this.getView().render(t),this.renderLifecycle.dispatch([Nn.FinishRender,t]),t.restore(),this.renderLifecycle.dispatch([Nn.AfterRender,t]),t.restore()}reset(t){for(const e of this.registeredNodes.keys())try{this.registeredNodes.get(e).dispose()}catch(n){this.logger.error(n)}return this.registeredNodes.clear(),this.registeredNodes=new Map,this.nodeCounters.clear(),this.recreateView(),super.reset(t)}inspectPosition(t,e){return this.execute(()=>{var n;return((n=this.getView().hit(new d(t,e)))==null?void 0:n.key)??null})}validateInspection(t){var e;return((e=this.getNode(t))==null?void 0:e.key)??null}inspectAttributes(t){const e=this.getNode(t);if(!e)return null;const n={stack:e.creationStack,key:e.key};for(const{key:s,meta:o,signal:a}of e)o.inspectable&&(n[s]=a());return n}drawOverlay(t,e,n){const s=this.getNode(t);s&&this.execute(()=>{s.drawOverlay(n,e.multiply(s.localToWorld()))})}transformMousePosition(t,e){return new d(t,e).transformAsPoint(this.getView().localToParent().inverse())}registerNode(t,e){var a;const n=((a=t.constructor)==null?void 0:a.name)??"unknown",s=(this.nodeCounters.get(n)??0)+1;this.nodeCounters.set(n,s),e&&this.registeredNodes.has(e)&&(de().error({message:`Duplicated node key: "${e}".`,inspect:e,stack:new Error().stack}),e=void 0),e??(e=`${this.name}/${n}[${s}]`),this.registeredNodes.set(e,t);const o=this.registeredNodes;return[e,()=>o.delete(e)]}getNode(t){return typeof t!="string"?null:this.registeredNodes.get(t)??null}*getDetachedNodes(){for(const t of this.registeredNodes.values())!t.parent()&&t!==this.view&&(yield t)}recreateView(){this.execute(()=>{const t=this.getSize();this.view=new zi({position:t.scale(this.resolutionScale/2),scale:this.resolutionScale,assetHash:this.assetHash,size:t})})}}function nn(i){return{klass:uf,config:i,stack:new Error().stack,meta:yp(),plugins:["@motion-canvas/2d/editor"]}}const sn="#2c2938",Jt="#ffff66",ee="#535353",Ge="#888888",Y="#cccccc",hf="#cccccc",cf="#444444",pf=Ge,Ps=20,we=7,hu=15,cu=5,Ta=we+1,pu=5,As=.5,fu=50,ff=25,Z=700,Yn=20,Wn=15,re=99999,ss=nn(function*(i){i.fill(sn),i.add(l(lt,{children:[l(q,{position:[0,-100],fontSize:100,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Rocks Into Computers"}),l(q,{position:[0,100],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"An over engineered presentation by Jacob Hansmann"})]})),yield*U("title")});ss.name="title";Fp.attach(ss.meta);ss.onReplaced??(ss.onReplaced=new ge(ss.config));let Ha;Ha??(Ha=new Ce("siliconDisclaimer",!1));Ha.loadData({version:0,timeEvents:[],seed:402488104});const df=Ha,os=nn(function*(i){i.fill(sn),i.add(l(lt,{children:l(q,{position:[0,0],fontSize:70,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"We're not gonna go over how silicon itself works."})})),yield*dn(ne.Right,1),yield*U("silicon disclaimer")});os.name="siliconDisclaimer";df.attach(os.meta);os.onReplaced??(os.onReplaced=new ge(os.config));let Ga;Ga??(Ga=new Ce("notGate",!1));Ga.loadData({version:0,timeEvents:[],seed:402488104});const gf=Ga;var mf=Object.defineProperty,yf=Object.getOwnPropertyDescriptor,vf=(i,t,e,n)=>{for(var s=n>1?void 0:n?yf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&mf(t,e,s),s};class ai extends ${constructor(t){super({...t}),this.output=W(()=>!this.inputA()),this.inputPos=new d(0,50).transformAsPoint(this.localToWorld()),this.outputPos=new d(0,-54).transformAsPoint(this.localToWorld()),this.add(l(lt,{children:[l(zu,{fill:Ge,y:20,size:120,sides:3,lineWidth:we,stroke:()=>this.output()?Jt:ee,lineJoin:"round"}),l(en,{stroke:()=>this.output()?Jt:ee,size:Ps,y:-45,fill:Ge,lineWidth:we}),l(q,{text:"NOT",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z,y:25})]}))}}vf([k(!1),L()],ai.prototype,"inputA",2);var bf=Object.defineProperty,wf=Object.getOwnPropertyDescriptor,Xa=(i,t,e,n)=>{for(var s=n>1?void 0:n?wf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&bf(t,e,s),s};class H extends ${constructor(t){super({...t}),this.add(l(lt,{children:l(At,{minHeight:fu,minWidth:this.minWidth||fu,padding:[0,15],radius:50,stroke:()=>this.powered()?Jt:pf,fill:()=>this.powered()?Jt:ee,lineWidth:we,layout:!0,justifyContent:"center",children:l(q,{text:this.name(),fill:()=>this.powered()?ee:Y,fontFamily:"Helvetica",fontSize:ff,fontWeight:Z,alignSelf:"center"})})}))}}Xa([k("input"),L()],H.prototype,"name",2);Xa([k(!1),L()],H.prototype,"powered",2);Xa([k(0),L()],H.prototype,"minWidth",2);var Pf=Object.defineProperty,xf=Object.getOwnPropertyDescriptor,Wo=(i,t,e,n)=>{for(var s=n>1?void 0:n?xf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&Pf(t,e,s),s};class O extends ${constructor(t){super({...t}),this.wireLine=C(),this.progress=W(0),this.getLen=function(){let e=0,n=this.points();for(var s=1;s<n.length;s++){let o=new d(n[s]),a=new d(n[s-1]);e+=Math.abs(o.x-a.x)+Math.abs(o.y-a.y)}return e},this.speed=.5,this.spacing=1,this.spacingForMath=(this.spacing+1)*Ta,this.totalDots=Math.round(this.getLen()/this.spacingForMath),this.percentage=1/this.totalDots,this.add(l(lt,{children:[l(li,{lineCap:"round",ref:this.wireLine,lineWidth:we,stroke:()=>this.isSolid()&&this.powered()?Jt:ee,children:this.points().map(e=>l(fe,{position:e}))}),!this.isSolid()&&gt(this.totalDots).map(e=>l(en,{opacity:()=>this.powered()?1:0,size:Ta,fill:Jt,position:()=>this.wireLine().getPointAtPercentage(this.progress()+this.percentage*e).position})),this.jointStart()&&l(en,{size:hu,lineWidth:cu,fill:()=>this.powered()?Jt:ee,stroke:()=>this.powered()?Jt:ee,position:this.points()[0]}),this.jointEnd()&&l(en,{size:hu,lineWidth:cu,fill:()=>this.powered()?Jt:ee,stroke:()=>this.powered()?Jt:ee,position:this.points()[this.points().length-1]})]}))}*animate(){yield*this.progress(this.percentage,this.speed,is).to(0,0)}}Wo([k([[0,0],[0,0]]),L()],O.prototype,"points",2);Wo([k(!1),L()],O.prototype,"powered",2);Wo([k(!1),L()],O.prototype,"jointStart",2);Wo([k(!1),L()],O.prototype,"jointEnd",2);Wo([k(!1),L()],O.prototype,"isSolid",2);var Sf=Object.defineProperty,Of=Object.getOwnPropertyDescriptor,Ya=(i,t,e,n)=>{for(var s=n>1?void 0:n?Of(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&Sf(t,e,s),s};class ie extends ${constructor(t){super({...t}),this.outputRow=W(()=>this.columnData()[this.currentOutputLine()]),this.currentOutputLine=W(0),this.cellHeight=38,this.table=C(),this.selector=C(),this.makeCell=function(e,n){return l(At,{padding:[0,10],y:e,height:this.cellHeight,fill:hf,stroke:ee,lineWidth:pu,layout:!0,justifyContent:"center",children:l(q,{text:n??"",alignSelf:"center",fill:cf,fontFamily:"Helvetica",fontSize:30,fontWeight:Z})})},this.getSelectorY=e=>e*this.cellHeight-this.columnData().length*this.cellHeight/2+this.cellHeight,this.add(l(lt,{children:[l(F,{ref:this.table,direction:"row",gap:0,layout:!0,spawner:()=>gt(this.columnNames().length).flatMap(e=>l(F,{direction:"column",gap:0,layout:!0,spawner:()=>[this.makeCell(0,this.columnNames()[e]),...gt(this.columnData().length).flatMap(n=>this.makeCell(this.cellHeight*(e+1),this.columnData()[n][e]))]}))}),l(At,{opacity:()=>this.hasSelector()?1:0,ref:this.selector,radius:5,position:()=>[0,this.getSelectorY(this.currentOutputLine())],width:()=>this.table().width()+5,height:this.cellHeight+5,stroke:Jt,lineWidth:pu})]}))}*select(t,e){this.hasSelector()?yield*this.selector().position.y(this.getSelectorY(t),e,Ou):yield*yt(e),this.currentOutputLine(t)}}Ya([k([]),L()],ie.prototype,"columnNames",2);Ya([k([]),L()],ie.prototype,"columnData",2);Ya([k(!0),L()],ie.prototype,"hasSelector",2);const rs=nn(function*(i){const t=C(),e=C(),n=W(()=>e().outputRow()[0]==1),s=[];i.fill(sn),i.add(l(lt,{children:[l(q,{position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"The NOT Gate"}),l(ie,{ref:e,position:[100,0],columnNames:["In","Out"],columnData:[[0,1],[1,0]]}),l(ai,{ref:t,position:[-100,0],inputA:n}),l(H,{powered:n,name:"In",position:[-100,150]}),l(H,{powered:t().output,name:"Out",position:[-100,-150]}),l(O,{ref:w(s,s.length),powered:n,points:[[-100,150],t().inputPos]}),l(O,{ref:w(s,s.length),powered:t().output,points:[t().outputPos,[-100,-150]]})]})),s.reverse().forEach(c=>c.moveToBottom());const o=yield Ht(re,function*(){yield*Q(...s.map(c=>c.animate()))});yield*dn(ne.Right,1),yt(.5);const a=yield Ht(re,function*(){let c=(e().currentOutputLine()+1)%e().columnData().length;yield*e().select(c,As),yield*yt(1)});yield*U("not gate"),_n(),yield*yt(1),ue(o),ue(a)});rs.name="notGate";gf.attach(rs.meta);rs.onReplaced??(rs.onReplaced=new ge(rs.config));let qa;qa??(qa=new Ce("andGates",!1));qa.loadData({version:0,timeEvents:[],seed:402488104});const Rf=qa;var Af=Object.defineProperty,Cf=Object.getOwnPropertyDescriptor,Va=(i,t,e,n)=>{for(var s=n>1?void 0:n?Cf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&Af(t,e,s),s};class _e extends ${constructor(t){super({...t}),this.output=W(()=>{let e=this.inputA()&&this.inputB();return this.isNAND()?!e:e}),this.getOutputPos=()=>this.isNAND()?new d(0,-35-Ps):new d(0,-35),this.inputAPos=new d(-22,55).transformAsPoint(this.localToWorld()),this.inputBPos=new d(22,55).transformAsPoint(this.localToWorld()),this.outputPos=this.getOutputPos().transformAsPoint(this.localToWorld()),this.add(l(lt,{children:[l(At,{fill:Ge,y:31,width:90,height:50,lineWidth:we,stroke:()=>this.output()?Jt:ee,lineJoin:"round"}),l(en,{fill:Ge,size:90,y:10,lineWidth:we,stroke:()=>this.output()?Jt:ee,startAngle:180}),this.isNAND()&&l(en,{fill:Ge,size:Ps,y:-45,lineWidth:we,stroke:()=>this.output()?Jt:ee}),l(q,{text:this.isNAND()?"NAND":"AND",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z,y:17})]}))}}Va([k(!1),L()],_e.prototype,"inputA",2);Va([k(!1),L()],_e.prototype,"inputB",2);Va([k(!1),L()],_e.prototype,"isNAND",2);const as=nn(function*(i){const t=C(),e=[],n=C(),s=C(),o=C(),a=C(),c=W(()=>e[0].outputRow()[0]==1),g=W(()=>e[0].outputRow()[1]==1),v=W(()=>e[1].outputRow()[0]==1),A=W(()=>e[1].outputRow()[1]==1),P=[];i.fill(sn),i.add(l(lt,{children:[l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"The AND Gate"}),l(F,{ref:o,children:[l(ie,{ref:w(e,e.length),position:[100,0],columnNames:["A","B","Out"],columnData:[[0,0,0],[1,0,0],[0,1,0],[1,1,1]]}),l(_e,{ref:n,position:[-100,-20],inputA:c,inputB:g}),l(H,{powered:c,name:"A",position:[n().inputAPos.x-20,150]}),l(H,{powered:g,name:"B",position:[n().inputBPos.x+20,150]}),l(H,{powered:n().output,name:"Out",position:[-100,-150]}),l(O,{ref:w(P,P.length),powered:c,points:[[n().inputAPos.x-20,150],[n().inputAPos.x-20,90],[n().inputAPos.x,90],n().inputAPos]}),l(O,{ref:w(P,P.length),powered:g,points:[[n().inputBPos.x+20,150],[n().inputBPos.x+20,90],[n().inputBPos.x,90],n().inputBPos]}),l(O,{ref:w(P,P.length),powered:n().output,points:[n().outputPos,[-100,-150]]})]}),l(F,{ref:a,position:[300,0],opacity:0,children:[l(ie,{ref:w(e,e.length),position:[100,0],columnNames:["A","B","Out"],columnData:[[0,0,1],[1,0,1],[0,1,1],[1,1,0]]}),l(_e,{ref:s,isNAND:!0,position:[-100,-20],inputA:v,inputB:A}),l(H,{powered:v,name:"A",position:[s().inputAPos.x-20,150]}),l(H,{powered:A,name:"B",position:[s().inputBPos.x+20,150]}),l(H,{powered:s().output,name:"Out",position:[-100,-150]}),l(O,{ref:w(P,P.length),powered:v,points:[[s().inputAPos.x-20,150],[s().inputAPos.x-20,90],[s().inputAPos.x,90],s().inputAPos]}),l(O,{ref:w(P,P.length),powered:A,points:[[s().inputBPos.x+20,150],[s().inputBPos.x+20,90],[s().inputBPos.x,90],s().inputBPos]}),l(O,{ref:w(P,P.length),powered:s().output,points:[s().outputPos,[-100,-150]]})]})]})),P.reverse().forEach(K=>K.moveToBottom());const M=yield Ht(re,function*(){yield*Q(...P.map(K=>K.animate()))});yield*dn(ne.Right,1),yt(.5);const G=yield Ht(re,function*(){yield*Q(...e.map(K=>{let I=(K.currentOutputLine()+1)%K.columnData().length;return K.select(I,As)})),yield*yt(1)});yield*U("and gate"),yield*Q(t().text("The NAND Gate",1),o().position.x(-300,1),a().opacity(1,1)),yield*U("nand gate"),_n(),yield*yt(1),ue(M),ue(G)});as.name="andGates";Rf.attach(as.meta);as.onReplaced??(as.onReplaced=new ge(as.config));let Ua;Ua??(Ua=new Ce("orGates",!1));Ua.loadData({version:0,timeEvents:[],seed:402488104});const Tf=Ua;var If=Object.defineProperty,Bf=Object.getOwnPropertyDescriptor,Ja=(i,t,e,n)=>{for(var s=n>1?void 0:n?Bf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&If(t,e,s),s};class jn extends ${constructor(t){super({...t}),this.output=W(()=>{let e=this.inputA()||this.inputB();return this.isNOR()?!e:e}),this.getOutputPos=()=>this.isNOR()?new d(0,-35-Ps):new d(0,-35),this.inputAPos=new d(-22,48).transformAsPoint(this.localToWorld()),this.inputBPos=new d(22,48).transformAsPoint(this.localToWorld()),this.outputPos=this.getOutputPos().transformAsPoint(this.localToWorld()),this.add(l(lt,{children:[l(ui,{fill:Ge,lineWidth:we,stroke:()=>this.output()?Jt:ee,lineCap:"round",smoothness:.3,closed:!0,children:[l(fe,{position:[0,-40],startHandle:[0,0]}),l(fe,{position:[40,0]}),l(fe,{position:[44,55],startHandle:[0,0]}),l(fe,{position:[0,45]}),l(fe,{position:[-44,55],startHandle:[0,0]}),l(fe,{position:[-40,0]})]}),this.isNOR()&&l(en,{fill:Ge,size:Ps,y:-48,lineWidth:we,stroke:()=>this.output()?Jt:ee}),l(q,{text:this.isNOR()?"NOR":"OR",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z,y:17})]}))}}Ja([k(!1),L()],jn.prototype,"inputA",2);Ja([k(!1),L()],jn.prototype,"inputB",2);Ja([k(!1),L()],jn.prototype,"isNOR",2);var Lf=Object.defineProperty,Mf=Object.getOwnPropertyDescriptor,Za=(i,t,e,n)=>{for(var s=n>1?void 0:n?Mf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&Lf(t,e,s),s};class Qs extends ${constructor(t){super({...t}),this.output=W(()=>{let e=this.inputA()!=this.inputB();return this.isXNOR()?!e:e}),this.getOutputPos=()=>this.isXNOR()?new d(0,-35-Ps):new d(0,-35),this.inputAPos=new d(-22,48).transformAsPoint(this.localToWorld()),this.inputBPos=new d(22,48).transformAsPoint(this.localToWorld()),this.outputPos=this.getOutputPos().transformAsPoint(this.localToWorld()),this.xorLineGap=15,this.add(l(lt,{children:[l(ui,{fill:Ge,lineWidth:we,stroke:()=>this.output()?Jt:ee,lineCap:"round",smoothness:.3,closed:!0,children:[l(fe,{position:[0,-40],startHandle:[0,0]}),l(fe,{position:[40,0]}),l(fe,{position:[44,55],startHandle:[0,0]}),l(fe,{position:[0,45]}),l(fe,{position:[-44,55],startHandle:[0,0]}),l(fe,{position:[-40,0]})]}),l(ui,{lineWidth:we,stroke:()=>this.output()?Jt:ee,lineCap:"round",smoothness:.3,children:[l(fe,{position:[44,55+this.xorLineGap]}),l(fe,{position:[0,45+this.xorLineGap]}),l(fe,{position:[-44,55+this.xorLineGap]})]}),this.isXNOR()&&l(en,{fill:Ge,size:Ps,y:-48,lineWidth:we,stroke:()=>this.output()?Jt:ee}),l(q,{text:this.isXNOR()?"XNOR":"XOR",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z,y:17})]}))}}Za([k(!1),L()],Qs.prototype,"inputA",2);Za([k(!1),L()],Qs.prototype,"inputB",2);Za([k(!1),L()],Qs.prototype,"isXNOR",2);const ls=nn(function*(i){const t=C(),e=[],n=C(),s=C(),o=C(),a=C(),c=C(),g=C(),v=C(),A=C(),P=W(()=>e[0].outputRow()[0]==1),M=W(()=>e[0].outputRow()[1]==1),G=W(()=>e[1].outputRow()[0]==1),K=W(()=>e[1].outputRow()[1]==1),I=W(()=>e[2].outputRow()[0]==1),X=W(()=>e[2].outputRow()[1]==1),V=W(()=>e[3].outputRow()[0]==1),ut=W(()=>e[3].outputRow()[1]==1),D=[];function tt(pt,ht,Et){return l(lt,{children:[l(H,{powered:ht,name:"A",position:[pt().inputAPos.x-20,150]}),l(H,{powered:Et,name:"B",position:[pt().inputBPos.x+20,150]}),l(H,{powered:pt().output,name:"Out",position:[-100,-150]}),l(O,{ref:w(D,D.length),powered:ht,points:[[pt().inputAPos.x-20,150],[pt().inputAPos.x-20,90],[pt().inputAPos.x,90],pt().inputAPos]}),l(O,{ref:w(D,D.length),powered:Et,points:[[pt().inputBPos.x+20,150],[pt().inputBPos.x+20,90],[pt().inputBPos.x,90],pt().inputBPos]}),l(O,{ref:w(D,D.length),powered:pt().output,points:[pt().outputPos,[-100,-150]]})]})}i.fill(sn),i.add(l(lt,{children:[l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"The OR Gate"}),l(F,{ref:c,children:[l(ie,{ref:w(e,e.length),position:[100,0],columnNames:["A","B","Out"],columnData:[[0,0,0],[1,0,1],[0,1,1],[1,1,1]]}),l(jn,{ref:n,position:[-100,-20],inputA:P,inputB:M}),tt(n,P,M)]}),l(F,{ref:g,position:[300,0],opacity:0,children:[l(ie,{ref:w(e,e.length),position:[100,0],columnNames:["A","B","Out"],columnData:[[0,0,1],[1,0,0],[0,1,0],[1,1,0]]}),l(jn,{ref:s,isNOR:!0,position:[-100,-20],inputA:G,inputB:K}),tt(s,G,K)]}),l(F,{ref:v,position:[300,0],opacity:0,children:[l(ie,{ref:w(e,e.length),position:[100,0],columnNames:["A","B","Out"],columnData:[[0,0,0],[1,0,1],[0,1,1],[1,1,0]]}),l(Qs,{ref:o,position:[-100,-20],inputA:I,inputB:X}),tt(o,I,X)]}),l(F,{ref:A,position:[300,0],opacity:0,children:[l(ie,{ref:w(e,e.length),position:[100,0],columnNames:["A","B","Out"],columnData:[[0,0,1],[1,0,0],[0,1,0],[1,1,1]]}),l(Qs,{ref:a,isXNOR:!0,position:[-100,-20],inputA:V,inputB:X}),tt(a,V,ut)]})]})),D.reverse().forEach(pt=>pt.moveToBottom());const ot=yield Ht(re,function*(){yield*Q(...D.map(pt=>pt.animate()))});yield*dn(ne.Right,1),yt(.5);const _=yield Ht(re,function*(){yield*Q(...e.map(pt=>{let ht=(pt.currentOutputLine()+1)%pt.columnData().length;return pt.select(ht,As)})),yield*yt(1)});yield*U("or gate"),yield*Q(t().text("The NOR Gate",1),c().position.x(-300,1),g().opacity(1,1)),yield*U("nor gate"),yield*Ru(g().position.y(500,1),g().opacity(0,.5)),g().remove(),yield*Q(t().text("The XOR Gate",1),v().opacity(1,.5)),yield*U("xor gate"),yield*Q(c().position.y(500,1),c().opacity(0,.5),v().position.x(-300,1)),c().remove(),yield*Q(t().text("The XNOR Gate",1),A().opacity(1,1)),yield*U("xnor gate"),_n(),yield*yt(1),ue(ot),ue(_)});ls.name="orGates";Tf.attach(ls.meta);ls.onReplaced??(ls.onReplaced=new ge(ls.config));let Qa;Qa??(Qa=new Ce("halfAdder",!1));Qa.loadData({version:0,timeEvents:[],seed:402488104});const Df=Qa;var $f=Object.defineProperty,kf=Object.getOwnPropertyDescriptor,Eu=(i,t,e,n)=>{for(var s=n>1?void 0:n?kf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&$f(t,e,s),s};class Mo extends ${constructor(t){super({...t}),this.sum=W(()=>this.inputA()!=this.inputB()),this.carry=W(()=>this.inputA()&&this.inputB()),this.inputAPos=new d(-50,45).transformAsPoint(this.localToWorld()),this.inputBPos=new d(50,45).transformAsPoint(this.localToWorld()),this.sumPos=new d(50,-45).transformAsPoint(this.localToWorld()),this.carryPos=new d(-50,-45).transformAsPoint(this.localToWorld()),this.add(l(lt,{children:[l(At,{fill:Ge,width:150,height:90,lineWidth:we,stroke:()=>this.inputA()||this.inputB()?Jt:ee,lineJoin:"round"}),l(q,{text:"Half Adder",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z})]}))}}Eu([k(!1),L()],Mo.prototype,"inputA",2);Eu([k(!1),L()],Mo.prototype,"inputB",2);const us=nn(function*(i){const t=C(),e=[],n=C(),s=C(),o=C(),a=C(),c=C(),g=C(),v=C();let A=0;const P=W(()=>e[A].outputRow()[0]==1),M=W(()=>e[A].outputRow()[1]==1),G=[],K=230,I=190;i.fill(sn),i.add(l(lt,{children:[l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Adding Two Bits"}),l(ie,{ref:w(e,e.length),position:[-400,0],columnNames:["A","B","Sum"],columnData:[[0,0,0],[1,0,1],[0,1,1]]}),l(ie,{ref:w(e,e.length),opacity:0,position:[-400,0],columnNames:["A","B","Carry","Sum"],columnData:[[0,0,0,0],[1,0,0,1],[0,1,0,1],[1,1,1,0]]}),l(F,{ref:a,opacity:1,children:[l(Qs,{ref:n,position:[130,50],inputA:P,inputB:M,opacity:0}),l(_e,{ref:s,position:[-130,50],inputA:P,inputB:M,opacity:0}),l(F,{ref:g,opacity:0,children:[l(O,{ref:w(G,G.length),powered:P,points:[[s().inputAPos.x,300],[s().inputAPos.x,K],[n().inputAPos.x,K],[n().inputAPos.x,n().inputAPos.y]]}),l(O,{ref:w(G,G.length),powered:M,points:[[n().inputBPos.x,300],[n().inputBPos.x,n().inputBPos.y]]}),l(O,{ref:w(G,G.length),powered:n().output,points:[n().outputPos,[n().outputPos.x,n().outputPos.y-100]]}),l(H,{name:"Sum",powered:n().output,position:[n().outputPos.x,n().outputPos.y-100]})]}),l(F,{ref:v,opacity:0,children:[l(O,{ref:w(G,G.length),powered:P,jointStart:!0,points:[[s().inputAPos.x,K],s().inputAPos]}),l(O,{ref:w(G,G.length),powered:M,jointStart:!0,points:[[n().inputBPos.x,I],[s().inputBPos.x,I],s().inputBPos]}),l(O,{ref:w(G,G.length),powered:s().output,points:[s().outputPos,[s().outputPos.x,n().outputPos.y-100]]}),l(H,{name:"Carry",powered:s().output,position:[s().outputPos.x,s().outputPos.y-100]})]}),l(H,{name:"A",powered:P,position:[s().inputAPos.x,300]}),l(H,{name:"B",powered:M,position:[n().inputBPos.x,300]})]}),l(F,{ref:c,position:[0,50],opacity:0,children:[l(Mo,{ref:o,inputA:P,inputB:M}),l(O,{ref:w(G,G.length),powered:P,points:[[o().inputAPos.x,150],o().inputAPos]}),l(O,{ref:w(G,G.length),powered:M,points:[[o().inputBPos.x,150],o().inputBPos]}),l(O,{ref:w(G,G.length),powered:o().sum,points:[o().sumPos,[o().sumPos.x,o().sumPos.y-100]]}),l(O,{ref:w(G,G.length),powered:o().carry,points:[o().carryPos,[o().carryPos.x,o().carryPos.y-100]]}),l(H,{name:"A",powered:P,position:[o().inputAPos.x,150]}),l(H,{name:"B",powered:M,position:[o().inputBPos.x,150]}),l(H,{name:"Sum",powered:o().sum,position:[o().sumPos.x,o().sumPos.y-100]}),l(H,{name:"Carry",powered:o().carry,position:[o().carryPos.x,o().carryPos.y-100]})]})]})),G.reverse().forEach(ut=>ut.moveToBottom()),v().moveToBottom(),g().moveToBottom();const X=yield Ht(re,function*(){yield*Q(...G.map(ut=>ut.animate()))});yield*dn(ne.Right,1),yt(.5);const V=yield Ht(re,function*(){yield*Q(...e.map(ut=>{let D=(e[A].currentOutputLine()+1)%e[A].columnData().length;return ut.select(D,As)})),yield*yt(1)});yield*U("add two bits intro"),yield*Q(g().opacity(1,1),n().opacity(1,1)),yield*U("add two bits xor"),P(()=>e[1].outputRow()[0]==1),M(()=>e[1].outputRow()[1]==1),yield*e[0].opacity(0,.5),yield*e[1].opacity(1,.5),e[0].remove(),A=1,yield*U("updated truthtable (carry)"),yield*Q(v().opacity(1,1),s().opacity(1,1)),yield*U("add two bits and"),yield*Q(a().scale(0,2),a().opacity(0,1),le(.7,c().opacity(1,1)),le(.7,t().text("Half Adder",1))),yield*U("scaled down circuit, reveal HalfAdder"),_n(),yield*yt(1),ue(X),ue(V)});us.name="halfAdder";Df.attach(us.meta);us.onReplaced??(us.onReplaced=new ge(us.config));let Ka;Ka??(Ka=new Ce("fullAdder",!1));Ka.loadData({version:0,timeEvents:[],seed:402488104});const zf=Ka;var Ef=Object.defineProperty,Ff=Object.getOwnPropertyDescriptor,tl=(i,t,e,n)=>{for(var s=n>1?void 0:n?Ff(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&Ef(t,e,s),s};class No extends ${constructor(t){super({...t}),this.sum=W(()=>{let e=[this.inputA(),this.inputB(),this.carryIn()].filter(n=>n===!0).length;return e===1||e===3}),this.carryOut=W(()=>{let e=[this.inputA(),this.inputB(),this.carryIn()].filter(n=>n===!0).length;return e===2||e===3}),this.inputAPos=new d(-50,50).transformAsPoint(this.localToWorld()),this.inputBPos=new d(50,50).transformAsPoint(this.localToWorld()),this.rectRef=C(),this.carryInPos=new d(0,0),this.sumPos=new d(50,-50).transformAsPoint(this.localToWorld()),this.carryOutPos=new d(-50,-50).transformAsPoint(this.localToWorld()),this.add(l(lt,{children:[l(At,{ref:this.rectRef,fill:Ge,width:150,height:100,lineWidth:we,stroke:()=>this.inputA()||this.inputB()||this.carryIn()?Jt:ee,lineJoin:"round"}),l(q,{text:"Full Adder",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z})]})),this.carryInPos=new d(this.rectRef().getOriginDelta(Ue.Right).x-Ta,20).transformAsPoint(this.localToWorld())}}tl([k(!1),L()],No.prototype,"inputA",2);tl([k(!1),L()],No.prototype,"inputB",2);tl([k(!1),L()],No.prototype,"carryIn",2);const hs=nn(function*(i){const t=C(),e=[],n=C(),s=C(),o=C(),a=C(),c=C(),g=C(),v=C(),A=C(),P="",M=W(()=>e[0].outputRow()[0]==1),G=W(()=>e[0].outputRow()[1]==1),K=W(()=>e[0].outputRow()[2]==1),I=200,X=[],V=W(!1),ut=W(1),D=(rt,xt,Nt)=>V()?e[Nt].columnData()[xt][1][tt-rt-1]=="1":!1,tt=8,ot=[];gt(tt).forEach(rt=>{var xt;return l(No,{ref:w(ot,ot.length),position:[rt*-I,0],inputA:()=>D(rt,0,ut()),inputB:()=>D(rt,1,ut()),carryIn:((xt=ot[rt-1])==null?void 0:xt.carryOut)||K,opacity:0})});const _=ot[0];_.inputA(M),_.inputB(G);const pt=[];ot.map((rt,xt)=>l(F,{ref:w(pt,pt.length),opacity:0,children:[l(O,{ref:w(X,X.length),powered:()=>D(xt,0,ut()),points:[[rt.position.x(),100],[rt.inputAPos.x,100],rt.inputAPos]}),l(O,{ref:w(X,X.length),powered:()=>D(xt,1,ut()),points:[[rt.position.x(),170],[rt.inputBPos.x,170],rt.inputBPos]}),xt!=tt-1&&l(O,{ref:w(X,X.length),powered:rt.carryOut,points:[rt.carryOutPos,[rt.carryOutPos.x,rt.carryOutPos.y-20],[rt.position.x()-I/2,rt.carryOutPos.y-20],[rt.position.x()-I/2,ot[xt+1].carryInPos.y],ot[xt+1].carryInPos]}),xt==tt-1&&l(O,{ref:w(X,X.length),powered:rt.carryOut,points:[rt.carryOutPos,[rt.carryOutPos.x,rt.carryOutPos.y-90]]}),l(O,{ref:w(X,X.length),powered:rt.sum,points:[rt.sumPos,[rt.sumPos.x,rt.sumPos.y-90]]}),l(H,{name:"A"+P[xt+1],powered:()=>D(xt,0,ut()),position:[rt.position.x(),100]}),l(H,{name:"B"+P[xt+1],powered:()=>D(xt,1,ut()),position:[rt.position.x(),170]}),xt==tt-1&&l(H,{name:"Overflow",powered:rt.carryOut,position:[rt.carryOutPos.x-30,rt.carryOutPos.y-90]}),l(H,{name:"S"+P[xt+1],powered:rt.sum,position:[rt.sumPos.x,rt.sumPos.y-90]})]})),i.fill(sn),i.add(l(lt,{children:[l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Handling the Carry"}),l(ie,{ref:w(e,e.length),position:[-400,0],columnNames:["A","B","C","","C","Sum"],columnData:[[0,0,0,"",0,0],[1,0,0,"",0,1],[0,1,0,"",0,1],[0,0,1,"",0,1],[1,1,0,"",1,0],[1,0,1,"",1,0],[1,1,1,"",1,1]]}),l(F,{ref:a,position:[-30,200],opacity:1,children:[l(Mo,{ref:n,inputA:M,inputB:G}),l(Mo,{ref:s,opacity:0,position:[n().sumPos.x+n().inputBPos.x,-130],inputA:n().sum,inputB:K}),l(jn,{ref:o,opacity:0,position:[n().carryPos.x+new jn().inputBPos.x,-300],inputA:n().carry,inputB:s().carry}),l(O,{ref:w(X,X.length),powered:M,points:[[n().inputAPos.x,100],n().inputAPos]}),l(O,{ref:w(X,X.length),powered:G,points:[[n().inputBPos.x,100],n().inputBPos]}),l(H,{name:"A",powered:M,position:[n().inputAPos.x,100]}),l(H,{name:"B",powered:G,position:[n().inputBPos.x,100]}),l(F,{ref:c,opacity:0,children:[l(O,{ref:w(X,X.length),powered:n().sum,points:[n().sumPos,s().inputAPos]}),l(O,{ref:w(X,X.length),powered:K,points:[[s().inputBPos.x+100,s().inputBPos.y+50],[s().inputBPos.x,s().inputBPos.y+50],s().inputBPos]}),l(O,{ref:w(X,X.length),powered:s().sum,points:[s().sumPos,[s().sumPos.x,o().outputPos.y-70]]}),l(H,{name:"C",powered:K,position:[s().inputBPos.x+100,s().inputBPos.y+50]}),l(H,{name:"Sum",powered:s().sum,position:[s().sumPos.x,o().outputPos.y-70]})]}),l(F,{ref:g,opacity:0,children:[l(O,{ref:w(X,X.length),powered:n().carry,points:[n().carryPos,o().inputAPos]}),l(O,{ref:w(X,X.length),powered:s().carry,points:[s().carryPos,[s().carryPos.x,s().carryPos.y-50],[o().inputBPos.x,s().carryPos.y-50],o().inputBPos]}),l(O,{ref:w(X,X.length),powered:n().carry,points:[o().outputPos,[o().outputPos.x,o().outputPos.y-70]]}),l(H,{name:"C",powered:o().output,position:[o().outputPos.x,o().outputPos.y-70]})]})]}),l(F,{ref:A,children:[...ot,...pt]}),l(F,{ref:v,opacity:0,children:[l(O,{ref:w(X,X.length),powered:M,points:[[_.inputAPos.x,150],_.inputAPos]}),l(O,{ref:w(X,X.length),powered:G,points:[[_.inputBPos.x,150],_.inputBPos]}),l(O,{ref:w(X,X.length),powered:K,points:[[_.carryInPos.x+100,_.carryInPos.y],_.carryInPos]}),l(O,{ref:w(X,X.length),powered:_.carryOut,points:[_.carryOutPos,[_.carryOutPos.x,_.carryOutPos.y-90]]}),l(O,{ref:w(X,X.length),powered:_.sum,points:[_.sumPos,[_.sumPos.x,_.sumPos.y-90]]}),l(H,{name:"A",powered:M,position:[_.inputAPos.x,150]}),l(H,{name:"B",powered:G,position:[_.inputBPos.x,150]}),l(H,{name:"C",powered:K,position:[_.carryInPos.x+100,_.carryInPos.y]}),l(H,{name:"C",powered:_.carryOut,position:[_.carryOutPos.x,_.carryOutPos.y-90]}),l(H,{name:"Sum",powered:_.sum,position:[_.sumPos.x,_.sumPos.y-90]})]})]})),X.reverse().forEach(rt=>rt.moveToBottom()),pt.forEach(rt=>rt.moveToBottom()),c().moveToBottom(),g().moveToBottom(),v().moveToBottom();const ht=yield Ht(re,function*(){yield*Q(...X.map(rt=>rt.animate()))});yield*dn(ne.Right,1),yt(.5);const Et=yield Ht(re,function*(){yield*Q(...e.map(rt=>{let xt=(rt.currentOutputLine()+1)%rt.columnData().length;return rt.select(xt,As)})),yield*yt(1)});yield*U("first HalfAdder"),yield*Q(s().opacity(1,1),c().opacity(1,1)),yield*U("second HalfAdder"),yield*Q(o().opacity(1,1),g().opacity(1,1)),yield*U("OR gate carry out"),yield*Q(a().scale(0,2),a().opacity(0,1),le(.7,v().opacity(1,1)),le(.7,_.opacity(1,1)),le(.7,t().text("Full Adder",1))),yield*U("scaled down circuit, reveal FullAdder"),yield*Q(e[0].opacity(0,.5),v().opacity(0,.5)),M(()=>D(0,0,ut())),G(()=>D(0,1,ut())),K(!1),yield*A().position.y(200,1);const se=.2;yield*Q(A().position.x(tt*I/2-I/4,se*(tt-1)),...pt.map((rt,xt)=>le(se*(xt-1),rt.opacity(1,1))),...ot.map((rt,xt)=>le(se*(xt-1),rt.opacity(1,1))),le(.7,t().text("Ripple Adder",1))),yield*U("ripple adder"),i.add(l(ie,{ref:w(e,e.length),position:[-700,-150],opacity:0,hasSelector:!1,columnNames:["num","binary"],columnData:[["9","00001001"],["5","00000101"],["14","00001110"]]})),yield*e[1].opacity(1,.5),V(!0),yield*U("ripple adder start adding"),V(!1),yield*e[1].opacity(0,.5),e[1].remove(),i.add(l(ie,{ref:w(e,e.length),position:[-700,-150],opacity:0,hasSelector:!1,columnNames:["num","binary"],columnData:[["255","11111111"],["1","00000001"],["0","00000000"]]})),yield*e[2].opacity(1,.5),ut(2),V(!0),yield*U("ripple adder overflow"),_n(),yield*yt(1),ue(ht),ue(Et)});hs.name="fullAdder";zf.attach(hs.meta);hs.onReplaced??(hs.onReplaced=new ge(hs.config));let el;el??(el=new Ce("twosCompliment",!1));el.loadData({version:0,timeEvents:[],seed:402488104});const Wf=el,cs=nn(function*(i){const t=C(),e=[],n={},s=V=>w(n,V),o={},a=V=>w(o,V),c=(V,ut,D=0,tt=0)=>l(q,{ref:s(V),position:[D,tt],fontSize:50,fontWeight:Z,opacity:0,fill:Y,fontFamily:"Helvetica",text:ut}),g=(V,ut,D,tt=0,ot=0)=>l(q,{ref:a(V),position:()=>[D.position.x()-70*D.scale.x(),D.position.y()],offsetX:1,fontSize:50,fontWeight:Z,opacity:D.opacity,scale:D.scale,fill:Y,fontFamily:"Helvetica",text:ut}),v=(V,ut,D)=>l(q,{ref:w(e,e.length),position:[ut,D],offsetX:-1,fontSize:50,fontWeight:Z,opacity:0,fill:Y,fontFamily:"Helvetica",fontStyle:"italic",text:V});i.fill(sn),i.add(l(lt,{children:l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"But what about subtraction?"})}));const A=V=>100+V*50,P=-400;yield*dn(ne.Right,1),yield*U("subtraction intro");const M=4,G=.1,K=300,I=()=>-50+80*e.length;i.add(gt(6).map((V,ut)=>c(V.toString(),V.toString(2).padStart(M,"0"),P,A(ut)))),i.add(gt(6).map((V,ut)=>g(V.toString(),V.toString()+" =",n[V]))),i.add(v("Steps:",K,I())),yield*Q(t().text("Negative numbers",1),...Object.keys(n).map((V,ut)=>le(G*ut,n[V].opacity(1,.3)))),yield*e[e.length-1].opacity(1,.3),yield*U("positive numbers shown, steps started"),yield*Q(n[1].position.x(0,1),le(.3,n[1].position.y(0,1)),le(.3,n[1].scale(1.3,1))),yield*U("pull out a number");const X=1.3;i.add(c("-1","1110",0,-70)),i.add(g("-1","-1 =",n[-1])),i.add(v("Flip bits",K+50,I())),n[-1].scale(X),yield*Q(n[-1].opacity(1,1),e[e.length-1].opacity(1,1)),yield*U("flip bits"),yield*Q(n[1].scale(1,1),n[-1].scale(1,1),n[1].position.y(A(1),1),n[-1].position.y(A(-1-1),1),le(.3,n[1].position.x(P,1)),le(.3,n[-1].position.x(P,1))),i.add(c("-0","1111",P,A(-1))),i.add(g("-0","-0 =",n["-0"])),de(),i.add(gt(-4).map((V,ut)=>{V=V-2;let ot=(V*-1).toString(2).padStart(M,"0").replace(/1/g,"X").replace(/0/g,"1");return ot=ot.replace(/X/g,"0"),c(V.toString(),ot,P,A(ut*-1-3))})),i.add(gt(-4).map((V,ut)=>g((V-2).toString(),(V-2).toString()+" =",n[V-2]))),yield n["-0"].opacity(1,.3),yield*Q(t().text("One's Compliment",1),...gt(-4).map((V,ut)=>le(G*(ut+1),n[(V-2).toString()].opacity(1,.3)))),yield*U("put numbers back and reveal ones compliment list"),yield*o["-0"].opacity(0,.3),i.add(g("-6","-6 =",n[-5])),o[-6].opacity(0),yield*Q(...gt(-5).map((V,ut)=>o[(V-1).toString()].position.y(A(ut*-1-1),.3))),yield*o[-6].opacity(1,.3),i.add(v("Add one",K+50,I())),yield*e[e.length-1].opacity(1,1),yield*t().text("Two's Compliment",1),yield*U("remove -0 and reveal twos compliment")});cs.name="twosCompliment";Wf.attach(cs.meta);cs.onReplaced??(cs.onReplaced=new ge(cs.config));let nl;nl??(nl=new Ce("clock",!1));nl.loadData({version:0,timeEvents:[],seed:1071399007});const Nf=nl,ps=nn(function*(i){const t=C(),e=[],n=[];i.fill(sn),i.add(l(lt,{children:[l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Keeping time and maintaining a speed"}),l(ai,{ref:w(e,e.length),position:[-200,0],rotation:90}),l(ai,{ref:w(e,e.length),position:[0,0],rotation:90,inputA:!0}),l(ai,{ref:w(e,e.length),position:[200,0],rotation:90}),l(O,{ref:w(n,n.length),powered:e[2].output,points:[e[2].outputPos,[e[2].outputPos.x+100,e[2].outputPos.y],[e[2].outputPos.x+100,e[2].outputPos.y+100],[e[0].inputPos.x-100,e[0].inputPos.y+100],[e[0].inputPos.x-100,e[0].inputPos.y],e[0].inputPos]}),l(O,{ref:w(n,n.length),powered:e[0].output,points:[e[0].outputPos,e[1].inputPos]}),l(O,{ref:w(n,n.length),powered:e[1].output,points:[e[1].outputPos,e[2].inputPos]}),l(O,{ref:w(n,n.length),powered:e[2].output,jointStart:!0,points:[[e[2].outputPos.x+100,e[2].outputPos.y],[e[2].outputPos.x+250,e[2].outputPos.y]]}),l(H,{position:[e[2].outputPos.x+250,e[2].outputPos.y],powered:e[2].output,name:"Clock Out"})]})),n.reverse().forEach(c=>c.moveToBottom());const s=yield Ht(re,function*(){yield*Q(...n.map(c=>c.animate()))});yield*dn(ne.Right,1);const o=W(1);yield*yt(1),yield Ht(re,function*(){yield*yt(o()),e[0].inputA(!e[0].inputA()),yield*yt(o()),e[1].inputA(!e[1].inputA()),yield*yt(o()),e[2].inputA(!e[2].inputA())}),yield*U("intro to clocks");const a=C();i.add(l(q,{ref:a,opacity:0,position:[300,-150],fontWeight:Z,fontSize:25,fill:Y,fontFamily:"Helvetica",text:()=>`Propagation delay: ${o().toFixed(2)}s (${(1/(o()*6)).toFixed(2)} hertz clock)`})),yield*a().opacity(1,.5),yield*U("propagation delay"),yield*t().text("Ring Oscillator",1),yield*U("ring oscillator"),yield*o(1/6,1),yield*U("1 Hz clock"),_n(),yield*yt(1),ue(s)});ps.name="clock";Nf.attach(ps.meta);ps.onReplaced??(ps.onReplaced=new ge(ps.config));let il;il??(il=new Ce("flipflop",!1));il.loadData({version:0,timeEvents:[],seed:402488104});const jf=il;var _f=Object.defineProperty,Hf=Object.getOwnPropertyDescriptor,sl=(i,t,e,n)=>{for(var s=n>1?void 0:n?Hf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&_f(t,e,s),s};class kr extends ${constructor(t){super({...t}),this.stored=!1,this.output=W(()=>(this.set()&&this.reset()?this.stored=!this.resetDominated():this.set()?this.stored=!0:this.reset()&&(this.stored=!1),this.stored)),this.notOutput=W(()=>!this.output()),this.localResetPos=new d(-50,50),this.localSetPos=new d(50,50),this.localOutputPos=new d(-50,-50),this.localNotOutputPos=new d(50,-50),this.resetPos=W(()=>this.localResetPos.transformAsPoint(this.localToParent())),this.setPos=W(()=>this.localSetPos.transformAsPoint(this.localToParent())),this.outputPos=W(()=>this.localOutputPos.transformAsPoint(this.localToParent())),this.notOutputPos=W(()=>this.localNotOutputPos.transformAsPoint(this.localToParent())),this.add(l(lt,{children:[l(At,{fill:Ge,width:150,height:100,lineWidth:we,stroke:()=>this.set()||this.reset()?Jt:ee,lineJoin:"round"}),l(q,{text:"SR Latch",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z}),l(q,{text:"R",rotation:()=>this.rotation()*-1,position:[this.localResetPos.x,this.localResetPos.y-12],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z}),l(q,{text:"S",rotation:()=>this.rotation()*-1,position:[this.localSetPos.x,this.localSetPos.y-12],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z}),l(q,{text:"Q",rotation:()=>this.rotation()*-1,position:[this.localOutputPos.x,this.localOutputPos.y+17],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z}),l(q,{text:"Q",rotation:()=>this.rotation()*-1,position:[this.localNotOutputPos.x,this.localNotOutputPos.y+17],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z})]}))}}sl([k(!1),L()],kr.prototype,"set",2);sl([k(!1),L()],kr.prototype,"reset",2);sl([k(!1),L()],kr.prototype,"resetDominated",2);var Gf=Object.defineProperty,Xf=Object.getOwnPropertyDescriptor,jo=(i,t,e,n)=>{for(var s=n>1?void 0:n?Xf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&Gf(t,e,s),s};class Wi extends ${constructor(t){super({...t}),this.stored=!1,this.output=W(()=>(this.enable()?this.stored=this.data():this.set()&&this.reset()?this.stored=!this.resetDominated():this.set()?this.stored=!0:this.reset()&&(this.stored=!1),this.stored)),this.notOutput=W(()=>!this.output()),this.localResetPos=new d(-75,0),this.localSetPos=new d(75,0),this.localDataPos=new d(-50,50),this.localEnablePos=new d(50,50),this.localOutputPos=new d(-50,-50),this.localNotOutputPos=new d(50,-50),this.resetPos=W(()=>this.localResetPos.transformAsPoint(this.localToParent())),this.setPos=W(()=>this.localSetPos.transformAsPoint(this.localToParent())),this.dataPos=W(()=>this.localDataPos.transformAsPoint(this.localToParent())),this.enablePos=W(()=>this.localEnablePos.transformAsPoint(this.localToParent())),this.outputPos=W(()=>this.localOutputPos.transformAsPoint(this.localToParent())),this.notOutputPos=W(()=>this.localNotOutputPos.transformAsPoint(this.localToParent())),this.add(l(lt,{children:[l(At,{fill:Ge,width:150,height:100,lineWidth:we,stroke:()=>this.set()||this.reset()?Jt:ee,lineJoin:"round"}),l(q,{text:"D Latch",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z}),l(q,{text:"R",rotation:()=>this.rotation()*-1,position:[this.localResetPos.x+12,this.localResetPos.y],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z}),l(q,{text:"S",rotation:()=>this.rotation()*-1,position:[this.localSetPos.x-12,this.localSetPos.y],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z}),l(q,{text:"D",rotation:()=>this.rotation()*-1,position:[this.localDataPos.x,this.localDataPos.y-12],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z}),l(q,{text:"E",rotation:()=>this.rotation()*-1,position:[this.localEnablePos.x,this.localEnablePos.y-12],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z}),l(q,{text:"Q",rotation:()=>this.rotation()*-1,position:[this.localOutputPos.x,this.localOutputPos.y+17],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z}),l(q,{text:"Q",rotation:()=>this.rotation()*-1,position:[this.localNotOutputPos.x,this.localNotOutputPos.y+17],fill:Y,fontFamily:"Helvetica",fontSize:Wn,fontWeight:Z})]}))}}jo([k(!1),L()],Wi.prototype,"data",2);jo([k(!1),L()],Wi.prototype,"enable",2);jo([k(!1),L()],Wi.prototype,"set",2);jo([k(!1),L()],Wi.prototype,"reset",2);jo([k(!1),L()],Wi.prototype,"resetDominated",2);const fs=nn(function*(i){const t=C(),e=[],n=W(0),s=W(!1),o=C(),a=C(),c=C(),g=C(),v=C(),A=C(),P=C(),M=C(),G=C(),K=W(()=>e[0].outputRow()[0]==1),I=W(()=>e[0].outputRow()[1]==1),X=W(()=>e[0].outputRow()[2]),V=(R,z,Zt)=>{let rn=e[R].columnData(),Cs=e[R].currentOutputLine(),Dt=Cs-1;de();let On=1,Ln=0;for(Dt;Dt!=Cs&&(Dt=(Dt+rn.length-1)%(rn.length-1),!(Dt==-1||rn.length==0||(Dt>=rn.length,On=rn[Dt][z],Ln++,typeof On=="number")||Ln>rn.length));Dt--);switch(X()){case"Q":return Dt==-1?!0:Zt?On==1:On!=1;case"X":return!1;default:return Zt?X()==1:X()!=1}},ut=W(()=>V(0,2,!1)),D=W(()=>V(0,2,!0)),tt=W(()=>e[1].outputRow()[0]==1),ot=C(),_=C(),pt=C(),ht=C(),Et=C(),se=W(()=>e[2].outputRow()[1]==1),rt=C(),xt=C(),Nt=C(),ae=C(),Gt=C(),et=[],Fe=200;i.fill(sn),i.add(l(lt,{children:[l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Storing a bit"}),l(ie,{ref:w(e,e.length),position:[-500,0],opacity:0,columnNames:["S","R","Q","Action"],columnData:[[0,0,"Q","Hold state"],[0,1,0,"Reset"],[0,0,"Q","Hold state"],[1,0,1,"Set"],[0,0,"Q","Hold state"],[0,1,0,"Reset"],[0,0,"Q","Hold state"],[1,1,"X","Not allowed"]]}),l(F,{ref:c,opacity:0,children:[l(jn,{isNOR:!0,ref:o,position:[0,-100],rotation:90,inputA:I,inputB:ut}),l(jn,{isNOR:!0,ref:a,position:[0,100],rotation:90,inputA:D,inputB:K}),l(O,{ref:w(et,et.length),powered:o().output,points:[o().outputPos,[o().outputPos.x+Fe,o().outputPos.y]]}),l(O,{ref:w(et,et.length),powered:a().output,points:[a().outputPos,[a().outputPos.x+Fe,a().outputPos.y]]}),l(H,{name:"Q",powered:o().output,position:[o().outputPos.x+Fe,o().outputPos.y]}),l(H,{name:"Q",powered:a().output,position:[a().outputPos.x+Fe,a().outputPos.y]}),l(O,{ref:w(et,et.length),powered:o().output,jointStart:!0,points:[[o().outputPos.x+Fe/2,o().outputPos.y],[o().outputPos.x+Fe/2,o().outputPos.y+50],[a().inputAPos.x-70,a().inputAPos.y-50],[a().inputAPos.x-70,a().inputAPos.y],a().inputAPos]}),l(O,{ref:w(et,et.length),powered:a().output,jointStart:!0,points:[[a().outputPos.x+Fe/2,a().outputPos.y],[a().outputPos.x+Fe/2,a().outputPos.y-50],[o().inputBPos.x-70,o().inputBPos.y+50],[o().inputBPos.x-70,o().inputBPos.y],o().inputBPos]}),l(O,{ref:w(et,et.length),powered:I,points:[[o().inputAPos.x-150,o().inputAPos.y],o().inputAPos]}),l(O,{ref:w(et,et.length),powered:K,points:[[a().inputBPos.x-150,a().inputBPos.y],a().inputBPos]}),l(H,{name:"R",powered:I,position:[o().inputAPos.x-150,o().inputAPos.y]}),l(H,{name:"S",powered:K,position:[a().inputBPos.x-150,a().inputBPos.y]})]}),l(F,{ref:g,opacity:0,children:[l(kr,{ref:P,rotation:90,set:K,reset:I}),l(F,{ref:A,opacity:0,children:[l(O,{ref:w(et,et.length),powered:P().output,points:[P().outputPos(),[P().outputPos().x+100,P().outputPos().y]]}),l(O,{ref:w(et,et.length),powered:P().notOutput,points:[P().notOutputPos(),[P().notOutputPos().x+100,P().notOutputPos().y]]}),l(H,{name:"Q",powered:P().output,position:[P().outputPos().x+100,P().outputPos().y]}),l(H,{name:"Q",powered:P().notOutput,position:[P().notOutputPos().x+100,P().notOutputPos().y]})]})]}),l(F,{ref:ht,opacity:0,children:[l(ai,{ref:ot,inputA:()=>tt(),position:[-170,P().resetPos().y],rotation:90}),l(H,{name:"D",ref:pt,position:[-400,P().resetPos().y],powered:tt})]}),l($,{ref:Et,opacity:()=>ht().opacity(),position:()=>ht().position(),children:l(O,{ref:w(et,et.length),powered:tt,points:[[pt().position.x(),ot().inputPos.y],ot().inputPos]})}),l(F,{ref:_,opacity:0,children:[l(ie,{ref:w(e,e.length),position:[-550,0],columnNames:["D","Q"],columnData:[[0,0,"Reset"],[1,1,"Set"]]}),l(O,{ref:w(et,et.length),powered:tt,points:[[pt().position.x(),ot().inputPos.y],ot().inputPos]}),l(O,{ref:w(et,et.length),powered:ot().output,points:[ot().outputPos,P().resetPos()]}),l(O,{ref:w(et,et.length),powered:tt,jointStart:!0,points:[[ot().inputPos.x-50,ot().inputPos.y],[ot().inputPos.x-50,P().setPos().y],P().setPos()]})]})]})),et.reverse().forEach(R=>R.moveToBottom()),A().moveToBottom(),_().moveToBottom(),Et().moveToBottom();const qn=yield Ht(re,function*(){yield*Q(...et.map(R=>R.animate()))});yield*dn(ne.Right,1),yield*U("flip flop intro"),yield*Q(c().opacity(1,1),e[0].opacity(1,1),t().text("SR NOR Latch",1));const pi=yield Ht(re,function*(){if(s()){yield*yt(1);return}let R=e[n()],z=(R.currentOutputLine()+1)%R.columnData().length;yield*R.select(z,As),yield*yt(1)});yield*U("SR NOR Latch raw"),yield*Q(c().opacity(0,1),c().scale(0,1),le(.5,g().opacity(1,1))),c().remove(),yield*P().rotation(0,.5),i.add(l(F,{ref:v,opacity:0,children:[l(O,{ref:w(et,et.length),powered:I,points:[[P().resetPos().x,P().resetPos().y+100],P().resetPos()]}),l(O,{ref:w(et,et.length),powered:K,points:[[P().setPos().x,P().setPos().y+100],P().setPos()]}),l(H,{name:"R",powered:I,position:[P().resetPos().x,P().resetPos().y+100]}),l(H,{name:"S",powered:K,position:[P().setPos().x,P().setPos().y+100]}),l(O,{ref:w(et,et.length),powered:P().output,points:[P().outputPos(),[P().outputPos().x,P().outputPos().y-100]]}),l(O,{ref:w(et,et.length),powered:P().notOutput,points:[P().notOutputPos(),[P().notOutputPos().x,P().notOutputPos().y-100]]}),l(H,{name:"Q",powered:P().output,position:[P().outputPos().x,P().outputPos().y-100]}),l(H,{name:"Q",powered:P().notOutput,position:[P().notOutputPos().x,P().notOutputPos().y-100]})]})),v().moveToBottom(),yield*v().opacity(1,1),yield*U("SR NOR Latch circuit"),s(!0),yield*Q(P().rotation(90,.5),v().opacity(0,1),e[0].opacity(0,1)),v().remove(),e[0].remove(),P().reset(ot().output),P().set(tt),yield*Q(ht().opacity(1,1),_().opacity(1,1),A().opacity(1,1),t().text("D NOR Latch",1)),n(1),s(!1),yield*U("D Latch"),s(!0),i.add(l(ie,{ref:w(e,e.length),opacity:0,position:[-600,0],columnNames:["D","E","Q"],columnData:[[0,0,"Q"],[1,0,"Q"],[1,1,1],[1,0,"Q"],[0,0,"Q"],[0,1,0]]})),g().add(l(lt,{children:l(F,{ref:rt,opacity:0,children:[l(_e,{ref:Nt,rotation:90,position:[-170,P().resetPos().y-25],inputA:ot().output,inputB:se}),l(_e,{ref:ae,rotation:90,position:[-170,P().setPos().y+25],inputA:se,inputB:tt})]})})),yield*Q(_().opacity(0,1),le(.5,g().position.x(200,1)),le(.5,ht().position.y(Math.abs(ot().position.y()-Nt().inputAPos.y)*-1,1)));const on=(R,z,Zt)=>R.transformAsPoint(z.localToWorld()).transformAsPoint(Zt.worldToLocal());g().add(l(lt,{children:[l(H,{name:"Enable",ref:Gt,position:[on(pt().position(),ht(),g()).x,0],opacity:0,powered:se}),l(F,{ref:xt,opacity:0,children:[l(O,{ref:w(et,et.length),powered:Nt().output,points:[Nt().outputPos,[Nt().outputPos.x-(Nt().outputPos.x-P().resetPos().x)/2,Nt().outputPos.y],[Nt().outputPos.x-(Nt().outputPos.x-P().resetPos().x)/2,P().resetPos().y],P().resetPos()]}),l(O,{ref:w(et,et.length),powered:ae().output,points:[ae().outputPos,[ae().outputPos.x-(ae().outputPos.x-P().setPos().x)/2,ae().outputPos.y],[ae().outputPos.x-(ae().outputPos.x-P().setPos().x)/2,P().setPos().y],P().setPos()]}),l(O,{ref:w(et,et.length),powered:ot().output,points:[on(ot().outputPos,ht(),g()),Nt().inputAPos]}),l(O,{ref:w(et,et.length),powered:tt,jointStart:!0,points:[[on(ot().inputPos,ht(),g()).x-50,on(ot().inputPos,ht(),g()).y],[on(ot().inputPos,ht(),g()).x-50,ae().inputBPos.y],ae().inputBPos]}),l(O,{ref:w(et,et.length),powered:se,points:[[Gt().position.x()+250,Gt().position.y()],[Gt().position.x()+250,Nt().inputBPos.y],Nt().inputBPos]}),l(O,{ref:w(et,et.length),powered:se,points:[[Gt().position.x()+250,Gt().position.y()],[Gt().position.x()+250,ae().inputAPos.y],ae().inputAPos]}),l(O,{ref:w(et,et.length),powered:se,jointEnd:!0,points:[Gt().position(),[Gt().position.x()+250,Gt().position.y()]]})]})]})),xt().moveToBottom(),Et().moveToBottom(),P().reset(Nt().output),P().set(ae().output),tt(()=>e[2].outputRow()[0]==1),ot().inputA(tt),yield*Q(Gt().opacity(1,1),e[2].opacity(1,1),rt().opacity(1,1),xt().opacity(1,1),t().text("Gated D Latch",1)),n(2),s(!1),yield*U("Gated D Latch raw"),Et().reparent(g()),ht().reparent(g()),i.add(l(lt,{children:l(Wi,{ref:M,opacity:0,position:[150,0],rotation:90,data:tt,enable:se})})),yield*Q(g().opacity(0,1),g().scale(0,1),le(.5,M().opacity(1,1))),yield*Q(M().rotation(0,1),M().position.x(0,1)),g().remove(),i.add(l(lt,{children:l(F,{ref:G,opacity:0,children:[l(O,{ref:w(et,et.length),powered:tt,points:[[M().dataPos().x,M().dataPos().y+100],M().dataPos()]}),l(O,{ref:w(et,et.length),powered:se,points:[[M().enablePos().x,M().enablePos().y+100],M().enablePos()]}),l(O,{ref:w(et,et.length),powered:M().output,points:[M().outputPos(),[M().outputPos().x,M().outputPos().y-100]]}),l(O,{ref:w(et,et.length),powered:M().notOutput,points:[M().notOutputPos(),[M().notOutputPos().x,M().notOutputPos().y-100]]}),l(H,{name:"D",position:[M().dataPos().x,M().dataPos().y+100],powered:tt}),l(H,{name:"E",position:[M().enablePos().x,M().enablePos().y+100],powered:se}),l(H,{name:"Q",powered:M().output,position:[M().outputPos().x,M().outputPos().y-100]}),l(H,{name:"Q",powered:M().notOutput,position:[M().notOutputPos().x,M().notOutputPos().y-100]})]})})),G().moveToBottom(),yield*G().opacity(1,1),yield*U("Gated D Latch circuit"),_n(),yield*yt(1),ue(qn),ue(pi)});fs.name="flipflop";jf.attach(fs.meta);fs.onReplaced??(fs.onReplaced=new ge(fs.config));let ol;ol??(ol=new Ce("registers",!1));ol.loadData({version:0,timeEvents:[],seed:402488104});const Yf=ol;var qf=Object.defineProperty,Vf=Object.getOwnPropertyDescriptor,zr=(i,t,e,n)=>{for(var s=n>1?void 0:n?Vf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&qf(t,e,s),s};class wn extends ${constructor(t){super({...t}),this.stored="",this.output=W(()=>{if(this.load()){let e=this.input().length,n=e-this.numBits();n<0&&(n=0),this.stored=this.input().substring(n,e).padStart(this.numBits(),"0")}return(this.stored==""||this.reset())&&(this.stored="0".repeat(this.numBits())),this.stored}),this.rectRef=C(),this.width=150,this.getIOPos=(e,n)=>{let s=this.width/(this.numBits()+1),o=this.width/2-s*(e+1),a=n?50:-50;return new d(o,a).transformAsPoint(this.localToWorld())},this.getInputPos=e=>this.getIOPos(e,!0),this.getOutputPos=e=>this.getIOPos(e,!1),this.add(l(lt,{children:[l(At,{ref:this.rectRef,fill:Ge,width:this.width,height:100,lineWidth:we,stroke:()=>this.load()||this.reset()?Jt:ee,lineJoin:"round"}),l(q,{text:()=>this.numBits()+" Bit Register",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z})]}))}}zr([k(8),L()],wn.prototype,"numBits",2);zr([k(""),L()],wn.prototype,"input",2);zr([k(!1),L()],wn.prototype,"load",2);zr([k(!1),L()],wn.prototype,"reset",2);const ds=nn(function*(i){const t=C(),e=[],n=W(0),s=W(!0),o="";de(),i.add(l(lt,{children:[l(ie,{ref:w(e,e.length),position:[-650,-100],opacity:0,columnNames:["Data"],columnData:[["0000"],["1010"]]}),l(ie,{ref:w(e,e.length),position:[-650,-100],opacity:0,columnNames:["Data","Load"],columnData:[["0000",!0],["0000",!1],["0010",!1],["0010",!0],["1010",!0],["1010",!1],["0000",!1]]})]}));const a=[],c={},g=C(),v=[],A=W(()=>{var R=e[n()].outputRow()[0].split("");return R||[0,0,0,0]}),P=C(),M=C(),G=W(!1),K=C(),I=W(!1),X=C(),V=[],ut=[],D={},tt=C();let ot=[0,0,0,0],_=ot.map(R=>W(R));const pt=()=>{v.length!=0&&v.forEach((R,z)=>{ot[z]=R.output()?1:0}),ot.map((R,z)=>_[z](R))};pt();const ht=W(300),Et=A().length,se=150,rt=W(()=>ht()*(Et-2)/2+se/2),xt=100,Nt=430,ae=400,Gt=70,et=2;i.fill(sn),i.add(l(lt,{children:[l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Storing a value"}),l(F,{ref:g,opacity:0,x:200,children:[l(H,{ref:M,x:()=>-rt()-300,y:xt,name:"Clock",powered:!1}),gt(Et).map(R=>l(Wi,{x:()=>R*ht()-rt(),ref:w(v,v.length),data:()=>A()[R]==1,enable:()=>M().powered()})),l(F,{ref:w(c,"initialDLatchWiresAndOutIO"),children:v.map((R,z)=>l(lt,{children:[l(O,{ref:w(a,a.length),powered:()=>A()[z]==1,points:[[R.dataPos().x,ae],R.dataPos()]}),l(O,{ref:w(a,a.length),powered:R.output,points:[R.outputPos(),[R.outputPos().x,R.outputPos().y-100]]}),l(H,{name:"Out"+o[v.length-z],powered:R.output,position:[R.outputPos().x,R.outputPos().y-100]})]}))}),l($,{ref:P,children:v.map((R,z)=>l(H,{name:"D"+o[v.length-z],position:[R.dataPos().x,ae],powered:()=>A()[z]==1}))}),l(O,{ref:w(a,a.length),powered:M().powered,isSolid:!0,points:[M().position(),[v[v.length-1].enablePos().x,xt]]}),v.map(R=>l(O,{ref:w(a,a.length),powered:M().powered,jointStart:!0,isSolid:!0,points:[[R.enablePos().x,xt],R.enablePos()]})),l($,{ref:X,opacity:0,children:[l(H,{ref:K,x:()=>M().position.x(),y:Nt,name:"Load",powered:I}),v.map((R,z)=>l($,{children:[l(jn,{ref:w(V,z),scale:.7,position:[R.dataPos().x,R.dataPos().y+120],inputA:()=>{var Zt;return((Zt=D[z+"A"])==null?void 0:Zt.output())||!1},inputB:()=>{var Zt;return((Zt=D[z+"B"])==null?void 0:Zt.output())||!1}}),l(_e,{ref:w(D,z+"A"),scale:.7,inputA:()=>_[z]()==1,inputB:()=>!I(),position:[V[z].inputAPos.x,V[z].inputAPos.y+55]}),l(_e,{ref:w(D,z+"B"),scale:.7,position:[V[z].inputBPos.x+Gt,V[z].inputBPos.y+55],inputA:I,inputB:()=>A()[z]==1}),l(ai,{ref:w(ut,z),scale:.7,inputA:I,position:[D[z+"A"].inputBPos.x,D[z+"A"].inputBPos.y+70]})]}))]})]})]})),a.reverse().forEach(R=>R.moveToBottom()),Object.values(c).forEach(R=>R.moveToBottom()),I(()=>e[n()].outputRow()[1]);const Fe=yield Ht(re,function*(){yield*Q(...a.map(R=>R.animate()))}),qn=yield Ht(re,function*(){if(s()){yield*yt(1);return}let R=e[n()],z=(R.currentOutputLine()+1)%R.columnData().length;yield*R.select(z,As),yield*yt(1)});yield*dn(ne.Right,1),yield*U("storing a value intro"),yield*Q(g().opacity(1,1),e[0].opacity(1,1)),s(!1);const pi=yield Ht(re,function*(){yield*yt(1/et/2),G()?M().powered(!1):M().powered(!M().powered()),pt()});yield*U("using just latches"),G(!0),s(!0),yield*Q(g().position.y(-100,1),...P().children().map((R,z)=>R.position([D[z+"B"].inputBPos.x,ae+100],1)),c.initialDLatchWiresAndOutIO.opacity(0,1),e[0].opacity(0,1)),c.initialDLatchWiresAndOutIO.remove(),e[0].remove(),g().add(l(F,{ref:w(c,"loadSignalWires"),opacity:0,children:[l(O,{ref:w(a,a.length),powered:I,points:[K().position(),[D[v.length-1+"B"].inputAPos.x,Nt]]}),v.map((R,z)=>l($,{children:[l(O,{ref:w(a,a.length),powered:I,jointStart:!0,points:[[ut[z].inputPos.x,Nt],ut[z].inputPos]}),l(O,{ref:w(a,a.length),powered:ut[z].output,points:[ut[z].outputPos,D[z+"A"].inputBPos]}),l(O,{ref:w(a,a.length),powered:I,jointStart:!0,points:[[D[z+"B"].inputAPos.x,Nt],D[z+"B"].inputAPos]}),l(O,{ref:w(a,a.length),powered:D[z+"A"].output,points:[D[z+"A"].outputPos,V[z].inputAPos]}),l(O,{ref:w(a,a.length),powered:D[z+"B"].output,points:[D[z+"B"].outputPos,[D[z+"B"].outputPos.x,D[z+"B"].outputPos.y-(D[z+"B"].outputPos.y-V[z].inputBPos.y)/2],[V[z].inputBPos.x,D[z+"B"].outputPos.y-(D[z+"B"].outputPos.y-V[z].inputBPos.y)/2],V[z].inputBPos]}),l(O,{ref:w(a,a.length),powered:V[z].output,points:[V[z].outputPos,R.dataPos()]}),l(O,{ref:w(a,a.length),powered:()=>_[z]()==1,points:[R.outputPos(),[R.outputPos().x,R.outputPos().y-30],[R.outputPos().x-57,R.outputPos().y-30],[R.outputPos().x-57,D[z+"A"].inputAPos.y+30],[D[z+"A"].inputAPos.x,D[z+"A"].inputAPos.y+30],D[z+"A"].inputAPos]}),l(O,{ref:w(a,a.length),powered:()=>A()[z]==1,points:[P().children()[z].position(),D[z+"B"].inputBPos]})]}))]})),c.loadSignalWires.moveToBottom(),yield*Q(X().opacity(1,1),c.loadSignalWires.opacity(1,1),e[1].opacity(1,1)),v.forEach((R,z)=>R.data(V[z].output)),pt(),n(1),s(!1),G(!1),yield*U("Load signal");const on=100;i.add(l(lt,{children:[l(wn,{opacity:0,ref:tt,input:()=>A().join(""),load:I,numBits:4}),l(F,{opacity:0,ref:w(c,"tinyRegisterWires"),children:[l(lt,{children:gt(Et).map(R=>{let z=on*((Et-1)/2)-on*R,Zt=[100,120,120,100];return l(lt,{children:[l(O,{ref:w(a,a.length),powered:()=>A()[Et-R-1]==1,points:[[z,200],[z,Zt[R]],[tt().getInputPos(R).x,Zt[R]],tt().getInputPos(R)]}),l(O,{ref:w(a,a.length),powered:()=>tt().output()[Et-R-1]=="1",points:[tt().getOutputPos(R),[tt().getOutputPos(R).x,-Zt[R]],[z,-Zt[R]],[z,-200]]}),l(H,{x:z,y:200,name:"In"+o[R],powered:()=>A()[Et-R-1]==1}),l(H,{x:z,y:-200,name:"Out"+o[R],powered:()=>tt().output()[Et-R-1]=="1"})]})})}),l(O,{ref:w(a,a.length),powered:I,points:[[-200,0],[0,0]]}),l(H,{x:-200,name:"Load",powered:I})]})]})),c.tinyRegisterWires.moveToBottom(),yield*Q(g().position([0,0],1),g().scale(0,1),g().opacity(0,1),le(.7,c.tinyRegisterWires.opacity(1,1)),le(.7,tt().opacity(1,1))),g().remove(),yield*U("N-bit Register circuit"),_n(),yield*yt(1),ue(Fe),ue(pi),ue(qn)});ds.name="registers";Yf.attach(ds.meta);ds.onReplaced??(ds.onReplaced=new ge(ds.config));let rl;rl??(rl=new Ce("programCounter",!1));rl.loadData({version:0,timeEvents:[],seed:402488104});const Uf=rl,gs=nn(function*(i){const t=C(),e="";de();const n=[],s={},o=C(),a=[],c=C(),g=4;let v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=v.map(D=>W(D));const P=()=>{if(a.length!=0)for(var D=0;D<g;D++){const tt=a[D];tt.enable()||(v[D]=tt.notOutput()?1:0)}v.map((tt,ot)=>A[ot](tt))};P();const M=W(200),G=150,K=W(()=>M()*(g-2)/2+G/2),I=-100,X=.5;i.fill(sn),i.add(l(lt,{children:[l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Counting"}),l(F,{ref:o,scale:1.5,rotation:0,opacity:0,x:0,y:100,children:[l(H,{ref:c,x:()=>K()+200,y:I,name:"Clock",powered:!1}),gt(g).map(D=>l(Wi,{rotation:-90,x:()=>D*M()-K(),ref:w(a,a.length),data:()=>A[D]()==1})),l(F,{ref:w(s,"initialDLatchWiresAndOutIO"),children:a.map((D,tt)=>l(lt,{children:[l(O,{ref:w(n,n.length),powered:D.notOutput,points:[D.notOutputPos(),[D.notOutputPos().x-30,D.notOutputPos().y],[D.notOutputPos().x-30,D.notOutputPos().y-50],[D.dataPos().x+20,D.notOutputPos().y-50],[D.dataPos().x+20,D.dataPos().y],D.dataPos()]}),l(O,{ref:w(n,n.length),powered:D.output,points:[D.outputPos(),[D.outputPos().x-50,D.outputPos().y],[D.outputPos().x-50,D.outputPos().y+100]]}),l(H,{name:"Out"+e[a.length-tt],powered:D.output,position:[D.outputPos().x-50,D.outputPos().y+100]}),tt!=0&&l(O,{ref:w(n,n.length),powered:D.notOutput,jointStart:!0,points:[[D.notOutputPos().x-30,D.notOutputPos().y],a[tt-1].enablePos()]})]}))}),l(O,{ref:w(n,n.length),powered:c().powered,points:[c().position(),[c().position().x,a[g-1].enablePos().y],a[g-1].enablePos()]}),l(q,{x:-K()-200,fontSize:30,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:()=>"Value: "+parseInt(a.map(D=>D.output()?"1":"0").join(""),2).toString()})]})]})),n.reverse().forEach(D=>D.moveToBottom()),Object.values(s).forEach(D=>D.moveToBottom()),a.forEach((D,tt)=>{tt!=g-1?D.enable(a[tt+1].notOutput):D.enable(c().powered)});const V=yield Ht(re,function*(){yield*Q(...n.map(D=>D.animate()))});yield*dn(ne.Right,1),yield*U("counting intro"),yield*Q(o().opacity(1,1));const ut=yield Ht(re,function*(){yield*yt(1/X/2),P(),c().powered(!c().powered())});yield*U("counter circuit"),yield*t().text("Asynchronous Counter",1),yield*U("async counter"),yield*t().text("Program Counter",1),yield*U("program counter"),_n(),yield*yt(1),ue(V),ue(ut)});gs.name="programCounter";Uf.attach(gs.meta);gs.onReplaced??(gs.onReplaced=new ge(gs.config));let al;al??(al=new Ce("theCPU",!1));al.loadData({version:0,timeEvents:[],seed:402488104});const Jf=al;var Zf=Object.defineProperty,Qf=Object.getOwnPropertyDescriptor,Fu=(i,t,e,n)=>{for(var s=n>1?void 0:n?Qf(t,e):t,o=i.length-1,a;o>=0;o--)(a=i[o])&&(s=(n?a(t,e,s):a(s))||s);return n&&s&&Zf(t,e,s),s};class Tr extends ${constructor(t){super({...t}),this.rectRef=C(),this.carryInPos=new d(0,0),this.sumPos=new d(50,-50).transformAsPoint(this.localToWorld()),this.carryOutPos=new d(-50,-50).transformAsPoint(this.localToWorld()),this.output=W(()=>{const e=parseInt(this.input(),2);return e==0?"0".repeat(this.numBitsOut()):(1<<this.numBitsOut()-1>>e-1).toString(2).padStart(this.numBitsOut(),"0")}),this.size=150,this.getIOPos=(e,n,s)=>{let o=this.size/(n+1),a=this.size/2-o*(e+1),c=this.size/2,g,v=0;switch(s){case 0:g=a,v=c*-1;break;case 1:g=a,v=c;break;case 2:g=c*-1,v=a;break;case 3:g=c,v=a;break}return new d(g,v).transformAsPoint(this.localToWorld())},this.getTopIOPos=(e,n=this.numBitsOut())=>this.getIOPos(e,n,0),this.getBottomIOPos=(e,n=this.numBitsOut())=>this.getIOPos(e,n,1),this.getLeftIOPos=(e,n=this.numBitsOut())=>this.getIOPos(e,n,2),this.getRightIOPos=(e,n=this.numBitsOut())=>this.getIOPos(e,n,3),this.add(l(lt,{children:[l(At,{ref:this.rectRef,fill:Ge,width:this.size,height:this.size,lineWidth:we,stroke:()=>parseInt(this.input(),2)?Jt:ee,lineJoin:"round"}),l(q,{text:"Decoder",fill:Y,fontFamily:"Helvetica",fontSize:Yn,fontWeight:Z})]}))}}Fu([k(8),L()],Tr.prototype,"numBitsOut",2);Fu([k(""),L()],Tr.prototype,"input",2);const ms=nn(function*(i){const t=C();i.fill(sn);const e="",n=[],s={},o=()=>{n.reverse().forEach(f=>f.moveToBottom()),Object.values(s).forEach(f=>f.moveToBottom())},a=W(!1),c=W(!1),g=W(!1),v=W(!1),A=W(!1),P=W(!1),M=W(!1),G=W(!1),K=W(!1),I=W(!1),X=W(!1),V=W(!1),ut=W(!1),D=W(!1),tt=W(!1),ot=W(!1),_=W(!1),pt=W(!1),ht=["PCI","PCO","PCE","MRI","RVI","RVO","IRI","IRO","ARI","ARO","BRI","BRO","EA","SRO","HE"],Et={PCI:v,PCO:g,PCE:A,MRI:P,RVI:G,RVO:M,IRI:D,IRO:tt,ARI:I,ARO:X,BRI:V,BRO:ut,EA:ot,SRO:_,HE:c},se={PCI:()=>me().output(),MRI:()=>wi().output(),IRI:()=>ce().output(),ARI:()=>We().output(),BRI:()=>Ne().output(),EA:()=>{mi().output(),Qe().output()}},rt=["PCO MRI","RVO IRI PCE"],xt=rt.map(f=>f.split(" ")),Nt={LOADA:["IRO MRI","RVO ARI"],LOADB:["IRO MRI","RVO BRI"],SETA:["IRO ARI"],STOREA:["IRO MRI","ARO RVI"],STORETB:["BRO MRI","ARO RVI"],ADD:["EA","SRO ARI"],JMP:["IRO PCI"],HALT:["HE"]},ae=["IRO","PCI"],Gt=["NOOP","LOADA","LOADB","SETA","STOREA","STORETB","MOV","ADD","JMP","JMPC","HALT"],et=["PCO","BRO","ARO","MRI","PCI","BRI","ARI"],Fe={PCO:1,BRO:2,ARO:3,MRI:4,PCI:5,BRI:6,ARI:7},qn={A:1,B:2,P:4,M:8},pi=(f,T="null")=>{let it=f.split(" ");(it.length>2&&!f.includes("MOV")||it.length>3)&&on.error("Too many spaces in line: "+JSON.stringify(it));let jt=f;return Gt.forEach((qt,Ft)=>{if(it[0].includes(qt)){if(qt=="MOV"){jt=Ft.toString(2).padStart(R,"0")+" "+qn[it[1]].toString(2).padStart(R/2,"0")+qn[it[2]].toString(2).padStart(R/2,"0");return}jt=Ft.toString(2).padStart(R,"0")+" "+(it.length==2?parseInt(it[1]).toString(2).padStart(R,"0"):"0".repeat(R))}}),jt};i.add(l(lt,{children:l(q,{ref:t,position:[0,-300],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Putting it all together"})}));let on=de();yield*dn(ne.Right,1),yield*U("cpu intro");const R=8,z=.5,Zt=.2,rn=.23,Cs=.05,Dt=W(0);let On=3,Ln=1/On/2;const _o=-450,an=300,Er=50,fi=-220,Ho=100,di=65,Fr=-390,Wr=-400,Nr=-480,io=150,Go=-200,Xo=325,Yo=Go-55,qo=40,Vo=300,Uo=220,gi=-490,Jo=fi-110,Zo=Ho+300,Ye=C();var mn=gt(R).map(f=>"0").join("");W(!1);const oe=gt(R).map(f=>W(0)),jr=1200,_r=50,ln=f=>f*_r;i.add(l(lt,{children:l(F,{ref:Ye,width:400,opacity:Dt,position:[-200,_o],children:gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,jointStart:!0,jointEnd:!0,isSolid:!0,points:[[ln(f),0],[ln(f),jr]]}))})})),o(),yield*Q(t().position.x(-350,1),t().text("The Bus",1),le(.5,Dt(1,1))),oe[0](1),oe[1](1),oe[2](1),oe[3](1),yield*U("bus"),yield*Q(Ye().scale(z,1),Ye().position.x(Ye().position.x()*z,1)),yield*Q(t().opacity(0,.5),Dt(0,.5)),oe[0](0),oe[1](0),oe[2](0),oe[3](0),oe.map((f,T)=>f(()=>{let it=!1;if(X()&&(it=it||We().output()[T]=="1"),ut()&&(it=it||Ne().output()[T]=="1"),_()&&(it=it||mi().output()[T]=="1"),M()){let qt=parseInt(wi().output(),2),Ft=Qt().columnData()[qt][2],De=pi(Ft);it=it||De[De.length-R+T]=="1"}if(g()){let qt=me().output();it=it||qt[T]=="1"}if(tt()){let qt=ce().output().slice(R);it=it||qt[T]=="1"}let jt=it?1:0;return mn=mn.slice(0,T)+jt.toString()+mn.slice(T+1),jt}));const so=700,We=C(),Ne=C(),Je=C(),Pe=C(),je=C(),Ts=C(),Is=C(),Qo=(f,T,it,jt,qt,Ft)=>l(lt,{children:l(At,{ref:jt,position:[f,0],width:715,height:so,lineWidth:5,stroke:Y,radius:10,children:[l(q,{offset:[0,-1],position:[0,-so/2+15],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:`Register ${T}`}),l(wn,{position:[100,100],ref:Ft,numBits:R,input:()=>it()&&mn,load:it}),l($,{ref:qt,position:[0,0],children:[gt(R).map(De=>l(O,{ref:w(n,n.length),jointStart:!0,points:[[Ft().getInputPos(De).x,300],Ft().getInputPos(De)]})),gt(R).map(De=>l(O,{ref:w(n,n.length),jointEnd:!0,points:[Ft().getOutputPos(R-De-1),[Ft().getOutputPos(R-De-1).x,-90-+De*17],[-300,-90-De*17]]})),l(O,{ref:w(n,n.length),powered:!0,points:[[100,230],[-150,230],[-150,100],[100,100]]}),l(H,{position:[100,230],powered:!0,name:`Enable ${T} Register In`}),l(H,{position:[-150,100],powered:!0,name:"Load"}),l(H,{position:[100,-10],powered:!1,name:`Enable ${T} Register Out`})]})]})});i.add(l(lt,{children:l($,{ref:Je,opacity:0,children:[Qo(-400,"A",I,Pe,Ts,We),Qo(400,"B",V,je,Is,Ne)]})})),Ts().moveToBottom(),Is().moveToBottom(),o();const Hr=yield Ht(re,function*(){yield*Q(...n.map(f=>f.animate()))});yield*Q(Je().opacity(1,1)),yield*U("A and B registers"),We().reparent(Pe()),Ne().reparent(je()),yield*Q(Ts().opacity(0,.5),Is().opacity(0,.5)),Ts().remove(),Is().remove(),ue(Hr);const oo=Pe().children()[0],ro=je().children()[0];yield*Q(Pe().width(oo.width()+30,1),je().width(ro.width()+30,1),Pe().height(200,1),je().height(200,1),oo.position([0,-55],1),ro.position([0,-55],1),We().position([0,35],1),Ne().position([0,35],1),oo.offset([0,0],1),ro.offset([0,0],1)),yield*Q(Dt(1,1),Pe().position([0,-150],1),je().position([0,150],1),Pe().rotation(-90,1),je().rotation(-90,1),Je().scale(z-Zt,1),Je().position([an,Er],1));const It=(f,T,it)=>new d(f).transformAsPoint(T.localToWorld()).transformAsPoint(it.worldToLocal()),ao=C();Je().add(l($,{ref:ao,opacity:0,children:[gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,isSolid:!0,jointStart:!0,points:[[It([ln(f),0],Ye(),Je()).x,Pe().position().y+50-15*f],[Pe().top().x-115,Pe().position().y+50-15*f]]})),gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,isSolid:!0,jointStart:!0,points:[[It([ln(f),0],Ye(),Je()).x,je().position().y+50-15*f],[je().top().x-115,je().position().y+50-15*f]]})),l($,{scale:1+z,children:[l(H,{rotation:-90,position:[Pe().top().x-60,Pe().position.y()+40],powered:I,name:"A Register In"}),l(H,{rotation:-90,position:[Pe().top().x,Pe().position.y()+40],powered:X,name:"A Register Out"}),l(H,{rotation:-90,position:[je().top().x-60,je().position.y()-40],powered:V,name:"B Register In"}),l(H,{rotation:-90,position:[je().top().x,je().position.y()-40],powered:ut,name:"B Register Out"})]})]})),yield*ao().opacity(1,1),ao().opacity(Dt),Je().opacity(Dt),yield*U("A and B mini");const Xt=C(),lo=C(),uo=C(),Bs=R,Ni=190,Bt=[],Mn=700,Ko=1700;i.add(l(lt,{children:l(At,{ref:Xt,width:Ko,height:Mn,lineWidth:5,opacity:0,stroke:Y,radius:10,children:[l(q,{ref:lo,offset:[0,-1],position:[0,-Mn/2+15],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Ripple Adder"}),l(F,{ref:uo,layout:!0,direction:"row",gap:20,offset:[-1,-1],position:[-Ko/2+15,-Mn/2+15],children:l(H,{powered:ot,name:"Enable Adder"})}),gt(Bs).map(f=>l(No,{ref:w(Bt,Bt.length),position:[f*Ni-4*Ni+95,0],inputA:()=>We().output()[f]=="1"&&ot(),inputB:()=>Ne().output()[f]=="1"&&ot(),carryIn:()=>{var T;return((T=Bt[f+1])==null?void 0:T.carryOut())||!1},opacity:1})),l($,{ref:w(s,"rippleWires"),children:[Bt.map((f,T)=>l($,{children:[l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:f.inputA,points:[[f.position.x(),f.inputAPos.y+100],[f.inputAPos.x,f.inputAPos.y+100],f.inputAPos]}),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:f.inputB,points:[[f.position.x(),f.inputBPos.y+200],[f.inputBPos.x,f.inputBPos.y+200],f.inputBPos]}),l(O,{ref:w(n,n.length),isSolid:!0,powered:f.sum,points:[f.sumPos,[f.sumPos.x,f.sumPos.y-70]]}),T!=0&&l(O,{ref:w(n,n.length),isSolid:!0,powered:f.carryOut,points:[f.carryOutPos,[f.carryOutPos.x,f.carryOutPos.y-20],[f.position.x()-Ni/2,f.carryOutPos.y-20],[f.position.x()-Ni/2,Bt[T-1].carryInPos.y],Bt[T-1].carryInPos]}),l(H,{powered:f.inputA,position:[f.position.x(),f.inputAPos.y+100],name:"A"+e[Bs-T]}),l(H,{powered:f.inputB,position:[f.position.x(),f.inputBPos.y+200],name:"B"+e[Bs-T]}),l(H,{powered:f.sum,position:[f.sumPos.x,f.sumPos.y-70],name:"S"+e[Bs-T]})]})),l(O,{ref:w(n,n.length),isSolid:!0,powered:pt,points:[Bt[0].carryOutPos,[Bt[0].carryOutPos.x,Bt[0].carryOutPos.y-150]]}),l(H,{position:[Bt[0].carryOutPos.x,Bt[0].carryOutPos.y-150],powered:pt,name:"Overflow"})]})]})})),pt(Bt[0].carryOut),o(),yield*Dt(0,1),yield*Xt().opacity(1,1),yield*U("ripple adder"),yield*Q(Xt().scale(z-rn,1),uo().opacity(0,.5),Xt().height(Mn-50,1),lo().position.y(lo().position.y()+30,1)),uo().remove(),yield*Q(Xt().position([an+Ho,fi],1),Dt(1,1)),Xt().opacity(Dt);const mt=(f,T)=>new d(f).transformAsPoint(T.worldToLocal());s.rippleWires.add(l(lt,{children:l($,{ref:w(s,"rippleInputs"),opacity:0,children:[Bt.map((f,T)=>l(lt,{children:l(O,{ref:w(n,n.length),powered:()=>ot()&&We().output()[T]=="1",isSolid:!0,jointStart:!0,jointEnd:!0,points:[mt([We().getInputPos(T).x+15,We().getInputPos(T).y],Xt()),mt([We().getInputPos(T).x+di+8*T,We().getInputPos(T).y],Xt()),[mt([We().getInputPos(T).x+di+8*T,We().getInputPos(T).y],Xt()).x,Xt().position().y+Mn/2-fi+15*T],[Bt[T].inputAPos.x,Xt().position().y+Mn/2-fi+15*T],[Bt[T].inputAPos.x,Bt[T].inputAPos.y+100]]})})),Bt.map((f,T)=>l(lt,{children:l(O,{ref:w(n,n.length),powered:()=>ot()&&Ne().output()[T]=="1",isSolid:!0,jointStart:!0,jointEnd:!0,points:[mt([Ne().getInputPos(T).x+15,Ne().getInputPos(T).y],Xt()),mt([Ne().getInputPos(T).x+di+70+8*T,Ne().getInputPos(T).y],Xt()),[mt([Ne().getInputPos(T).x+di+70+8*T,Ne().getInputPos(T).y],Xt()).x,Xt().position().y+Mn/2-fi+15*T+150],[Bt[T].inputBPos.x,Xt().position().y+Mn/2-fi+15*T+150],[Bt[T].inputBPos.x,Bt[T].inputBPos.y+200]]})})),l($,{scale:1+rn,children:l(H,{rotation:90,minWidth:450,powered:ot,position:It([Je().position.x()-120,Je().position.y()-Pe().height()-20],Je(),Xt()),name:"Enable Adder"})})]})})),yield*s.rippleInputs.opacity(1,1),yield*U("ripple adder mini");const Te=C(),un=C(),mi=C();i.add(l($,{opacity:0,ref:Te,scale:z-Zt,position:[an,Fr],children:l(At,{ref:un,rotation:-90,width:200,height:200,lineWidth:5,stroke:Y,radius:10,children:[l(q,{position:[0,-55],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Sum Register"}),l(wn,{position:[0,35],ref:mi,numBits:R,input:()=>ot()&&Bt.map(f=>f.sum()?"1":"0").join(""),load:ot})]})})),un().width(un().children()[0].width()+30);const yi=13;Te().add(l($,{ref:w(s,"sumRegisterWires"),children:[gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,isSolid:!0,jointStart:!0,points:[[It([ln(f),0],Ye(),Te()).x,un().position().y+50-15*f],[un().top().x-90,un().position().y+50-15*f]]})),gt(R).map(f=>l(O,{ref:w(n,n.length),powered:Bt[f].sum,isSolid:!0,points:[It([Bt[f].sumPos.x,Bt[f].sumPos.y-70],Xt(),Te()),It([Bt[f].sumPos.x,Bt[f].sumPos.y-185+yi*f],Xt(),Te()),It([Bt[R-1].sumPos.x-(R-1)*yi+yi*f,Bt[f].sumPos.y-185+yi*f],Xt(),Te()),[It([Bt[R-1].sumPos.x-(R-1)*yi+yi*f,0],Xt(),Te()).x,mt(mi().getInputPos(R-1-f),Te()).y],[un().bottom().x,mt(mi().getInputPos(R-1-f),Te()).y]]})),l(H,{scale:1+z,name:"Sum Out",rotation:-90,position:[un().top().x-50,un().position.y()],powered:_}),l(H,{scale:1+z,name:"Enable Adder",rotation:-90,position:[un().bottom().x+50,un().position.y()],powered:ot})]})),Te().moveBelow(Xt()),o(),yield*Te().opacity(1,1),Te().opacity(Dt),yield*U("sum register");const Vn=C(),xe=C(),me=C();i.add(l($,{opacity:0,ref:Vn,scale:z-Zt,position:[-an,Wr],children:l(At,{ref:xe,rotation:90,width:200,height:200,lineWidth:5,stroke:Y,radius:10,children:[l(q,{position:[0,-55],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Program Counter"}),l(wn,{position:[0,35],ref:me,numBits:R,input:()=>mn,load:!1})]})})),xe().width(xe().children()[0].width()+30),Vn().add(l($,{ref:w(s,"programCounterWires"),children:[l(q,{position:[0,xe().left().y-15],offset:[0,1],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:()=>"Value: "+parseInt(me().output(),2)}),gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,isSolid:!0,jointStart:!0,points:[[It([ln(f),0],Ye(),Vn()).x,xe().position().y+50-15*f],[xe().top().x+115,xe().position().y+50-15*f]]})),l(H,{scale:1+z,name:"Program Counter Out",rotation:90,position:[xe().top().x+50,xe().position.y()],powered:g}),l(H,{scale:1+z,name:"Set Program Counter",rotation:90,position:[xe().top().x+50+90,xe().position.y()],powered:v}),l(H,{scale:1+z,name:"Counter Enable",rotation:90,position:[xe().bottom().x-55,xe().position.y()],powered:A})]})),yield*Vn().opacity(1,1),Vn().opacity(Dt),yield*U("program counter");const hn=W(!1),qe=C();i.add(l(lt,{children:l(H,{opacity:0,ref:qe,scale:z,name:"Clock",powered:hn,position:[-an-io,Nr]})})),s.programCounterWires.add(l($,{ref:w(s,"counterEnableWire"),opacity:0,children:l(O,{ref:w(n,n.length),powered:hn,isSolid:!0,points:[It(qe().position(),i,Vn()),[xe().bottom().x-55,It(qe().position(),i,Vn()).y],[xe().bottom().x-55,xe().position.y()]]})})),o();const tr=()=>{if(!(!a()||c())){if(hn(!hn()),A()&&!v()&&hn()){let f=me().output(),T=parseInt(f,2);T+=1;let it=T.toString(2).padStart(R,"0");me().input(it.slice(it.length-R)),me().load(!0)}else v()&&hn()?(me().input(()=>v()&&mn),me().load(!0)):me().load(!1);if(me().output(),G()&&K()){K(!1);let f=parseInt(wi().output(),2);bi(f,"00000000 "+mn)}G()||K(!0)}};let ji=yield Ht(re,function*(){yield*yt(Ln),tr()});yield*Q(qe().opacity(1,.5),s.counterEnableWire.opacity(1,.5)),qe().opacity(Dt),a(!0),A(!0),yield*yt(1.5),a(!1),A(!1),yield*yt(.5),hn(!1),me().reset(!0),me().load(!0),me().output(),me().reset(!1),me().load(!1),ue(ji),yield*U("clock"),yield*Dt(0,1);const he=C(),yn=C(),Qt=C(),er=50;i.add(l(At,{ref:he,opacity:0,lineWidth:5,width:900,stroke:Y,radius:10,children:[l(q,{offset:[0,1],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"RAM"}),l(At,{ref:yn,height:500,stroke:"#ff0000",lineWidth:0,offset:[0,1],clip:!0,children:l(ie,{ref:Qt,columnNames:["dec","address","value"],columnData:gt(er).map(f=>[f,f.toString(2).padStart(R,"0"),"0".repeat(R)+" "+"0".repeat(R)])})})]})),he().width(Qt().table().width()+30),yn().width(Qt().table().width()+30);const Rn=15,Un=Qt().cellHeight;he().height(Un*Rn+100),he().children()[0].position.y(-(Un*Rn/2)+25),yn().height(Un*Rn+10),Qt().currentOutputLine(0),yn().position([he().bottom().x,he().bottom().y-5]),Qt().position.y(-(Un*(Rn/2))+Qt().table().height()/2);function*ho(f,T){f<Rn/2-2&&(f=Rn/2-2),f>Qt().columnData().length-1-Rn/2&&(f=Qt().columnData().length-1-Rn/2),yield*Qt().position.y(-(Un*(f+2))+Qt().table().height()/2,T,Ou)}yield*he().opacity(1,1),yield*yt(.5),yield*Q(ho(49,1),Qt().select(49,1)),yield*yt(1),yield*Q(ho(0,1),Qt().select(0,1)),yield*U("RAM"),yield*Q(he().scale(z,1),he().position([-an-Xo,Go],1),Dt(1,1)),he().opacity(Dt),yield*U("RAM mini");const vi=C(),nr=C(),_i=er,Jn=_i-(Rn-1),Ls=_i-Jn;i.add(l(At,{ref:vi,scale:z,position:he().topLeft(),opacity:0,offset:[1,-1],lineWidth:5,width:900,stroke:Y,radius:10,children:[l(q,{offset:[0,1],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"VRAM"}),l(ie,{ref:nr,position:[0,40],hasSelector:!1,columnNames:["dec addr","dec value"],columnData:()=>Qt().columnData().slice(Jn,_i+1).map(f=>[f[0],parseInt(f[2].replace(" ",""),2).toString()])})]})),vi().width(nr().table().width()+30),vi().height(Un*(Ls+1)+100),vi().children()[0].position.y(-(Un*Ls/2));const bi=(f,T)=>{let it=Array.from(Qt().columnData());it[f][2]=T,Qt().columnData(it)};yield*vi().opacity(1,1),vi().opacity(Dt),yield*U("VRAM");const Ze=C(),cn=C(),wi=C();i.add(l($,{opacity:0,ref:Ze,scale:z-Zt,position:[-an,Yo],children:l(At,{ref:cn,rotation:90,width:200,height:200,lineWidth:5,stroke:Y,radius:10,children:[l(q,{position:[0,-55],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Memory Register"}),l(wn,{position:[0,35],ref:wi,numBits:R,input:()=>P()&&mn,load:P})]})}));const Ms=630,Ds=Ms-40,co=Ms-215,ir=Ds-280;cn().width(cn().children()[0].width()+30),Ze().add(l($,{ref:w(s,"memRegisterWires"),children:[gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,isSolid:!0,jointStart:!0,points:[[It([ln(f),0],Ye(),Ze()).x,cn().position().y+50-15*f],[cn().top().x+80,cn().position().y+50-15*f]]})),gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>(M()||G())&&wi().output()[f]=="1",isSolid:!0,jointEnd:!0,points:[[cn().bottom().x,cn().bottom().y+50-15*f],[It(yn().right(),he(),Ze()).x,cn().bottom().y+50-15*f]]})),gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,isSolid:!0,jointEnd:!0,points:[[It(yn().right(),he(),Ze()).x+30,co-50-15*f],[It([ln(f),0],Ye(),Ze()).x,co-50-15*f]]})),gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,isSolid:!0,jointEnd:!0,points:[[It(yn().right(),he(),Ze()).x+30,Ms-50-15*f],[It([ln(f),0],Ye(),Ze()).x,Ms-50-15*f]]})),l(H,{scale:1+z,name:"RAM In",rotation:90,position:[It(yn().right(),he(),Ze()).x+50,ir],powered:G}),l(H,{scale:1+z,name:"RAM Value Out",rotation:90,position:[It(yn().right(),he(),Ze()).x+50,Ds],powered:M}),l(H,{scale:1+z,name:"Set Memory Register",rotation:90,position:[cn().top().x+50,cn().position.y()],powered:P})]})),o(),yield*Ze().opacity(1,1),Ze().opacity(Dt),yield*U("memory register");const Dn=C(),Ie=C(),ce=C();i.add(l($,{opacity:0,ref:Dn,scale:z-Zt,position:[-an,qo],children:l(At,{ref:Ie,rotation:90,width:200,height:200,lineWidth:5,stroke:Y,radius:10,children:[l(q,{position:[0,-55],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Instruction Register"}),l(wn,{position:[0,35],ref:ce,numBits:R*2,input:()=>(M()?pi(Qt().outputRow()[2]).slice(0,R):"0".repeat(R))+mn,load:D})]})})),Ie().width(Ie().children()[0].width()+30),Dn().add(l($,{ref:w(s,"instructionRegisterWires"),children:[gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>oe[f]()==1,isSolid:!0,jointStart:!0,points:[[It([ln(f),0],Ye(),Dn()).x,Ie().position().y+100-15*f],[Ie().top().x+115,Ie().position().y+100-15*f]]})),gt(R).map(f=>l(O,{ref:w(n,n.length),powered:()=>M()&&ce().output()[f]=="1",isSolid:!0,points:[It([yn().right().x+30,Ds-280-8*f],he(),Dn()),[Ie().top().x+250+15*f,It([0,Ds-280-8*f],he(),Dn()).y],[Ie().top().x+250+15*f,Ie().top().y-150+15*f],[Ie().top().x+115,Ie().top().y-150+15*f]]})),l(H,{scale:1+z,name:"Set Instruction Register",rotation:90,position:[Ie().top().x+50+90,Ie().position.y()],powered:D}),l(H,{scale:1+z,name:"Instruction Register Out",rotation:90,position:[Ie().top().x+50,Ie().position.y()],powered:tt})]})),Dn().moveBelow(he()),o(),yield*Dn().opacity(1,1),Dn().opacity(Dt),yield*U("instruction register");const Zn=C(),$n=C(),po=C();i.add(l($,{ref:Zn,opacity:0,scale:z,position:[an+350,220],children:[l(q,{position:[0,-55],fontSize:40,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Instructions"}),l(ie,{ref:$n,hasSelector:!1,x:-10,columnNames:["LOADA $N","ADD","STOREA $N","JMP $N"],columnData:[["PCO MRI","PCO MRI","PCO MRI","PCO MRI"],["RVO IRI PCE","RVO IRI PCE","RVO IRI PCE","RVO IRI PCE"],["IRO MRI","EA","IRO MRI","IRO PCI"],["RVO ARI","SRO ARI","ARO RVI",""]]}),l(ie,{ref:po,x:10,hasSelector:!1,columnNames:["Ctrl Signals","Description"],columnData:[["PCI","Program Counter In"],["PCO","Program Counter Out"],["PCE","Program Counter Enable"],["MRI","Memory Register In"],["RVI","RAM Value In"],["RVO","RAM Value Out"],["IRI","Instruction Register In"],["IRO","Instruction Register Out"],["ARI","A Register In"],["ARO","A Register Out"],["BRI","B Register In"],["BRO","B Register Out"],["EA","Enable Adder"],["SRO","Sum Register Out"],["HE","Halt enable"]]})]})),$n().table().offset([1,-1]),po().table().offset([-1,-1]),Zn().children()[0].position.x(-1*($n().table().width()/2-10)),yield*Zn().opacity(1,1);const sr=190;yield*U("control logic intro"),yield*Q(Dt(0,1),Zn().position(Zn().position().add([0,sr]),1));const Hi=C(),ft=C(),Gr=C(),Gi=1700,or=800,Xr=.6;i.add(l(lt,{children:l(At,{ref:Hi,width:Gi,height:or,position:[0,-50],lineWidth:5,opacity:0,stroke:Y,radius:10,children:[l(q,{ref:Gr,offset:[0,-1],position:[0,-or/2+15],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Control Logic"}),l($,{ref:ft,scale:Xr})]})}));const St=C(),Yt=R/2;ft().add(l(lt,{children:[l(wn,{ref:St,position:[-1300,-570],numBits:Yt}),l(q,{position:St().position().addY(-70),fontSize:30,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"micro counter"})]})),yield*Hi().opacity(1,1),yield*U("microcode counter");const $s=C(),rr=C(),Yr=.35,fo=450,vn=25,bn=Yt*15+30,Pi=25,ks=.75,kn=200,Xi=30,xi=5,Yi=(fo-bn)/xi,qi=7,Vi=[];ft().add(l($,{ref:$s,opacity:0,children:[gt(Yt).map(f=>l(O,{ref:w(n,n.length),isSolid:!0,points:[mt(St().getInputPos(f),ft()),mt(St().getInputPos(f).addY(f*10+10),ft()),mt(St().getInputPos(f).add([(Yt-f-1)*vn+Pi,f*10+10]),ft()),mt(St().getInputPos(f).add([(Yt-f-1)*vn+Pi,bn]),ft())]})),gt(Yt).map(f=>l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,points:[mt(St().getInputPos(f).add([(Yt-f-1)*vn,f*10+10]),ft()),mt(St().getInputPos(f).add([(Yt-f-1)*vn,fo]),ft())]})),gt(Yt).map(f=>l(ai,{ref:w(Vi,Vi.length),position:mt(St().getInputPos(f).add([(Yt-f-1)*vn+Pi,bn]),ft()),rotation:180,scale:Yr})),gt(Yt).map(f=>l(O,{ref:w(n,n.length),isSolid:!0,powered:Vi[f].output,points:[mt(St().getInputPos(f).add([(Yt-f-1)*vn+Pi,bn]),ft()),mt(St().getInputPos(f).add([(Yt-f-1)*vn+Pi,fo]),ft())]})),l($,{ref:rr,opacity:0,children:[gt(xi).map(f=>l($,{children:(xi-f).toString(2).padStart(Yt,"0").split("").reverse().map((T,it)=>l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,points:[T=="0"?mt(St().getInputPos(it).add([(Yt-it-1)*vn+Pi,bn-Xi+(f+1)*Yi+(it-Yt/2)*10+qi]),ft()):mt(St().getInputPos(it).add([(Yt-it-1)*vn,bn-Xi+(f+1)*Yi+(it-Yt/2)*10+qi]),ft()),mt(St().getInputPos(0).add([kn-20,bn-Xi+(f+1)*Yi+(it-Yt/2)*10+qi]),ft())],powered:T=="0"}))})),gt(xi).map(f=>l($,{children:[l(_e,{rotation:90,scale:ks,position:mt(St().getInputPos(0).add([kn,bn-Xi+(f+1)*Yi+3]),ft())}),l(q,{position:mt(St().getInputPos(0).add([kn+30,bn-Xi+(f+1)*Yi+3]),ft()),fontSize:30,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:xi-f+""})]}))]})]})),o(),yield*$s().opacity(1,1),yield*U("microcode counter decoder start"),yield*rr().opacity(1,1),yield*U("microcode counter decoder output");const pe=C(),zs=C(),be=5,Qn=50;ft().add(l($,{ref:zs,opacity:0,children:[l(Tr,{position:St().position().addY(270),ref:pe,input:St().output,numBitsOut:be}),gt(Yt).map(f=>l(O,{ref:w(n,n.length),isSolid:!0,points:[mt(St().getInputPos(f),ft()),pe().getTopIOPos(f,Yt)],powered:()=>pe().input()[Yt-f-1]=="1"})),gt(be-1).map(f=>l(O,{ref:w(n,n.length),isSolid:!0,points:[pe().getRightIOPos(f,be),[Gi/.6/2-Qn,pe().getRightIOPos(f,be).y]],powered:()=>pe().output()[f]=="1"})),l(O,{ref:w(n,n.length),isSolid:!0,points:[pe().getRightIOPos(be-1,be),pe().getRightIOPos(be-1,be).addX(20),[pe().getRightIOPos(be-1,be).addX(20).x,St().position.y()],St().position()],powered:()=>pe().output()[be-1]=="1"})]})),zs().moveBelow(St()),o(),yield*$s().opacity(0,1),yield*zs().opacity(1,1),$s().remove(),yield*U("mini decoder");const ar=C(),Se=C(),Ui=C(),Si=8,go=Gt.length-1;ft().add(l($,{ref:ar,opacity:0,children:[l(Tr,{position:St().position().add([200,100]),ref:Se,input:()=>ce().output().slice(0,R),numBitsOut:go,opacity:1}),l(q,{ref:Ui,position:Se().position().addY(-170),fontSize:30,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"instruction"}),l($,{ref:w(s,"instructionDecoderInitialInputs"),children:gt(Si).map(f=>l(O,{isSolid:!0,points:[Se().getTopIOPos(f,Si).addY(-70),Se().getTopIOPos(f,Si)],powered:()=>Se().input()[Si-f-1]=="1"}))}),l($,{ref:w(s,"instructionDecoderOutputs"),children:gt(go).map(f=>l(O,{isSolid:!0,points:[Se().getRightIOPos(f),[Gi/.6/2-Qn,Se().getRightIOPos(f).y]],powered:()=>Se().output()[f]=="1"}))})]})),o(),yield*ar().opacity(1,1),yield*U("instruction decoder");const lr=C(),mo=138,An=630,zn=50;ft().add(l($,{ref:lr,position:[-Gi/2/.6,0],opacity:0,children:[ht.map((f,T)=>l(H,{name:f,powered:Et[f],position:[Qn+mo*T,An]})),l($,{ref:w(s,"controlSignalWires"),children:[ht.map((f,T)=>l($,{children:l(O,{ref:w(n,n.length),isSolid:!0,powered:Et[f],points:[[Qn,An-zn-15*T],[Gi/.6-Qn,An-zn-15*T]]})})),ht.map((f,T)=>l($,{children:l(O,{ref:w(n,n.length),isSolid:!0,jointEnd:!0,powered:Et[f],points:[[Qn+mo*T,An],[Qn+mo*T,An-zn-15*T]]})}))]})]})),o(),yield*lr().opacity(1,1),yield*U("control signals");const yo=50,Ct={},qr=(f,T,it,jt=2)=>{const qt=new d(f);let Ft=it.map(De=>De.split(" "));return l(lt,{children:[l(q,{position:qt.addX(-20),fontSize:25,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:T}),Ft.map((De,Kt)=>l($,{children:[l(_e,{ref:w(Ct,T+Kt),rotation:-90,position:qt.addY(40+yo*Kt),scale:.5,inputA:()=>Se().output()[Gt.indexOf(T)-1]=="1",inputB:()=>pe().output()[jt+Kt]=="1"}),De.map(dr=>l(lt,{children:l(O,{ref:w(n,n.length),isSolid:!0,jointEnd:!0,powered:Ct[T+Kt].output,points:[Ct[T+Kt].outputPos,Ct[T+Kt].outputPos.addX(-10-15*(Ft.length-Kt)),[Ct[T+Kt].outputPos.addX(-10-15*(Ft.length-Kt)).x,An-zn-15*ht.indexOf(dr)]]})})),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:Ct[T+Kt].inputB,points:[[Ct[T+Kt].inputBPos.addX(20+25*Kt).x,mt(pe().getRightIOPos(Kt+jt),ft()).y],Ct[T+Kt].inputBPos.addX(20+25*Kt),Ct[T+Kt].inputBPos]}),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:Ct[T+Kt].inputA,points:[[Ct[T+Kt].inputAPos.addX(30+25*Kt).x,mt(Se().getRightIOPos(Gt.indexOf(T)-1),ft()).y],Ct[T+Kt].inputAPos.addX(30+25*Kt),Ct[T+Kt].inputAPos]})]}))]})},Es=180,vo=-1e3-Es,ur=C();ft().add(l($,{ref:ur,opacity:0,children:[l(q,{position:[vo-70,-100],fontSize:25,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"common"}),l(lt,{children:xt.map((f,T)=>f.map(it=>l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,jointEnd:!0,powered:()=>pe().output()[T]=="1",points:[[vo+15*T,mt(pe().getRightIOPos(T),ft()).y],[vo+15*T,An-zn-15*ht.indexOf(it)]]})))}),l(lt,{children:Object.keys(Nt).map((f,T)=>qr([-1e3+Es*T,-100],f,Nt[f]))})]})),o(),yield*ur().opacity(1,1),yield*U("basic micro instructions");const hr=C(),Oi=new d([-1e3+Es*8,-100+40]),bo=7,cr=2,Ji=75,Be=C();ft().add(l($,{ref:hr,opacity:0,children:[l(q,{position:Oi.add([-20,-40]),fontSize:25,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"MOV"}),l(_e,{ref:Be,rotation:90,position:Oi.addX(-25),scale:.5,inputA:()=>Se().output()[Gt.indexOf("MOV")-1]=="1",inputB:()=>pe().output()[2]=="1"}),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:Be().inputB,points:[[Be().inputAPos.addX(-20).x,mt(pe().getRightIOPos(cr),ft()).y],Be().inputAPos.addX(-20),Be().inputAPos]}),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:Be().inputA,points:[[Be().inputBPos.addX(-30).x,mt(Se().getRightIOPos(Gt.indexOf("MOV")-1),ft()).y],Be().inputBPos.addX(-30),Be().inputBPos]}),et.map((f,T)=>l(_e,{ref:w(Ct,"MOV"+T),rotation:-90,position:Oi.addY(40+yo*T),scale:.5,inputA:()=>ce().output()[R+Fe[f]]=="1",inputB:Be().output})),l($,{ref:w(s,"movOutWires"),children:[l(O,{ref:w(n,n.length),isSolid:!0,powered:Be().output,points:[Be().outputPos,Be().outputPos.addX(Ji),[Be().outputPos.addX(Ji).x,Ct["MOV"+(et.length-1)].inputBPos.y]]}),et.map((f,T)=>l($,{children:[l(O,{ref:w(n,n.length),isSolid:!0,jointEnd:!0,powered:Ct["MOV"+T].output,points:[Ct["MOV"+T].outputPos,Ct["MOV"+T].outputPos.addX(-5-15*(bo-T)),[Ct["MOV"+T].outputPos.addX(-5-15*(bo-T)).x,An-zn-15*ht.indexOf(f)]]}),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:Ct["MOV"+T].inputB,points:[[Be().outputPos.addX(Ji).x,Ct["MOV"+T].inputBPos.y],Ct["MOV"+T].inputBPos]})]}))]})]})),o(),yield*hr().opacity(1,1),yield*U("MOV instruction"),yield*Hi().scale(z-Cs,1),yield*Q(Hi().position([-an-Uo,Vo],1),Ui().opacity(0,1),s.instructionDecoderInitialInputs.opacity(0,1),Dt(1,1),Zn().position(Zn().position().add([0,-sr]),1),$n().opacity(0,1)),Ui().remove(),s.instructionDecoderInitialInputs.remove();const Ri=20,wo=100;ft().add(l($,{ref:w(s,"movToInstructionRegisterWires"),opacity:0,children:[gt(R).map(f=>l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:()=>ce().output()[f]=="1",points:[mt(ce().getInputPos(f+R),ft()).add([-25,-8*f-Ri]),[mt(Se().getTopIOPos(f,R),ft()).x,mt(ce().getInputPos(f+R),ft()).addY(-8*f-Ri).y],mt(Se().getTopIOPos(f,R),ft())]})),gt(R-1).map(f=>l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:()=>ce().output()[R*2-f-1]=="1",points:[mt(ce().getInputPos(f+1),ft()).add([-25,8*(R-f)+Ri]),[Oi.x+wo+15*(R-f),mt(ce().getInputPos(f+1),ft()).addY(8*(R-f)+Ri).y],[Oi.x+wo+15*(R-f),Ct["MOV"+(et.length-f-1)].inputAPos.y],Ct["MOV"+(et.length-f-1)].inputAPos]})),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,jointEnd:!0,powered:()=>ce().output()[R]=="1",points:[mt(ce().getInputPos(R),ft()).add([-25,8+Ri]),[Oi.x+wo+15,mt(ce().getInputPos(R),ft()).add([-125,8+Ri]).y]]})]}));const Po=-200;ft().add(l($,{ref:w(s,"microCounterNotAndWire"),opacity:0,children:[l(O,{ref:w(n,n.length),isSolid:!0,powered:()=>hn(),points:[It(qe().position(),i,ft()),It(qe().position().addX(gi),i,ft()),[It(qe().position().addX(gi),i,ft()).x,St().position.y()+Po]]}),l(O,{ref:w(n,n.length),isSolid:!0,powered:()=>!hn(),points:[[It(qe().position().addX(gi),i,ft()).x,St().position.y()+Po],[It(qe().position().addX(gi),i,ft()).x,St().position.y()],St().position()]}),l(ai,{inputA:hn,position:[It(qe().position().addX(gi),i,ft()).x,St().position.y()+Po],rotation:180})]})),qe().moveAbove(Hi()),o(),$n().columnNames(["Instruction","Description"]),$n().columnData([["NOOP","Do nothing"],["LOADA $N","Set A reg to value from mem addr $N"],["LOADB $N","Set B reg to value from mem addr $N"],["SETA","Set A reg directly to value"],["STOREA $N","Store A reg value to mem addr $N"],["STORETB","Store A to the address the B reg is set to"],["MOV $R1 $R2","Copy data from $R1 to $R2"],["ADD","Adds the A and B registers, storing in A reg"],["JMP $N","Sets program counter to $N"],["JMPC $N","Sets program counter to $N if the carry flag is true"],["HALT","Pauses clock"]]);const Zi=150,pr=C();i.add(l(F,{ref:pr,position:[-400,-370],direction:"column",layout:!0,opacity:0,children:[l(q,{fontSize:20,width:Zi,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Reg values"}),l(q,{fontSize:20,width:Zi,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:()=>"A: "+parseInt(We().output(),2).toString()}),l(q,{fontSize:20,width:Zi,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:()=>"B: "+parseInt(Ne().output(),2).toString()}),l(q,{fontSize:20,width:Zi,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:()=>"M: "+parseInt(wi().output(),2).toString()}),l(q,{fontSize:20,width:Zi,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:()=>"I: "+Gt[parseInt(ce().output().slice(0,R),2)]+" "+parseInt(ce().output().slice(R),2).toString()})]})),yield*Q(s.movToInstructionRegisterWires.opacity(1,1),s.microCounterNotAndWire.opacity(1,1)),yield*Q($n().opacity(1,1),pr().opacity(1,1)),yield*U("scaled control logic");const xo=new d([-1e3+Es*10,-100+40]),fr=C(),Le=C(),Fs=1;ft().add(l($,{ref:fr,opacity:0,children:[l(q,{position:xo.add([-20,-40]),fontSize:25,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"JMPC"}),l(_e,{ref:Le,rotation:90,position:xo.addX(-25),scale:.5,inputA:()=>Se().output()[Gt.indexOf("JMPC")-1]=="1",inputB:()=>pe().output()[Fs]=="1"}),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:Le().inputB,points:[[Le().inputAPos.addX(-20).x,mt(pe().getRightIOPos(cr),ft()).y],Le().inputAPos.addX(-20),Le().inputAPos]}),l(O,{ref:w(n,n.length),isSolid:!0,jointStart:!0,powered:Le().inputA,points:[[Le().inputBPos.addX(-30).x,mt(Se().getRightIOPos(Gt.indexOf("JMPC")-1),ft()).y],Le().inputBPos.addX(-30),Le().inputBPos]}),l(_e,{ref:w(Ct,"JMPC0"),rotation:-90,position:xo.addY(40),scale:.5,inputB:Le().output,inputA:()=>Qe().output()[Fs]=="1"}),l($,{ref:w(s,"movOutWires"),children:[l(O,{ref:w(n,n.length),isSolid:!0,powered:Le().output,points:[Le().outputPos,Le().outputPos.addX(Ji),[Le().outputPos.addX(Ji).x,Ct.JMPC0.inputBPos.y],Ct.JMPC0.inputBPos]}),ae.map(f=>l(O,{ref:w(n,n.length),isSolid:!0,jointEnd:!0,powered:Ct.JMPC0.output,points:[Ct.JMPC0.outputPos,Ct.JMPC0.outputPos.addX(-20),[Ct.JMPC0.outputPos.addX(-20).x,An-zn-15*ht.indexOf(f)]]}))]})]}));const Me=C(),Qi=C(),Qe=C();i.add(l(lt,{children:l($,{opacity:0,ref:Me,scale:z-Zt,position:[an+Zo,Jo],children:[l(At,{ref:Qi,rotation:90,width:200,height:200,lineWidth:5,stroke:Y,radius:10,children:[l(q,{position:[0,-55],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Flags Register"}),l(wn,{position:[0,35],ref:Qe,numBits:2,input:()=>ot()&&pt()?"01":"00",load:ot})]}),l(H,{rotation:90,scale:1+z,powered:ot,position:Qi().bottom().add([-55,0]),name:"Enable Adder"})]})})),Qi().width(Qi().children()[0].width()+30);const So=new d(Bt[0].carryOutPos.x,Bt[0].carryOutPos.y-150);Me().add(l(lt,{children:[l(O,{ref:w(n,n.length),isSolid:!0,powered:pt,points:[It(So,Xt(),Me()),[It(So,Xt(),Me()).x,mt(Qe().getInputPos(0),Me()).y],mt(Qe().getInputPos(0).addX(-20),Me())]}),l(O,{ref:w(n,n.length),isSolid:!0,powered:()=>Qe().output()[Fs]=="1",points:[[Qi().top().x,mt(Qe().getOutputPos(0),Me()).y],mt(Qe().getOutputPos(0).addX(70),Me()),mt(Qe().getOutputPos(0).add([70,480]),Me()),mt(Qe().getOutputPos(0).add([-550,480]),Me()),[mt(Qe().getOutputPos(0).addX(-550),Me()).x,It(Ct.JMPC0.inputAPos,ft(),Me()).y],It(Ct.JMPC0.inputAPos,ft(),Me())]})]})),o(),Me().moveToBottom(),yield*fr().opacity(1,1),yield*U("JMPC instruction"),yield*Me().opacity(1,1),yield*U("flags register");const Vr=(f,T)=>{if(f==0)return;if(f-=1,f<xt.length){xt[f].forEach(qt=>Et[qt](!0));return}f-=rt.length;const it=Gt[T];if(Nt[it]){if(f>=Nt[it].length)return;Nt[it][f].split(" ").forEach(qt=>{Et[qt](!0)});return}if(it=="MOV"&&f==0){const jt=ce().output().slice(R);et.forEach((qt,Ft)=>{jt[Fe[qt]]=="1"&&Et[qt](!0)})}it=="JMPC"&&f==0&&Qe().output()[Fs]=="1"&&ae.forEach((jt,qt)=>{Et[jt](!0)})},Ur=()=>{if(!(!a()||c()))if(hn())St().load(!1);else{ht.forEach(Ft=>Et[Ft](!1)),oe.map(Ft=>Ft()),ht.forEach(Ft=>{se[Ft]&&se[Ft]()});let f=St().output(),T=parseInt(f,2);T+=1;let it=T.toString(2);St().input(it.padStart(Yt,"0")),pe().output()[be-1]=="1"&&St().input("0".repeat(Yt)),St().load(!0),St().output();let jt=parseInt(St().output(),2),qt=parseInt(ce().output().slice(0,R),2);Vr(jt,qt),oe.map(Ft=>Ft()),ht.forEach(Ft=>{se[Ft]&&se[Ft]()})}};function*Jr(){let f=parseInt(me().output(),2);yield ho(f,Ln/2),yield Qt().select(f,Ln/2),tr(),Ur()}ue(ji),ji=yield Ht(re,function*(){yield*yt(Ln),yield*Jr()}),(f=>{let T=Array.from(Qt().columnData());f.forEach((it,jt)=>T[jt][2]=it),Qt().columnData(T)})(["SETA 0","STOREA 31","SETA 36","STOREA 32","SETA 1","STOREA 30","LOADB 32","STORETB","SETA 1","ADD","STOREA 32","LOADA 30","LOADB 31","STOREA 31","ADD","STOREA 30","JMPC 18","JMP 6","HALT"]),yield*U("program loaded"),On=20,Ln=1/On/2,a(!0),yield*yt(1941/2/On+1),yield*U("program finished");const Zr=f=>{let T=[f],it=0;for(;it<T.length;)T[it].children().forEach(jt=>{T.push(jt)}),it++;return it};on.info("Num Children: "+Zr(i).toString()),_n(),yield*yt(1),ue(ji)});ms.name="theCPU";Jf.attach(ms.meta);ms.onReplaced??(ms.onReplaced=new ge(ms.config));let ll;ll??(ll=new Ce("endSlide",!1));ll.loadData({version:0,timeEvents:[],seed:402488104});const Kf=ll,td="#FFC66D",ed="#FF6470",du="#99C47A",gu="#68ABDF",wa=i=>l(F,{layout:!0,direction:"column",gap:30,offsetY:-1,...i});class nd extends ${constructor(t){super({...t}),this.star=C(),this.trail1=C(),this.trail2=C(),this.trail3=C(),this.dot=C(),this.add(l(lt,{children:l($,{rotation:-45,position:44,scale:.8,cache:!0,children:[l($,{cache:!0,y:-270,children:[l(wa,{ref:this.trail1,children:gt(3).map(e=>l(At,{width:40,radius:20,height:120,fill:td}))}),l(At,{width:40,radius:20,height:270,fill:"white",offsetY:-1,compositeOperation:"destination-in"})]}),l($,{cache:!0,x:-70,y:-200,children:[l(wa,{ref:this.trail2,children:gt(3).map(e=>l(At,{width:40,height:120,radius:20,fill:ed}))}),l(At,{width:40,radius:20,height:180,fill:"white",offsetY:-1,compositeOperation:"destination-in"})]}),l($,{cache:!0,x:70,y:-300,children:[l(wa,{ref:this.trail3,children:gt(4).map(e=>l(At,{ref:e===1?this.dot:void 0,width:40,radius:20,height:100,fill:e===0?du:gu,offsetY:1}))}),l(At,{width:40,radius:20,height:220,fill:"white",offsetY:-1,y:60,compositeOperation:"destination-in"})]}),l($,{ref:this.star,children:[gt(5).map(e=>l(At,{width:100,radius:50,height:150,fill:"white",offsetY:1,rotation:360/5*e,compositeOperation:"destination-out"})),gt(5).map(e=>l(At,{width:40,radius:20,height:120,fill:"white",offsetY:1,rotation:360/5*e}))]})]})}))}*animate(){const t=this;yield*Q(t.star().rotation(360,4,is),Ht(4,function*(){yield*t.trail1().position.y(-150,1,is),t.trail1().position.y(0)}),Ht(2,function*(){yield*t.trail2().position.y(-150,2,is),t.trail2().position.y(0)}),Ht(2,function*(){yield*Q(t.trail3().position.y(-130,2,is),t.dot().fill(du,2,is)),t.dot().fill(gu),t.trail3().position.y(0)})),t.star().rotation(0)}}const ys=nn(function*(i){const t=C();i.fill(sn),i.add(l(lt,{children:[l(q,{position:[0,-300],fontSize:100,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"The end!"}),l(q,{position:[-120,0],fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"Made with Motion Canvas"}),l(nd,{position:[350,-45],ref:t}),l(F,{position:[0,300],layout:!0,direction:"column",children:[l(q,{fontSize:50,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"More resources:"}),l(q,{fontSize:40,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"- Wikipedia.org, seriously."}),l(q,{fontSize:40,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"- Ben Eater on youtube (https://www.youtube.com/@BenEater)"}),l(q,{fontSize:40,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"- NAND to Tetris (https://www.nand2tetris.org/)"}),l(q,{fontSize:40,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"- Code: The Hidden Language of Computer Hardware and Software, by Charles Petzold (Book)"}),l(q,{fontSize:40,fontWeight:Z,fill:Y,fontFamily:"Helvetica",text:"- Slides available at https://github.com/JacobPuff/rocks-into-computers"})]})]})),yield Ht(re,function*(){yield*t().animate()}),yield*dn(ne.Right,1),yield*U("the end!")});ys.name="endSlide";Kf.attach(ys.meta);ys.onReplaced??(ys.onReplaced=new ge(ys.config));const id={scenes:[ss,os,rs,as,ls,us,hs,cs,ps,fs,ds,gs,ms,ys],variables:{backgroundColor:"#2c2938"}},Wu=new Ce("settings","\0settings");Wu.loadData({version:1,appearance:{color:"rgb(51,166,255)",font:!1,coordinates:!0},defaults:{background:null,size:{x:1920,y:1080}}});const dd=kp("project",{core:"3.13.0",two:"3.13.0",ui:"3.13.0",vitePlugin:"3.13.0"},[],id,Ep,Wu);export{dd as default};
